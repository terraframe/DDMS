<!--
  Copyright (C) 2018 IVCC
  
  This program is free software: you can redistribute it and/or modify
  it under the terms of the GNU General Public License as published by
  the Free Software Foundation, either version 3 of the License, or
  (at your option) any later version.
  
  This program is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  GNU General Public License for more details.
  
  You should have received a copy of the GNU General Public License
  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-->
<version xsi:noNamespaceSchemaLocation="classpath:com/runwaysdk/resources/xsd/version.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <doIt>
    <create>
    </create>
    <update>
      <mdController name="dss.vector.solutions.form.MdFormAdminController">
        <create>
          <mdAction
              name="getConditionList"
              label="Get Condition List"
              description="Creates a list of conditions for a given field."
              isPost="true">
              <mdParameter
                name="mdFieldId"
                order="0"
                label="MdField Id"
                description="The id of the MdField whose conditions we want to view and edit."
                type="java.lang.String" />
            </mdAction>
            <mdAction
              name="newCondition"
              label="New Condition"
              description="Creates a new Condition for the given field."
              isPost="true">
              <mdParameter
                name="mdFieldId"
                order="0"
                label="MdField Id"
                description="The MdField available to create a condition."
                type="java.lang.String" />
            </mdAction>
            <mdAction
              name="createCondition"
              label="Create Condition"
              description="Creates a condition"
              isPost="true">
              <mdParameter
                name="mdFieldId"
                order="0"
                label="MdField Id"
                description="The MdField that will reference the condition."
                type="java.lang.String" />
              <mdParameter
                name="condition"
                label="Condition"
                description="The condition object to create."
                type="com.runwaysdk.system.metadata.FieldCondition"
                order="1" />
            </mdAction>
            <mdAction
              name="cancelCondition"
              label="Cancel Condition"
              description="Cancels a condition and unlocks it if it is locked."
              isPost="true">
              <mdParameter
                name="condition"
                label="Condition"
                description="The conditon to unlock."
                type="com.runwaysdk.system.metadata.FieldCondition"
                order="0" />
            </mdAction>
          <mdAction
              name="addCondition"
              label="Add Condition"
              description="Creates the UI structure to add a new condition to the given field."
              isPost="true">
              <mdParameter
                name="mdFieldId"
                order="0"
                label="MdField Id"
                description="The MdField that will reference the condition."
                type="java.lang.String" />
            </mdAction>
        </create>
      </mdController>
      <mdUtil name="dss.vector.solutions.generator.MdFormUtil">
        <create>
           <mdMethod
             name="getFieldsForConditions"
             label="Get Fields For Condition"
             description="Gets all fields that can be used in conditions with the given field."
             returnType="com.runwaysdk.system.metadata.MdField[]"
             static="true">
             <mdParameter
               name="mdFieldId"
               label="MdField Id"
               description="The MdField that will reference the condition."
               type="java.lang.String"
               order="0" />
           </mdMethod>
           <mdMethod
             name="createCondition"
             label="Create Condition"
             description="Creates a condition"
             returnType="void"
             static="true">
             <mdParameter
               name="mdFieldId"
               label="MdField Id"
               description="The MdField that will reference the condition."
               type="java.lang.String"
               order="0" />
             <mdParameter
               name="condition"
               label="Condition"
               description="The condition object to create."
               type="com.runwaysdk.system.metadata.FieldCondition"
               order="1" />
           </mdMethod>           
        </create>
      </mdUtil>
    </update>
  </doIt>
  <undoIt>
    <delete>
      <object key="dss.vector.solutions.generator.MdFormUtil.createCondition" type="com.runwaysdk.system.metadata.MdMethod"/>
      <object key="dss.vector.solutions.generator.MdFormUtil.getFieldsForConditions" type="com.runwaysdk.system.metadata.MdMethod"/>
      <object key="dss.vector.solutions.form.MdFormAdminController.cancelCondition" type="com.runwaysdk.system.metadata.MdAction"/>
      <object key="dss.vector.solutions.form.MdFormAdminController.createCondition" type="com.runwaysdk.system.metadata.MdAction"/>
      <object key="dss.vector.solutions.form.MdFormAdminController.newCondition" type="com.runwaysdk.system.metadata.MdAction"/>
      <object key="dss.vector.solutions.form.MdFormAdminController.getConditionList" type="com.runwaysdk.system.metadata.MdAction"/>
      <object key="dss.vector.solutions.form.MdFormAdminController.addCondition" type="com.runwaysdk.system.metadata.MdAction"/>
    </delete>
  </undoIt>
</version>
