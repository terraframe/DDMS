<!--
  Copyright (C) 2018 IVCC
  
  This program is free software: you can redistribute it and/or modify
  it under the terms of the GNU General Public License as published by
  the Free Software Foundation, either version 3 of the License, or
  (at your option) any later version.
  
  This program is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  GNU General Public License for more details.
  
  You should have received a copy of the GNU General Public License
  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-->
<version
  xsi:noNamespaceSchemaLocation="classpath:com/runwaysdk/resources/xsd/version.xsd"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <doIt>
    <delete>
      <object
        key="dss.vector.solutions.intervention.monitor.IndividualInstance.clinicalDiagnosis"
        type="com.runwaysdk.system.metadata.MdAttribute" />
    </delete>
    <create>
      <enumerationMaster
        name="dss.vector.solutions.intervention.monitor.DiagnosisTypeMaster"
        label="Diagnosis Type Master"
        generateController="false"
        hasDeterministicId="true" />

      <object
        key="CLINICAL_DIAGNOSIS"
        type="dss.vector.solutions.intervention.monitor.DiagnosisTypeMaster">
        <attribute
          name="enumName"
          value="CLINICAL_DIAGNOSIS" />
        <attributeStruct
          name="displayLabel">
          <attribute
            name="defaultLocale"
            value="Clinical diagnosis" />
        </attributeStruct>
      </object>

      <object
        key="POSITIVE_DIAGNOSIS"
        type="dss.vector.solutions.intervention.monitor.DiagnosisTypeMaster">
        <attribute
          name="enumName"
          value="POSITIVE_DIAGNOSIS" />
        <attributeStruct
          name="displayLabel">
          <attribute
            name="defaultLocale"
            value="Confirmed positive diagnosis" />
        </attributeStruct>
      </object>

      <object
        key="NEGATIVE_DIAGNOSIS"
        type="dss.vector.solutions.intervention.monitor.DiagnosisTypeMaster">
        <attribute
          name="enumName"
          value="NEGATIVE_DIAGNOSIS" />
        <attributeStruct
          name="displayLabel">
          <attribute
            name="defaultLocale"
            value="Confirmed negative diagnosis" />
        </attributeStruct>
      </object>

      <mdEnumeration
        name="dss.vector.solutions.intervention.monitor.DiagnosisType"
        type="dss.vector.solutions.intervention.monitor.DiagnosisTypeMaster"
        label="Diagnosis Type">
        <includeAll />
      </mdEnumeration>
    </create>
    <update>
      <mdBusiness
        name="dss.vector.solutions.intervention.monitor.IndividualCase">
        <create>
          <attributes>
            <text
              name="otherSettlements"
              label="Other settlements visited in last 2 weeks" />
            <reference
              name="origin"
              label="Origin of Infection"
              type="dss.vector.solutions.ontology.Term" />
            <date
              name="plasmaLeakageOnset"
              label="Date of plasma leakage onset" />
            <date
              name="hemorrhagicOnset"
              label="Date of hemorrhagic signs and symptoms onset" />
          </attributes>
        </create>
      </mdBusiness>
      <mdBusiness
        name="dss.vector.solutions.intervention.monitor.IndividualInstance">
        <create>
          <attributes>
            <char
              name="caseIdentifier"
              label="Institutional case identifier"
              size="255" />
            <reference
              name="physician"
              label="Physician"
              type="dss.vector.solutions.Physician" />
            <enumeration
              name="diagnosisType"
              label="Type of Diagnosis"
              selectMultiple="false"
              type="dss.vector.solutions.intervention.monitor.DiagnosisType" />
            <reference
              name="diagnosis"
              label="Clinical diagnosis"
              type="dss.vector.solutions.ontology.Term" />
            <reference
              name="confirmedDiagnosis"
              label="Confirmed diagnosis"
              type="dss.vector.solutions.ontology.Term" />
            <date
              name="confirmedDiagnosisDate"
              label="Date of confirmed diagnosis" />
            <date
              name="dateOfDeath"
              label="Date of death" />
            <reference
              name="classification"
              label="Sample classification"
              type="dss.vector.solutions.ontology.Term" />
            <reference
              name="testResult"
              label="Test result"
              type="dss.vector.solutions.ontology.Term" />
            <reference
              name="primaryInfection"
              label="Primary or sequential infection"
              type="dss.vector.solutions.ontology.Term" />
          </attributes>
        </create>
      </mdBusiness>
    </update>
    <create>
      <object
        key="Ontology__dss.vector.solutions.intervention.monitor.IndividualCase.origin"
        type="dss.vector.solutions.ontology.BrowserField">
        <attributeReference
          name="mdAttribute"
          key="dss.vector.solutions.intervention.monitor.IndividualCase.origin" />
      </object>
      <object
        key="Ontology__dss.vector.solutions.intervention.monitor.IndividualInstance.diagnosis"
        type="dss.vector.solutions.ontology.BrowserField">
        <attributeReference
          name="mdAttribute"
          key="dss.vector.solutions.intervention.monitor.IndividualInstance.diagnosis" />
      </object>
      <object
        key="Ontology__dss.vector.solutions.intervention.monitor.IndividualInstance.confirmedDiagnosis"
        type="dss.vector.solutions.ontology.BrowserField">
        <attributeReference
          name="mdAttribute"
          key="dss.vector.solutions.intervention.monitor.IndividualInstance.confirmedDiagnosis" />
      </object>
      <object
        key="Ontology__dss.vector.solutions.intervention.monitor.IndividualInstance.classification"
        type="dss.vector.solutions.ontology.BrowserField">
        <attributeReference
          name="mdAttribute"
          key="dss.vector.solutions.intervention.monitor.IndividualInstance.classification" />
      </object>
      <object
        key="Ontology__dss.vector.solutions.intervention.monitor.IndividualInstance.testResult"
        type="dss.vector.solutions.ontology.BrowserField">
        <attributeReference
          name="mdAttribute"
          key="dss.vector.solutions.intervention.monitor.IndividualInstance.testResult" />
      </object>
      <object
        key="Ontology__dss.vector.solutions.intervention.monitor.IndividualInstance.primaryInfection"
        type="dss.vector.solutions.ontology.BrowserField">
        <attributeReference
          name="mdAttribute"
          key="dss.vector.solutions.intervention.monitor.IndividualInstance.primaryInfection" />
      </object>
    </create>
  </doIt>
  <undoIt>
    <update>
      <mdBusiness
        name="dss.vector.solutions.intervention.monitor.IndividualInstance">
        <create>
          <attributes>
            <boolean
              name="clinicalDiagnosis"
              label="Clinical Diagnosis"
              positiveLabel="Clinical Diagnosis"
              negativeLabel="Definitive Diagnosis" />
          </attributes>
        </create>
      </mdBusiness>
      
    </update>

    <delete>
      <object
        key="Ontology__dss.vector.solutions.intervention.monitor.IndividualCase.origin"
        type="dss.vector.solutions.ontology.BrowserField" />
      <object
        key="Ontology__dss.vector.solutions.intervention.monitor.IndividualInstance.diagnosis"
        type="dss.vector.solutions.ontology.BrowserField" />
      <object
        key="Ontology__dss.vector.solutions.intervention.monitor.IndividualInstance.confirmedDiagnosis"
        type="dss.vector.solutions.ontology.BrowserField" />
      <object
        key="Ontology__dss.vector.solutions.intervention.monitor.IndividualInstance.classification"
        type="dss.vector.solutions.ontology.BrowserField" />
      <object
        key="Ontology__dss.vector.solutions.intervention.monitor.IndividualInstance.testResult"
        type="dss.vector.solutions.ontology.BrowserField" />
      <object
        key="Ontology__dss.vector.solutions.intervention.monitor.IndividualInstance.primaryInfection"
        type="dss.vector.solutions.ontology.BrowserField" />

      <object
        key="dss.vector.solutions.intervention.monitor.IndividualInstance.primaryInfection"
        type="com.runwaysdk.system.metadata.MdAttribute" />
      <object
        key="dss.vector.solutions.intervention.monitor.IndividualInstance.testResult"
        type="com.runwaysdk.system.metadata.MdAttribute" />
      <object
        key="dss.vector.solutions.intervention.monitor.IndividualInstance.classification"
        type="com.runwaysdk.system.metadata.MdAttribute" />
      <object
        key="dss.vector.solutions.intervention.monitor.IndividualInstance.dateOfDeath"
        type="com.runwaysdk.system.metadata.MdAttribute" />
      <object
        key="dss.vector.solutions.intervention.monitor.IndividualInstance.confirmedDiagnosisDate"
        type="com.runwaysdk.system.metadata.MdAttribute" />
      <object
        key="dss.vector.solutions.intervention.monitor.IndividualInstance.confirmedDiagnosis"
        type="com.runwaysdk.system.metadata.MdAttribute" />
      <object
        key="dss.vector.solutions.intervention.monitor.IndividualInstance.diagnosis"
        type="com.runwaysdk.system.metadata.MdAttribute" />
      <object
        key="dss.vector.solutions.intervention.monitor.IndividualInstance.diagnosisType"
        type="com.runwaysdk.system.metadata.MdAttribute" />
      <object
        key="dss.vector.solutions.intervention.monitor.IndividualInstance.physician"
        type="com.runwaysdk.system.metadata.MdAttribute" />
      <object
        key="dss.vector.solutions.intervention.monitor.IndividualInstance.caseIdentifier"
        type="com.runwaysdk.system.metadata.MdAttribute" />
      <object
        key="dss.vector.solutions.intervention.monitor.IndividualCase.hemorrhagicOnset"
        type="com.runwaysdk.system.metadata.MdAttribute" />
      <object
        key="dss.vector.solutions.intervention.monitor.IndividualCase.plasmaLeakageOnset"
        type="com.runwaysdk.system.metadata.MdAttribute" />
      <object
        key="dss.vector.solutions.intervention.monitor.IndividualCase.origin"
        type="com.runwaysdk.system.metadata.MdAttribute" />
      <object
        key="dss.vector.solutions.intervention.monitor.IndividualCase.otherSettlements"
        type="com.runwaysdk.system.metadata.MdAttribute" />
      <object
        key="dss.vector.solutions.intervention.monitor.DiagnosisType"
        type="com.runwaysdk.system.metadata.MdEnumeration" />
      <object
        key="dss.vector.solutions.intervention.monitor.DiagnosisTypeMaster"
        type="com.runwaysdk.system.metadata.MdBusiness" />
    </delete>
  </undoIt>
</version>
