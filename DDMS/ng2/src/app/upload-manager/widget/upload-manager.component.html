<div id="app-container" class="container um-containerDiv">

  <div *ngIf="histories === null">
    <localize key='uploadmanager.loadingData'></localize>
  </div>
  
  <div>
    <div class="um-headerDiv" style="width:100%">
      <pagination-controls style="float:left;width:50%;" (pageChange)="onPageChange($event)"></pagination-controls>
      
      <label style="float:right;width:50%;text-align:right;">
	      <localize key="uploadmanager.show"></localize>
	      <select style="width:60px; float:none; margin-left:10px; margin-right:10px;" [(ngModel)]="pageSize" (change)="onValueChange($event)" >
				  <option value="10">10</option>
				  <option value="25">25</option>
				  <option value="50">50</option>
				  <option value="100">100</option>
				</select>
				<localize key="uploadmanager.entries"></localize>
			</label>
    </div>
    <div class="um-tableDiv" >
		  <table id="uploadmanager-table" class="list-table table table-bordered table-striped">        
		    <thead>
		      <tr>
		        <th class="label-column"><localize key='uploadmanager.name'></localize></th>
		        <th class="label-column"><localize key='uploadmanager.startTime'></localize></th>
		        <th class="label-column"><localize key='uploadmanager.endTime'></localize></th>
		        <th class="label-column"><localize key='uploadmanager.status'></localize></th>
		        <th class="label-column"><localize key='uploadmanager.records'></localize></th>
		        <th class="label-column"><localize key='uploadmanager.hasError'></localize></th>
		        <th class="label-column"><localize key='uploadmanager.geoSyns'></localize></th>
		        <th class="label-column"><localize key='uploadmanager.termSyns'></localize></th>
		      </tr>
		    </thead>
		    <tbody>
		      <tr *ngFor="let history of histories | paginate: { itemsPerPage: this.pageSize, currentPage: this.pageNumber, totalItems: this.total }" class="fade-ngRepeat-item">
		        <td class="column-name"> {{ history.name }} </td>
		        <td class="column-startTime"> {{history.startTime}} </td>
		        <td class="column-startTime"> {{history.endTime}} </td>
		        <td class="column-status"> {{history.status}} </td>
		        <td class="column-records"> {{history.importCount}} / {{history.totalRecords}} </td>
		        <td class="column-hasError">
	            <a *ngIf="history.hasError" class="fa fa-download" href="dss.vector.solutions.generator.ExcelController.downloadErrorSpreadsheet.mojo?historyId={{history.id}}"></a>
	            <a *ngIf="history.historyInformation" class="fa fa-exclamation-circle" (click)="displayHistoryInformation(history.historyInformation);"></a>
	          </td>
		        <td class="column-hasSynonyms"> 
	            {{history.geoSyns}}
	            <br *ngIf="history.geoSyns > 0" />
	            <a *ngIf="history.geoSyns > 0" class="fa fa-pencil" href="dss.vector.solutions.generator.ExcelController.resolveGeoSynonyms.mojo?historyId={{history.id}}"></a>
	          </td>
		        <td class="column-hasSynonyms">
	            {{history.termSyns}}
	            <br *ngIf="history.termSyns > 0" />
	            <a *ngIf="history.termSyns > 0" class="fa fa-pencil" href="dss.vector.solutions.generator.ExcelController.resolveTermSynonyms.mojo?historyId={{history.id}}"></a>
	          </td>
		      </tr>
		    </tbody>    
		  </table>
		  <input *ngIf="hasWritePermission" type="button" [value]="'uploadmanager.clearHistory' | localize" class="btn btn-default btn-primary" (click)="clearHistory()" />
	  </div>
  </div>
</div>
