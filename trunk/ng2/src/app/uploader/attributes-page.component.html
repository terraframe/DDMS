<form #form="ngForm" name="form" class="modal-form">
  <div>
    <fieldset>
      <section class="form-container">


<div>
  <div class="wide-holder">
    <div class="row-holder">
      <p><localize key="dataUploader.attributeConfiguration.heading.paragraph"></localize></p>
    </div>
  </div>
  
  <div class="wide-holder">
    <div *ngFor="let field of sheet.fields; let i = index;">
      <div class="row-holder">
        <div class="inline-text short" *ngIf="field.type != 'LOCATION' && field.type != 'FORMID'">
          <label><localize key="dataUploader.validate"></localize></label>
          <input [(ngModel)]="field.hasValidation" [name]="i + '-validation'" type="checkbox" class="jcf-unselectable chk-area" />
        </div>
        
        <div class="inline-text short" *ngIf="field.type == 'LOCATION' || field.type == 'FORMID'"></div>
        
        <div class="inline-text">
          <label><localize key="dataUploader.label"></localize></label>
          <input [(ngModel)]="field.label" #label="ngModel" [name]="i + '-name'" [ngClass]="{textInputDisabled : field.type == 'IGNORE'}" required type="text" funcValidator [validator]="this" config="label" />
        </div>
        <div class="inline-box medium" *ngIf="field.columnType == 'TEXT'">
          <label><localize key="dataUploader.type"></localize></label>
          <select class="select-area" [(ngModel)]="field.type"  #fieldType="ngModel" [ngClass]="{selectInputDisabled : field.type == 'IGNORE'}" [name]="i + '-type'" required (change)="accept(field)"  funcValidator [validator]="this" config="type">
            <option value="LOCATION"><localize key="dataUploader.location"></localize></option>
            <option value="CATEGORY"><localize key="dataUploader.category"></localize></option>
            <option value="FORMID"><localize key="dataUploader.formId"></localize></option>
            <option value="TEXT"><localize key="dataUploader.text"></localize></option>
            <option value="IGNORE"><localize key="dataUploader.ignore"></localize></option>
          </select>             
          <p *ngIf="fieldType.invalid" class="error-message">
            <localize key="dataUploader.uniqueFormId"></localize>
          </p>                 
        </div>
        <div class="inline-box medium" *ngIf="field.columnType == 'NUMBER'">
          <label><localize key="dataUploader.type"></localize></label>
          <select class="select-area" [(ngModel)]="field.type" #fieldType="ngModel" [name]="i + '-type'" required (change)="accept(field)" funcValidator [validator]="this" config="type">
          
            <option value="LONG"><localize key="dataUploader.long"></localize></option>
            <option value="DOUBLE"><localize key="dataUploader.double"></localize></option>
<!-- 
            <option value="LATITUDE"><localize key="dataUploader.latitude"></localize></option>
            <option value="LONGITUDE"><localize key="dataUploader.longitude"></localize></option>
 -->            
            <option value="LOCATION"><localize key="dataUploader.location"></localize></option> 
            <option value="FORMID"><localize key="dataUploader.formId"></localize></option>            
            <option value="TEXT"><localize key="dataUploader.text"></localize></option>     
            <option value="IGNORE"><localize key="dataUploader.ignore"></localize></option>
          </select> 
          
          <p *ngIf="fieldType.invalid" class="error-message">
            <localize key="dataUploader.uniqueFormId"></localize>
          </p>               
        </div>      
        <div class="inline-box medium" *ngIf="field.columnType == 'DATE'">
          <label><localize key="dataUploader.type"></localize></label>
          <select class="select-area" [(ngModel)]="field.type" [name]="i + '-type'" required (change)="accept(field)">
            <option value="DATE"><localize key="dataUploader.date"></localize></option>
            <option value="IGNORE"><localize key="dataUploader.ignore"></localize></option>
          </select>      
        </div>      
        <div class="inline-box medium" *ngIf="field.columnType == 'BOOLEAN'">
          <label><localize key="dataUploader.type"></localize></label>
          <select class="select-area" [(ngModel)]="field.type" [name]="i + '-type'" required (change)="accept(field)">
            <option value="BOOLEAN"><localize key="dataUploader.boolean"></localize></option>
            <option value="IGNORE"><localize key="dataUploader.ignore"></localize></option>
          </select>      
        </div>      
        <div class="inline-box medium" *ngIf="field.columnType == ''">
          <label><localize key="dataUploader.type"></localize></label>
          <select class="select-area" [(ngModel)]="field.type" [name]="i + '-type'" required (change)="accept(field)">
            <option value="IGNORE"><localize key="dataUploader.ignore"></localize></option>
          </select>      
        </div>      
        <div class="inline-box fade-ngIf" *ngIf="field.type == 'LOCATION'">
          <label><localize key="dataUploader.locationType"></localize></label>
          <select class="select-area" [(ngModel)]="field.universal" [name]="i + '-universal'" required>
            <option value=""></option>
            <option *ngFor="let opt of universals" [value]="opt.value">{{opt.label}}</option>
          </select>
        </div>      
        <div class="inline-box fade-ngIf" *ngIf="field.type == 'CATEGORY'">
          <label><localize key="dataUploader.domainRoot"></localize></label>
          <select class="select-area" [(ngModel)]="field.rootType" [name]="i + '-rootType'">
            <option value=""><localize key="dataUploader.new"></localize></option>          
            <option value="EXISTING"><localize key="dataUploader.existing"></localize></option>          
          </select>
        </div>      
        <div class="inline-text fade-ngIf" *ngIf="field.type == 'CATEGORY' && field.rootType == ''">
          <label><localize key="dataUploader.categoryLabel"></localize></label>
          <input [(ngModel)]="field.categoryLabel" #categoryLabel="ngModel" [name]="i + '-categoryLabel'" required type="text" />
        </div>
        <div class="inline-text fade-ngIf" *ngIf="field.type == 'CATEGORY' && field.rootType == 'EXISTING'">
          <label><localize key="dataUploader.categoryLabel"></localize></label>
          <term-field [(model)]="field.root" [attribute]="i + '-root'"></term-field>
        </div>
      
<!--         <div class="inline-text" *ngIf="field.type != 'LOCATION'"> -->
<!--           <input [(ngModel)]="field.hasValidation" [name]="i + '-validation'" type="checkbox" /> -->
<!--           <label><localize key="dataUploader.validate"></localize></label> -->
<!--         </div> -->
      
        <div class="inline-error-message pull-right">
          <p *ngIf="label.invalid">
            <localize key="dataUploader.unique"></localize>
          </p>    
          <p *ngIf="categoryLabel && categoryLabel.invalid">
            <localize key="dataUploader.uniqueCategory"></localize>
          </p>    
        </div>      
      </div>
      <div class="row-holder validation-row" *ngIf="field.hasValidation">
<!--         <div> -->
<!--           <div class="inline-text medium"> -->
<!--             <label><localize key="dataUploader.required"></localize></label> -->
<!--             <input [(ngModel)]="field.required" [name]="i + '-required'" type="checkbox" style="display:block;position:fixed;" class="jcf-unselectable chk-area"/> -->
<!--           </div> -->
<!--         </div>       -->
        <div *ngIf="field.type == 'DATE'">
          <div class="inline-box">
            <tr>
              <td>
              <input type="radio" [name]="i + '-validation'" [(ngModel)]="field.validation" value="" /><localize key="dataUploader.none"></localize>
              </td>
            </tr>
            <tr>
             <td>
               <input type="radio" [name]="i + '-validation'" [(ngModel)]="field.validation" value="BTE" /><localize key="dataUploader.bte"></localize>
             </td>
            </tr>
            <tr>
             <td>
              <input type="radio" [name]="i + '-validation'" [(ngModel)]="field.validation" value="BTI" /><localize key="dataUploader.bti"></localize>
             </td>
            </tr>
            <tr>
             <td>
              <input type="radio" [name]="i + '-validation'" [(ngModel)]="field.validation" value="ATE" /><localize key="dataUploader.ate"></localize>
             </td>
            </tr>
            <tr>
             <td>
              <input type="radio" [name]="i + '-validation'" [(ngModel)]="field.validation" value="ATI" /><localize key="dataUploader.ati"></localize>
             </td>
            </tr>
            <tr>
             <td>
              <input type="radio" [name]="i + '-validation'" [(ngModel)]="field.validation" value="RANGE" /><localize key="dataUploader.range"></localize>
             </td>
             </tr>
          </div>
          <div class="inline-text" *ngIf="field.validation == 'RANGE'">
            <label><localize key="dataUploader.startDate"></localize></label>
            <input [(ngModel)]="field.validationStartRange" [id]="i + '-startRange'" [name]="i + '-startRange'" type="text" dateField/>
          </div>
          <div class="inline-text" *ngIf="field.validation == 'RANGE'">
            <label><localize key="dataUploader.endDate"></localize></label>
            <input [(ngModel)]="field.validationEndRange" [id]="i + '-endRange'" [name]="i + '-endRange'" type="text" dateField/>
          </div>
        </div>
        <div *ngIf="field.type == 'LONG' || field.type == 'DOUBLE'">
          <div class="inline-text">
            <label><localize key="dataUploader.startRange"></localize></label>
            <input [(ngModel)]="field.validationStartRange" #startRange="ngModel" [name]="i + '-startRange'" type="text" funcValidator [validator]="this" config="integer"/>
          </div>
          <div class="inline-text">
            <label><localize key="dataUploader.endRange"></localize></label>
            <input [(ngModel)]="field.validationEndRange" #endRange="ngModel" [name]="i + '-endRange'" type="text" funcValidator [validator]="this" config="integer"/>
          </div>
          <div class="inline-error-message pull-right">
            <p *ngIf="startRange.invalid || endRange.invalid">
              <localize key="dataUploader.numberValidation"></localize>
            </p>    
          </div>                          
        </div>
        
        <div>
          <div class="inline-text medium">
            <label style="width:100%;"><localize key="dataUploader.required"></localize></label>
            <input [(ngModel)]="field.required" [name]="i + '-required'" type="checkbox" class="jcf-unselectable chk-area"/>
          </div>
        </div> 
      </div>      
    </div>
  </div> 
  
  <div class="wide-holder">
    <div class="error-message">
      <p *ngIf="coordinateMismatch"><localize key="dataUploader.coordinateMismatch"></localize></p>
      <p *ngIf="coordinateText"><localize key="dataUploader.coordinateNoLabel"></localize></p>
    </div>          
  </div>    
</div>

      </section>        
    </fieldset>   
    
    <paging [form]="form" [page]="page" [global]="!(coordinateMismatch || coordinateText)"></paging>
  </div>
</form>
