<version
  xsi:noNamespaceSchemaLocation="../../profiles/version_gis.xsd"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <doIt>
    <create>
      <mdBusiness
        name="dss.vector.solutions.general.PopulationData"
        label="Population Data"
        generateController="false"
        description="Population data for a geo entity on a given year">
        <attributes>
          <reference
            name="geoEntity"
            label="Geo Entity"
            type="dss.vector.solutions.geo.generated.GeoEntity"
            required="true" />
          <integer
            name="yearOfData"
            label="Year"
            required="true" />
          <long
            name="population"
            label="Population"
            required="false" />
          <float
            name="growthRate"
            label="Annual Growth Rate (%)"
            required="false"
            length="10"
            decimal="3" />
        </attributes>
        <mdMethod
          name="unlockView"
          label="unlock View"
          returnType="dss.vector.solutions.general.PopulationDataView"
          static="false">
        </mdMethod>
        <mdMethod
          name="lockView"
          label="lock View"
          returnType="dss.vector.solutions.general.PopulationDataView"
          static="false">
        </mdMethod>
        <mdMethod
          name="getView"
          label="Get View"
          returnType="dss.vector.solutions.general.PopulationDataView"
          static="false" />
      </mdBusiness>
      <mdView
        name="dss.vector.solutions.general.PopulationDataView"
        label="Population Data">
        <attributes>
          <char
            name="concreteId"
            label="Concrete Id"
            size="255"
            required="true" />
          <char
            name="geoEntity"
            label="Geo Entity"
            size="255"
            required="true" />
          <char
            name="entityLabel"
            label="Geo Entity"
            size="255"
            required="true" />
          <virtual
            name="yearOfData"
            concrete="yearOfData"
            type="dss.vector.solutions.general.PopulationData" />
          <virtual
            name="population"
            concrete="population"
            type="dss.vector.solutions.general.PopulationData" />
          <virtual
            name="growthRate"
            concrete="growthRate"
            type="dss.vector.solutions.general.PopulationData" />
        </attributes>
        <mdMethod
          name="deleteConcrete"
          label="Delete Concrete"
          returnType="void"
          static="false" />
        <mdMethod
          name="getViews"
          returnType="dss.vector.solutions.general.PopulationDataView[]"
          label="Get View"
          static="true">
          <mdParameter
            name="geoId"
            label="Geo Id"
            order="0"
            type="java.lang.String" />
          <mdParameter
            name="yearOfData"
            label="Year"
            order="1"
            type="java.lang.Integer" />
        </mdMethod>
        <mdMethod
          name="applyAll"
          returnType="dss.vector.solutions.general.PopulationDataView[]"
          label="Apply All"
          static="true">
          <mdParameter
            name="views"
            order="0"
            label="Views"
            type="dss.vector.solutions.general.PopulationDataView[]" />
        </mdMethod>
      </mdView>
      <mdController
        name="dss.vector.solutions.general.PopulationDataController"
        label="Population Data Controller">
        <mdAction
          name="searchForPopulationData"
          isPost="true"
          isQuery="false">
          <mdParameter
            name="geoId"
            label="Geo Id"
            order="0"
            type="java.lang.String" />
          <mdParameter
            name="yearOfData"
            label="Year"
            order="1"
            type="java.lang.Integer" />
        </mdAction>
        <mdAction
          name="search"
          isPost="false"
          label="Search" />
      </mdController>
      <mdException
        name="dss.vector.solutions.general.YearValueException"
        label="Year Value Exception">
        <attributes>
          <integer
            name="yearValue"
            label="Year" />
          <integer
            name="minYear"
            label="Min" />
          <integer
            name="maxYear"
            label="Max" />
        </attributes>
      </mdException>
      <mdProblem
        name="dss.vector.solutions.general.GeoEntityPopulationProblem"
        label="Geo Entity Population Problem">
        <attributes>
          <char
            name="entityLabel"
            label="Geo Entity"
            size="255" />
        </attributes>
      </mdProblem>
    </create>
    <permissions>
      <role roleName="mdss.GUIVisibility">
        <grant>
          <mdViewPermission type="dss.vector.solutions.general.PopulationDataView">
            <operation name="CREATE"/>
            <operation name="READ"/>
            <operation name="READ_ALL_ATTRIBUTES"/>
            <operation name="WRITE"/>
            <operation name="WRITE_ALL_ATTRIBUTES"/>
            <operation name="DELETE"/>
          </mdViewPermission>
          <mdBusinessPermission type="dss.vector.solutions.general.PopulationData">
            <operation name="READ"/>
          </mdBusinessPermission>
        </grant>
      </role>
      <role roleName="mdss.coordinator, mdss.operationalManager">
        <grant>
          <mdBusinessPermission type="dss.vector.solutions.general.PopulationData">
            <operation name="CREATE"/>
            <operation name="WRITE"/>
            <operation name="WRITE_ALL_ATTRIBUTES"/>
            <operation name="DELETE"/>
          </mdBusinessPermission>
        </grant>
      </role>
    </permissions>
  </doIt>
  <undoIt>
    <delete>
      <object
        key="dss.vector.solutions.general.PopulationData"
        type="com.terraframe.mojo.system.metadata.MdBusiness" />
      <object
        key="dss.vector.solutions.general.PopulationDataView"
        type="com.terraframe.mojo.system.metadata.MdView" />
      <object
        key="dss.vector.solutions.general.PopulationDataController"
        type="com.terraframe.mojo.system.metadata.MdController" />
      <object
        key="dss.vector.solutions.general.YearValueException"
        type="com.terraframe.mojo.system.metadata.MdException" />
      <object
        key="dss.vector.solutions.general.GeoEntityPopulationProblem"
        type="com.terraframe.mojo.system.metadata.MdProblem" />
    </delete>
  </undoIt>
</version>