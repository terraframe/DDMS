<version
  xsi:noNamespaceSchemaLocation="../../profiles/version_gis.xsd"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <doIt>
    <create>
      <mdBusiness
        name="dss.vector.solutions.general.ThresholdData"
        label="Threshold"
        generateController="false"
        description="Population data for a geo entity on a given year">
        <attributes>
          <reference
            name="geoEntity"
            label="Geo Entity"
            type="dss.vector.solutions.geo.generated.GeoEntity"
            required="true" />
          <reference
            name="season"
            label="Malaria Season"
            type="dss.vector.solutions.general.MalariaSeason"
            required="true" />
        </attributes>
        <mdMethod
          name="unlockView"
          label="unlock View"
          returnType="dss.vector.solutions.general.ThresholdDataView"
          static="false">
        </mdMethod>
        <mdMethod
          name="lockView"
          label="lock View"
          returnType="dss.vector.solutions.general.ThresholdDataView"
          static="false">
        </mdMethod>
        <mdMethod
          name="getView"
          label="Get View"
          returnType="dss.vector.solutions.general.ThresholdDataView"
          static="false" />
      </mdBusiness>
      <mdView
        name="dss.vector.solutions.general.ThresholdDataView"
        label="Threshold">
        <attributes>
          <char
            name="concreteId"
            label="Concrete Id"
            size="255"
            required="true" />
          <char
            name="geoEntity"
            label="Geo Entity"
            size="255"
            required="true" />
          <char
            name="entityLabel"
            label="Geo Entity"
            size="255"
            required="true" />
          <virtual
            name="season"
            concrete="season"
            type="dss.vector.solutions.general.ThresholdData" />
          <integer
            name="outbreak_0"
            label="W1T1" />
          <integer
            name="outbreak_1"
            label="W2T1" />
          <integer
            name="outbreak_2"
            label="W3T1" />
          <integer
            name="outbreak_3"
            label="W4T1" />
          <integer
            name="outbreak_4"
            label="W5T1" />
          <integer
            name="outbreak_5"
            label="W6T1" />
          <integer
            name="outbreak_6"
            label="W7T1" />
          <integer
            name="outbreak_7"
            label="W8T1" />
          <integer
            name="outbreak_8"
            label="W9T1" />
          <integer
            name="outbreak_9"
            label="W10T1" />
          <integer
            name="outbreak_10"
            label="W11T1" />
          <integer
            name="outbreak_11"
            label="W12T1" />
          <integer
            name="outbreak_12"
            label="W13T1" />
          <integer
            name="outbreak_13"
            label="W14T1" />
          <integer
            name="outbreak_14"
            label="W15T1" />
          <integer
            name="outbreak_15"
            label="W16T1" />
          <integer
            name="outbreak_16"
            label="W17T1" />
          <integer
            name="outbreak_17"
            label="W18T1" />
          <integer
            name="outbreak_18"
            label="W19T1" />
          <integer
            name="outbreak_19"
            label="W20T1" />
          <integer
            name="outbreak_20"
            label="W21T1" />
          <integer
            name="outbreak_21"
            label="W22T1" />
          <integer
            name="outbreak_22"
            label="W23T1" />
          <integer
            name="outbreak_23"
            label="W24T1" />
          <integer
            name="outbreak_24"
            label="W25T1" />
          <integer
            name="outbreak_25"
            label="W26T1" />
          <integer
            name="outbreak_26"
            label="W27T1" />
          <integer
            name="outbreak_27"
            label="W28T1" />
          <integer
            name="outbreak_28"
            label="W29T1" />
          <integer
            name="outbreak_29"
            label="W30T1" />
          <integer
            name="outbreak_30"
            label="W31T1" />
          <integer
            name="outbreak_31"
            label="W32T1" />
          <integer
            name="outbreak_32"
            label="W33T1" />
          <integer
            name="outbreak_33"
            label="W34T1" />
          <integer
            name="outbreak_34"
            label="W35T1" />
          <integer
            name="outbreak_35"
            label="W36T1" />
          <integer
            name="outbreak_36"
            label="W37T1" />
          <integer
            name="outbreak_37"
            label="W38T1" />
          <integer
            name="outbreak_38"
            label="W39T1" />
          <integer
            name="outbreak_39"
            label="W40T1" />
          <integer
            name="outbreak_40"
            label="W41T1" />
          <integer
            name="outbreak_41"
            label="W42T1" />
          <integer
            name="outbreak_42"
            label="W43T1" />
          <integer
            name="outbreak_43"
            label="W44T1" />
          <integer
            name="outbreak_44"
            label="W45T1" />
          <integer
            name="outbreak_45"
            label="W46T1" />
          <integer
            name="outbreak_46"
            label="W47T1" />
          <integer
            name="outbreak_47"
            label="W48T1" />
          <integer
            name="outbreak_48"
            label="W49T1" />
          <integer
            name="outbreak_49"
            label="W50T1" />
          <integer
            name="outbreak_50"
            label="W51T1" />
          <integer
            name="outbreak_51"
            label="W52T1" />
          <integer
            name="outbreak_52"
            label="W53T1" />
          <integer
            name="identification_0"
            label="W1T2" />
          <integer
            name="identification_1"
            label="W2T2" />
          <integer
            name="identification_2"
            label="W3T2" />
          <integer
            name="identification_3"
            label="W4T2" />
          <integer
            name="identification_4"
            label="W5T2" />
          <integer
            name="identification_5"
            label="W6T2" />
          <integer
            name="identification_6"
            label="W7T2" />
          <integer
            name="identification_7"
            label="W8T2" />
          <integer
            name="identification_8"
            label="W9T2" />
          <integer
            name="identification_9"
            label="W10T2" />
          <integer
            name="identification_10"
            label="W11T2" />
          <integer
            name="identification_11"
            label="W12T2" />
          <integer
            name="identification_12"
            label="W13T2" />
          <integer
            name="identification_13"
            label="W14T2" />
          <integer
            name="identification_14"
            label="W15T2" />
          <integer
            name="identification_15"
            label="W16T2" />
          <integer
            name="identification_16"
            label="W17T2" />
          <integer
            name="identification_17"
            label="W18T2" />
          <integer
            name="identification_18"
            label="W19T2" />
          <integer
            name="identification_19"
            label="W20T2" />
          <integer
            name="identification_20"
            label="W21T2" />
          <integer
            name="identification_21"
            label="W22T2" />
          <integer
            name="identification_22"
            label="W23T2" />
          <integer
            name="identification_23"
            label="W24T2" />
          <integer
            name="identification_24"
            label="W25T2" />
          <integer
            name="identification_25"
            label="W26T2" />
          <integer
            name="identification_26"
            label="W27T2" />
          <integer
            name="identification_27"
            label="W28T2" />
          <integer
            name="identification_28"
            label="W29T2" />
          <integer
            name="identification_29"
            label="W30T2" />
          <integer
            name="identification_30"
            label="W31T2" />
          <integer
            name="identification_31"
            label="W32T2" />
          <integer
            name="identification_32"
            label="W33T2" />
          <integer
            name="identification_33"
            label="W34T2" />
          <integer
            name="identification_34"
            label="W35T2" />
          <integer
            name="identification_35"
            label="W36T2" />
          <integer
            name="identification_36"
            label="W37T2" />
          <integer
            name="identification_37"
            label="W38T2" />
          <integer
            name="identification_38"
            label="W39T2" />
          <integer
            name="identification_39"
            label="W40T2" />
          <integer
            name="identification_40"
            label="W41T2" />
          <integer
            name="identification_41"
            label="W42T2" />
          <integer
            name="identification_42"
            label="W43T2" />
          <integer
            name="identification_43"
            label="W44T2" />
          <integer
            name="identification_44"
            label="W45T2" />
          <integer
            name="identification_45"
            label="W46T2" />
          <integer
            name="identification_46"
            label="W47T2" />
          <integer
            name="identification_47"
            label="W48T2" />
          <integer
            name="identification_48"
            label="W49T2" />
          <integer
            name="identification_49"
            label="W50T2" />
          <integer
            name="identification_50"
            label="W51T2" />
          <integer
            name="identification_51"
            label="W52T2" />
          <integer
            name="identification_52"
            label="W53T2" />
        </attributes>
        <mdMethod
          name="deleteConcrete"
          label="Delete Concrete"
          returnType="void"
          static="false" />
        <mdMethod
          name="getViews"
          returnType="dss.vector.solutions.general.ThresholdDataView[]"
          label="Get View"
          static="true">
          <mdParameter
            name="geoId"
            label="Geo Id"
            order="0"
            type="java.lang.String" />
          <mdParameter
            name="season"
            label="Malaria Season"
            order="1"
            type="dss.vector.solutions.general.MalariaSeason" />
        </mdMethod>
        <mdMethod
          name="applyAll"
          returnType="dss.vector.solutions.general.ThresholdDataView[]"
          label="Apply All"
          static="true">
          <mdParameter
            name="views"
            order="0"
            label="Views"
            type="dss.vector.solutions.general.ThresholdDataView[]" />
        </mdMethod>
        <mdMethod
          name="exportToExcel"
          returnType="java.io.InputStream"
          label="Export To Excel"
          static="true">
          <mdParameter
            name="views"
            label="Views"
            order="0"
            type="dss.vector.solutions.general.ThresholdDataView[]" />
        </mdMethod>
      </mdView>
      <mdController
        name="dss.vector.solutions.general.ThresholdDataController"
        label="Population Data Controller">
        <mdAction
          name="searchForThresholdData"
          isPost="true"
          isQuery="false">
          <mdParameter
            name="geoId"
            label="Geo Id"
            order="0"
            type="java.lang.String" />
          <mdParameter
            name="season"
            label="Season"
            order="1"
            type="dss.vector.solutions.general.MalariaSeason" />
        </mdAction>
        <mdAction
          name="search"
          isPost="false"
          label="Search" />
        <mdAction
          name="exportThresholdData"
          label="Export Threshold Data"
          isPost="true"
          description="Exports threshold data to an excel sheet">
          <mdParameter
            name="views"
            label="Views"
            order="0"
            type="dss.vector.solutions.general.ThresholdDataView[]" />
        </mdAction>
      </mdController>
      <mdIndex
        type="dss.vector.solutions.general.ThresholdData"
        label="Threshold Data Index"
        active="true"
        unique="true">
        <attribute
          name="geoEntity"
          indexOrder="0" />
        <attribute
          name="season"
          indexOrder="1" />
      </mdIndex>
      <mdException
        name="dss.vector.solutions.general.MalariaSeasonDateException"
        label="Malaria Season Date">
        <attributes>
          <char
            name="seasonName"
            label="Season Name"
            size="255" />
          <date
            name="weekDate"
            label="Week Date" />
        </attributes>
      </mdException>
    </create>
    <permissions>
      <role
        roleName="mdss.GUIVisibility">
        <grant>
          <mdViewPermission
            type="dss.vector.solutions.general.ThresholdDataView">
            <operation
              name="CREATE" />
            <operation
              name="READ" />
            <operation
              name="READ_ALL_ATTRIBUTES" />
            <operation
              name="WRITE" />
            <operation
              name="WRITE_ALL_ATTRIBUTES" />
            <operation
              name="DELETE" />
          </mdViewPermission>
          <mdBusinessPermission
            type="dss.vector.solutions.general.ThresholdData">
            <operation
              name="READ" />
          </mdBusinessPermission>
        </grant>
      </role>
      <role
        roleName="mdss.coordinator, mdss.operationalManager">
        <grant>
          <mdBusinessPermission
            type="dss.vector.solutions.general.ThresholdData">
            <operation
              name="CREATE" />
            <operation
              name="WRITE" />
            <operation
              name="WRITE_ALL_ATTRIBUTES" />
            <operation
              name="DELETE" />
          </mdBusinessPermission>
        </grant>
      </role>
    </permissions>
  </doIt>
  <undoIt>
    <delete>
      <object
        key="dss.vector.solutions.general.ThresholdData"
        type="com.terraframe.mojo.system.metadata.MdBusiness" />
      <object
        key="dss.vector.solutions.general.ThresholdDataView"
        type="com.terraframe.mojo.system.metadata.MdView" />
      <object
        key="dss.vector.solutions.general.ThresholdDataController"
        type="com.terraframe.mojo.system.metadata.MdController" />
    </delete>
  </undoIt>
</version>