<version xsi:noNamespaceSchemaLocation="../../profiles/version_gis.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <doIt>
    <create>
    
     <mdBusiness
        name="dss.vector.solutions.query.CategoryGen"
        label="Category Gen"
        description="Class to represent the essential data to generate categories">
        <attributes>
          <char
            name="layerId"
            label="Layer Id"
            required="true"
            size="64" />
          <char
            name="factoryType"
            label="Calculation Type"
            required="true"
            size="64" />
          <integer
            name="categoryCount"
            label="Count"
            description="The number of categories to make."
            required="true"
            defaultValue="5" />
          <integer
            name="precisionFigures"
            label="Precision"
            description="The number of significant figures."
            required="true"
            defaultValue="3" />
          <char
            name="pointStrokeStart"
            label="Point Stroke Start"
            description="The start stroke color for a point"
            required="true"
            defaultValue="#ffffff"
            size="7" />
          <char
            name="pointStrokeEnd"
            label="Point Stroke End"
            description="The end stroke color for a point"
            required="true"
            defaultValue="#000000"
            size="7" />
          <char
            name="polygonStrokeStart"
            label="Polygon Stroke Start"
            description="The start stroke color for a polygon"
            required="true"
            defaultValue="#ffffff"
            size="7" />
          <char
            name="polygonStrokeEnd"
            label="Polygon Stroke End"
            description="The end stroke color for a polygon"
            required="true"
            defaultValue="#000000"
            size="7" />
          <char
            name="polygonFillStart"
            label="Polygon Fill Start"
            description="The start fill color for a polygon"
            required="true"
            defaultValue="#ffffff"
            size="7" />
          <char
            name="polygonFillEnd"
            label="Polygon Fill End"
            description="The end fill color for a polygon"
            required="true"
            defaultValue="#000000"
            size="7" />
          <char
            name="fontFillStart"
            label="Font Fill Start"
            description="The start fill color for a font"
            required="true"
            defaultValue="#ffffff"
            size="7" />
          <char
            name="fontFillEnd"
            label="Font Fill End"
            description="The end fill color for a font"
            required="true"
            defaultValue="#000000"
            size="7" />
          <char
            name="labelHaloFillStart"
            label="Label Halo Fill Start"
            description="The start fill color for a label halo"
            required="true"
            defaultValue="#ffffff"
            size="7" />
          <char
            name="labelHaloFillEnd"
            label="Label Halo Fill End"
            description="The end fill color for a label halo"
            required="true"
            defaultValue="#000000"
            size="7" />
        </attributes>
      </mdBusiness>        
    
    </create>
    <update>

     <mdController
       name="dss.vector.solutions.query.LayerController">
       <create>
         <mdAction
           name="requestGenerate"
           label="Request Generate"
           description="The initial request to generate categories."
           isPost="true">
           <mdParameter
             name="layer"
             label="Layer"
             order="0"
             type="dss.vector.solutions.query.Layer"/>
           <mdParameter
             name="factoryType"
             label="Factory Type"
             order="1"
             type="java.lang.String"/>
         </mdAction> 
         <mdAction
           name="generateCategories"
           label="Generate Categories"
           isPost="true"
           description="Generates the HTML for all categories automatically created.">
           <mdParameter
             name="categoryGen"
             label="Category Gen"
             order="0"
             type="dss.vector.solutions.query.CategoryGen"/>
         </mdAction>
       </create>
     </mdController>

     <mdBusiness
        name="dss.vector.solutions.query.Layer">
          <create>
            <mdMethod
              name="generateCategories"
              label="Generate Categories"
              description="Returns AbstractCategories based on exact and range calculations for the Layer."
              static="false"
              returnType="dss.vector.solutions.query.AbstractCategory[]">
               <mdParameter
                 name="categoryGen"
                 label="CategoryGen"
                 description="Object used to contain info for category generation."
                 order="0"
                 type="dss.vector.solutions.query.CategoryGen"/>
            </mdMethod>
          </create>
      </mdBusiness>
      
      <mdUtil
        name="dss.vector.solutions.query.AbstractCategoryFactory">
        <create>
          <mdMethod
            name="getSubclassInfo"
            label="Get Subclass Information"
            description="Fetches the class name and display labels for all children of this class."
            static="true"
            returnType="com.terraframe.mojo.query.ValueQuery">
          </mdMethod>
        </create>
      </mdUtil>    

      <mdUtil
        name="dss.vector.solutions.query.AbstractCategoryFactory">
        <create>
          <mdMethod
            name="getAllRequiredAttributes"
            label="Get All Required Attributes"
            description="Returns a JSON object mapping AbstractCategoryFactory subclasses to their required attributes."
            static="true"
            returnType="java.lang.String">
          </mdMethod> 
        </create>
      </mdUtil>
    
    </update>
  </doIt>
  <undoIt>
    <delete>
    
      <object
        key="dss.vector.solutions.query.CategoryGen"
        type="com.terraframe.mojo.system.metadata.MdBusiness"/>
    
      <object
        key="dss.vector.solutions.query.LayerController.requestGenerate"
        type="com.terraframe.mojo.system.metadata.MdAction" />

      <object
        key="dss.vector.solutions.query.LayerController.generateCategories"
        type="com.terraframe.mojo.system.metadata.MdAction" />
            
      <object
        key="dss.vector.solutions.query.Layer.generateCategories"
        type="com.terraframe.mojo.system.metadata.MdMethod" />    

      <object
        key="dss.vector.solutions.query.AbstractCategoryFactory.getSubclassInfo"
        type="com.terraframe.mojo.system.metadata.MdMethod" />    

      <object
        key="dss.vector.solutions.query.AbstractCategoryFactory.getAllRequiredAttributes"
        type="com.terraframe.mojo.system.metadata.MdMethod" />    
    
    </delete>
  </undoIt>
</version>