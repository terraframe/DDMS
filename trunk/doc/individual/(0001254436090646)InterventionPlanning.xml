<version
  xsi:noNamespaceSchemaLocation="../../profiles/version_gis.xsd"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <doIt>
    <create>
      <object
        type="dss.vector.solutions.Property"
        key="sprayedUnitsPerDay">
        <attribute
          name="propertyName"
          value="sprayedUnitsPerDay" />
        <attribute
          name="displayLabel"
          value="number of units to be sprayed by operator by day" />
        <attribute
          name="propertyPackage"
          value="dss.vector.solutions.irs.Standards" />
        <attribute
          name="propertyValue"
          value="1" />
        <attribute
          name="propertyType"
          value="Integer" />
        <attribute
          name="propertyValidator"
          value="^[1-9][0-9]*$" />
        <attribute
          name="validValues"
          value="5" />
        <attribute
          name="description"
          value="number of units to be sprayed by operator by day" />
      </object>

      <mdView
        name="dss.vector.solutions.irs.InterventionPlanningView"
        label="Intervention Planning"
        isAbstract="true"
        extendable="true">
        <attributes>
          <reference
            name="geoEntity"
            label="Geo Entity"
            type="dss.vector.solutions.geo.generated.GeoEntity"
            required="true" />
          <reference
            name="season"
            label="Season"
            type="dss.vector.solutions.general.MalariaSeason"
            required="true" />
          <char
            name="entityLabel"
            label="Geo Entity"
            size="255"
            required="true" />
          <integer
            name="targets"
            label="Targets"
            required="true"
            rejectNegative="true" />
        </attributes>
      </mdView>

      <mdView
        name="dss.vector.solutions.irs.TimeInterventionPlanningView"
        label="Time Intervention Planning"
        extends="dss.vector.solutions.irs.InterventionPlanningView">
        <attributes>
          <integer
            name="operators"
            label="Available Operators"
            required="true"
            rejectNegative="true" />
          <integer
            name="requiredDays"
            label="Required amount of days"
            rejectNegative="true" />
        </attributes>
        <mdMethod
          name="getViews"
          returnType="dss.vector.solutions.irs.TimeInterventionPlanningView[]"
          label="Get View"
          static="true">
          <mdParameter
            name="geoId"
            label="Geo Id"
            order="0"
            type="java.lang.String" />
          <mdParameter
            name="season"
            label="Malaria Season"
            order="1"
            type="dss.vector.solutions.general.MalariaSeason" />
        </mdMethod>
        <mdMethod
          name="calculateDefault"
          returnType="dss.vector.solutions.irs.TimeInterventionPlanningView[]"
          label="Calculate Default"
          static="true">
          <mdParameter
            name="views"
            order="0"
            label="Views"
            type="dss.vector.solutions.irs.TimeInterventionPlanningView[]" />
        </mdMethod>
        <mdMethod
          name="calculate"
          returnType="dss.vector.solutions.irs.TimeInterventionPlanningView[]"
          label="Calculate"
          static="true">
          <mdParameter
            name="views"
            order="0"
            label="Views"
            type="dss.vector.solutions.irs.TimeInterventionPlanningView[]" />
          <mdParameter
            name="unitsPerDay"
            order="1"
            label="Units Per Day"
            type="java.lang.Integer" />
        </mdMethod>
      </mdView>

      <mdView
        name="dss.vector.solutions.irs.InsecticideInterventionPlanningView"
        label="Insecticide Intervention Planning"
        extends="dss.vector.solutions.irs.InterventionPlanningView">
        <attributes>
          <double
            name="requiredInsecticide"
            label="Required amount of insecticide"
            rejectNegative="true"
            length="20"
            decimal="2" />
        </attributes>
        <mdMethod
          name="getViews"
          returnType="dss.vector.solutions.irs.InsecticideInterventionPlanningView[]"
          label="Get View"
          static="true">
          <mdParameter
            name="geoId"
            label="Geo Id"
            order="0"
            type="java.lang.String" />
          <mdParameter
            name="season"
            label="Malaria Season"
            order="1"
            type="dss.vector.solutions.general.MalariaSeason" />
        </mdMethod>
        <mdMethod
          name="calculate"
          returnType="dss.vector.solutions.irs.InsecticideInterventionPlanningView[]"
          label="Calculate"
          static="true">
          <mdParameter
            name="views"
            order="0"
            label="Views"
            type="dss.vector.solutions.irs.InsecticideInterventionPlanningView[]" />
          <mdParameter
            name="configurationId"
            order="1"
            label="Configuration"
            type="java.lang.String" />
        </mdMethod>
      </mdView>

      <mdView
        name="dss.vector.solutions.irs.OperatorInterventionPlanningView"
        label="Operator Intervention Planning"
        extends="dss.vector.solutions.irs.InterventionPlanningView">
        <attributes>
          <integer
            name="numberofDays"
            label="Amount of spray days"
            rejectNegative="true" />
          <integer
            name="unitsPerDay"
            label="Number of units per operator per day (avg)"
            rejectNegative="true" />
          <integer
            name="requiredOperators"
            label="Required amount of operators"
            rejectNegative="true" />
        </attributes>
        <mdMethod
          name="getViews"
          returnType="dss.vector.solutions.irs.OperatorInterventionPlanningView[]"
          label="Get View"
          static="true">
          <mdParameter
            name="geoId"
            label="Geo Id"
            order="0"
            type="java.lang.String" />
          <mdParameter
            name="season"
            label="Malaria Season"
            order="1"
            type="dss.vector.solutions.general.MalariaSeason" />
        </mdMethod>
        <mdMethod
          name="calculate"
          returnType="dss.vector.solutions.irs.OperatorInterventionPlanningView[]"
          label="Calculate"
          static="true">
          <mdParameter
            name="views"
            order="0"
            label="Views"
            type="dss.vector.solutions.irs.OperatorInterventionPlanningView[]" />
        </mdMethod>
      </mdView>

      <mdController
        name="dss.vector.solutions.irs.InterventionPlanningController"
        label="Time Intervention Planning View Controller">
        <mdAction
          name="searchForTimePlanning"
          isPost="true"
          isQuery="false">
          <mdParameter
            name="geoId"
            label="Geo Id"
            order="0"
            type="java.lang.String" />
          <mdParameter
            name="season"
            label="Malaria Season"
            order="1"
            type="dss.vector.solutions.general.MalariaSeason" />
        </mdAction>
        <mdAction
          name="searchForInsceticidePlanning"
          isPost="true"
          isQuery="false">
          <mdParameter
            name="geoId"
            label="Geo Id"
            order="0"
            type="java.lang.String" />
          <mdParameter
            name="season"
            label="Malaria Season"
            order="1"
            type="dss.vector.solutions.general.MalariaSeason" />
        </mdAction>
        <mdAction
          name="searchForOperatorPlanning"
          isPost="true"
          isQuery="false">
          <mdParameter
            name="geoId"
            label="Geo Id"
            order="0"
            type="java.lang.String" />
          <mdParameter
            name="season"
            label="Malaria Season"
            order="1"
            type="dss.vector.solutions.general.MalariaSeason" />
        </mdAction>
        <mdAction
          name="search"
          isPost="false"
          label="Search">
          <mdParameter
            name="option"
            label="Option"
            order="0"
            type="java.lang.String" />
        </mdAction>
        <mdAction
          name="setSprayedUnitsPerDay"
          label="Set Sprayed Units Per Day"
          isPost="true"
          isQuery="false">
          <mdParameter
            name="unitsPerDay"
            label="Units Per Day"
            order="0"
            type="java.lang.Integer" />
        </mdAction>
      </mdController>
      <mdProblem
        name="dss.vector.solutions.irs.RequiredOperatorsProblem"
        label="Required Operators Problem"
        description="The required operators needs a value"
        extends="dss.vector.solutions.NotificationProblem">
        <attributes>
          <char
            name="entityLabel"
            label="Entity Label"
            size="255" />
        </attributes>
      </mdProblem>
      <mdProblem
        name="dss.vector.solutions.irs.RequiredTargetsProblem"
        label="Required Targets Problem"
        description="Number of targets needs a value"
        extends="dss.vector.solutions.NotificationProblem">
        <attributes>
          <char
            name="entityLabel"
            label="Entity Label"
            size="255" />
        </attributes>
      </mdProblem>
      <mdProblem
        name="dss.vector.solutions.irs.EmptyValueProblem"
        label="Empty Value Problem"
        description="An attribute of some row needs a value"
        extends="dss.vector.solutions.NotificationProblem">
        <attributes>
          <char
            name="entityLabel"
            label="Entity Label"
            size="255" />
        </attributes>
      </mdProblem>
      <mdProblem
        name="dss.vector.solutions.intervention.monitor.RequiredServiceDateProblem"
        label="Required Service Date"
        description="Service date is required" />
      <mdProblem
        name="dss.vector.solutions.intervention.monitor.RequiredPatientProblem"
        label="Required Patient"
        description="Patient is required" />
      <mdException
        name="dss.vector.solutions.irs.EmptyConfigurationException"
        label="Empty Configuration Exception"
        description="Configuration needs a value" />
      <mdException
        name="dss.vector.solutions.irs.UnitsPerDayException"
        label="Units per Day Exception"
        description="Units per Day must be a postivie integer" />
    </create>
    <update>
      <mdBusiness
        name="dss.vector.solutions.Property">
        <create>
          <mdMethod
            name="setUnitsPerDay"
            label="Set Units Per Day"
            static="true"
            returnType="void">
            <mdParameter
              name="unitsPerDay"
              label="Units Per Day"
              order="0"
              type="java.lang.Integer" />
          </mdMethod>
        </create>
      </mdBusiness>
      <mdView
        name="dss.vector.solutions.irs.InsecticideNozzleView">
        <create>
          <attributes>
            <char
              name="brandLabel"
              label="Brand Label"
              size="255" />
            <char
              name="nozzleLabel"
              label="Nozzle Label"
              size="255" />
          </attributes>
        </create>
      </mdView>
    </update>
    <permissions>
      <method
        methodName="setUnitsPerDay"
        type="dss.vector.solutions.Property">
        <assignedRole
          roleName="Administrator" />
      </method>
      <role
        roleName="mdss.coordinator, mdss.operationalManager">
        <grant>
          <mdBusinessPermission
            type="dss.vector.solutions.Property">
            <mdMethodPermission
              methodName="setUnitsPerDay">
              <operation
                name="EXECUTE" />
            </mdMethodPermission>
          </mdBusinessPermission>
          <mdViewPermission
            type="dss.vector.solutions.irs.InterventionPlanningView">
            <operation
              name="CREATE" />
            <operation
              name="WRITE" />
            <operation
              name="WRITE_ALL_ATTRIBUTES" />
            <operation
              name="DELETE" />
          </mdViewPermission>
          <mdViewPermission
            type="dss.vector.solutions.irs.TimeInterventionPlanningView">
            <operation
              name="CREATE" />
            <operation
              name="WRITE" />
            <operation
              name="WRITE_ALL_ATTRIBUTES" />
            <operation
              name="DELETE" />
          </mdViewPermission>
          <mdViewPermission
            type="dss.vector.solutions.irs.InsecticideInterventionPlanningView">
            <operation
              name="CREATE" />
            <operation
              name="WRITE" />
            <operation
              name="WRITE_ALL_ATTRIBUTES" />
            <operation
              name="DELETE" />
          </mdViewPermission>
          <mdViewPermission
            type="dss.vector.solutions.irs.OperatorInterventionPlanningView">
            <operation
              name="CREATE" />
            <operation
              name="WRITE" />
            <operation
              name="WRITE_ALL_ATTRIBUTES" />
            <operation
              name="DELETE" />
          </mdViewPermission>
        </grant>
      </role>
      <role
        roleName="mdss.GUIVisibility">
        <grant>
          <mdViewPermission
            type="dss.vector.solutions.irs.InterventionPlanningView">
            <operation
              name="READ" />
            <operation
              name="READ_ALL_ATTRIBUTES" />
          </mdViewPermission>
          <mdViewPermission
            type="dss.vector.solutions.irs.TimeInterventionPlanningView">
            <operation
              name="READ" />
            <operation
              name="READ_ALL_ATTRIBUTES" />
          </mdViewPermission>
          <mdViewPermission
            type="dss.vector.solutions.irs.InsecticideInterventionPlanningView">
            <operation
              name="READ" />
            <operation
              name="READ_ALL_ATTRIBUTES" />
          </mdViewPermission>
          <mdViewPermission
            type="dss.vector.solutions.irs.OperatorInterventionPlanningView">
            <operation
              name="READ" />
            <operation
              name="READ_ALL_ATTRIBUTES" />
          </mdViewPermission>
          <mdViewPermission
            type="dss.vector.solutions.irs.InsecticideNozzleView">
            <operation
              name="CREATE" />
            <operation
              name="READ" />
            <operation
              name="READ_ALL_ATTRIBUTES" />
            <operation
              name="WRITE" />
            <operation
              name="WRITE_ALL_ATTRIBUTES" />
            <operation
              name="DELETE" />
          </mdViewPermission>
        </grant>
      </role>
    </permissions>
  </doIt>
  <undoIt>
    <delete>
      <object
        key="dss.vector.solutions.irs.InsecticideNozzleView.nozzleLabel"
        type="com.terraframe.mojo.system.metadata.MdAttribute" />
      <object
        key="dss.vector.solutions.irs.InsecticideNozzleView.brandLabel"
        type="com.terraframe.mojo.system.metadata.MdAttribute" />
      <object
        key="dss.vector.solutions.Property.setUnitsPerDay"
        type="com.terraframe.mojo.system.metadata.MdMethod" />
      <object
        key="dss.vector.solutions.irs.EmptyConfigurationException"
        type="com.terraframe.mojo.system.metadata.MdException" />
      <object
        key="dss.vector.solutions.irs.UnitsPerDayException"
        type="com.terraframe.mojo.system.metadata.MdException" />
      <object
        key="dss.vector.solutions.intervention.monitor.RequiredPatientProblem"
        type="com.terraframe.mojo.system.metadata.MdProblem" />
      <object
        key="dss.vector.solutions.intervention.monitor.RequiredServiceDateProblem"
        type="com.terraframe.mojo.system.metadata.MdProblem" />
      <object
        key="dss.vector.solutions.irs.EmptyValueProblem"
        type="com.terraframe.mojo.system.metadata.MdProblem" />
      <object
        key="dss.vector.solutions.irs.RequiredTargetsProblem"
        type="com.terraframe.mojo.system.metadata.MdProblem" />
      <object
        key="dss.vector.solutions.irs.RequiredOperatorsProblem"
        type="com.terraframe.mojo.system.metadata.MdProblem" />
      <object
        key="dss.vector.solutions.irs.InterventionPlanningView"
        type="com.terraframe.mojo.system.metadata.MdView" />
      <object
        key="dss.vector.solutions.irs.TimeInterventionPlanningView"
        type="com.terraframe.mojo.system.metadata.MdView" />
      <object
        key="dss.vector.solutions.irs.InsecticideInterventionPlanningView"
        type="com.terraframe.mojo.system.metadata.MdView" />
      <object
        key="dss.vector.solutions.irs.OperatorInterventionPlanningView"
        type="com.terraframe.mojo.system.metadata.MdView" />
      <object
        key="dss.vector.solutions.irs.InterventionPlanningController"
        type="com.terraframe.mojo.system.metadata.MdController" />
      <object
        type="dss.vector.solutions.Property"
        key="sprayedUnitsPerDay" />
    </delete>
  </undoIt>
</version>