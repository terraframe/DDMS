<version xsi:noNamespaceSchemaLocation="classpath:com/runwaysdk/resources/xsd/version.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <doIt>
    <update>
      <mdBusiness name="dss.vector.solutions.entomology.assay.AdultDiscriminatingDoseAssay">
        <attributes>
          <float name="mortality" label="Corrected mortality (%)" required="true" />
          <float name="controlTestMortality" label="Control mortality (%)" required="true" />
        </attributes>
        <create>
          <attributes>
            <integer name="controlTestNumberExposed" label="Control number" rejectNegative="true" required="false" />
            <integer name="controlTestNumberDead" label="Control number dead" rejectNegative="true" required="false" />
            <float name="correctedQuantityDead" label="Corrected number dead" rejectNegative="true" length="32" decimal="2" required="true" />
            <float name="observedMortality" label="Observed Mortality (%)" length="5" decimal="2" description="Observed mortality" required="true" />
            <char name="rootAssay" label="Root assay" size="64" />
          </attributes>
          <mdMethod name="cloneAssay" static="false" returnType="dss.vector.solutions.entomology.assay.AdultDiscriminatingDoseAssay" label="Clone assay" />
          <mdMethod name="hasReplicates" static="false" returnType="java.lang.Boolean" label="Has replicates" />
        </create>
      </mdBusiness>
      <mdController name="dss.vector.solutions.entomology.assay.AdultDiscriminatingDoseAssayController">
        <create>
          <mdAction name="cloneAssay" isPost="true" label="Clone assay" isQuery="false">
            <mdParameter name="id" label="id" order="0" type="java.lang.String" />
          </mdAction>
        </create>
      </mdController>
      <mdView
        name="dss.vector.solutions.export.entomology.assay.AdultDiscriminatingDoseAssayExcelView">
        <create>
          <attributes>
            <virtual concrete="controlTestNumberExposed"
              type="dss.vector.solutions.entomology.assay.AdultDiscriminatingDoseAssay" />
            <virtual concrete="controlTestNumberDead"
              type="dss.vector.solutions.entomology.assay.AdultDiscriminatingDoseAssay" />
          </attributes>
        </create>
      </mdView>      
    </update>
    <create>
      <mdProblem
         name="dss.vector.solutions.entomology.assay.InvalidControlQuantityDeadProblem"
         label="Invalid control quantity dead"
         extends="dss.vector.solutions.NotificationProblem"
         message="Control number dead [{quantityDead}] cannot exceed control number [{quantityTested}].">         
        <attributes>
          <integer name="quantityDead" label="Number Dead" description="Quantity Dead" required="true" />
          <integer name="quantityTested" label="Number Exposed" description="Quantity Tested" required="true" />
        </attributes>
      </mdProblem>    
    </create>
    <delete>
      <object key="dss.vector.solutions.export.entomology.assay.AdultDiscriminatingDoseAssayExcelView.controlTestMortality" type="com.runwaysdk.system.metadata.MdAttribute" />    
    </delete>
  </doIt>
  <undoIt>
    <delete>
      <object key="dss.vector.solutions.entomology.assay.InvalidControlQuantityDeadProblem" type="com.runwaysdk.system.metadata.MdProblem" />
      <object key="dss.vector.solutions.export.entomology.assay.AdultDiscriminatingDoseAssayExcelView.controlTestNumberExposed" type="com.runwaysdk.system.metadata.MdAttribute" />
      <object key="dss.vector.solutions.export.entomology.assay.AdultDiscriminatingDoseAssayExcelView.controlTestNumberDead" type="com.runwaysdk.system.metadata.MdAttribute" />
      <object key="dss.vector.solutions.entomology.assay.AdultDiscriminatingDoseAssayController.cloneAssay" type="com.runwaysdk.system.metadata.MdAction" />
      <object key="dss.vector.solutions.entomology.assay.AdultDiscriminatingDoseAssay.hasReplicates" type="com.runwaysdk.system.metadata.MdMethod" />
      <object key="dss.vector.solutions.entomology.assay.AdultDiscriminatingDoseAssay.cloneAssay" type="com.runwaysdk.system.metadata.MdMethod" />
      <object key="dss.vector.solutions.entomology.assay.AdultDiscriminatingDoseAssay.observedMortality" type="com.runwaysdk.system.metadata.MdAttribute" />
      <object key="dss.vector.solutions.entomology.assay.AdultDiscriminatingDoseAssay.correctedQuantityDead" type="com.runwaysdk.system.metadata.MdAttribute" />
      <object key="dss.vector.solutions.entomology.assay.AdultDiscriminatingDoseAssay.controlTestNumberExposed" type="com.runwaysdk.system.metadata.MdAttribute" />
      <object key="dss.vector.solutions.entomology.assay.AdultDiscriminatingDoseAssay.controlTestNumberDead" type="com.runwaysdk.system.metadata.MdAttribute" />
      <object key="dss.vector.solutions.entomology.assay.AdultDiscriminatingDoseAssay.rootAssay" type="com.runwaysdk.system.metadata.MdAttribute" />
    </delete>
  </undoIt>
</version>