<version
  xsi:noNamespaceSchemaLocation="../../profiles/version_gis.xsd"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <doIt>
    <update>
      <mdBusiness
        name="dss.vector.solutions.irs.SprayTeam">
        <create>
          <attributes>
            <reference
              name="sprayZone"
              label="Spray Zone"
              description="This team's assigned Spray Zone"
              type="dss.vector.solutions.geo.generated.SprayZone" />
            <char
              name="teamId"
              label="Team Identifier"
              description="Human entered team identifier"
              size="32"
              required="true"
              indexType="unique index" />
          </attributes>
          <mdMethod
            name="create"
            label="Create New Spray Team"
            description="Creates a new Spray Team"
            static="false"
            returnType="void">
            <mdParameter
              name="geoId"
              label="Geo Id"
              description="Spray Zone Geo Id"
              order="0"
              type="java.lang.String" />
            <mdParameter
              name="leaderId"
              label="Leader Id"
              description="Spray Leader Id"
              order="1"
              type="java.lang.String" />
            <mdParameter
              name="operatorIds"
              label="Operator Ids"
              description="Spray Operator Ids"
              order="2"
              type="java.lang.String[]" />
          </mdMethod>
          <mdMethod
            name="edit"
            label="Create New Spray Team"
            description="Creates a new Spray Team"
            static="false"
            returnType="void">
            <mdParameter
              name="geoId"
              label="Geo Id"
              description="Spray Zone Geo Id"
              order="0"
              type="java.lang.String" />
            <mdParameter
              name="leaderId"
              label="Leader Id"
              description="Spray Leader Id"
              order="1"
              type="java.lang.String" />
            <mdParameter
              name="operatorIds"
              label="Operator Ids"
              description="Spray Operator Ids"
              order="2"
              type="java.lang.String[]" />
            <mdParameter
              name="removedIds"
              label="Removed Operator Ids"
              description="Ids of the Spray Operators being removed from this team"
              order="3"
              type="java.lang.String[]" />
          </mdMethod>
          <mdMethod
            name="getTeamMembers"
            label="Get Team Members"
            returnType="dss.vector.solutions.irs.TeamMember[]"
            static="false" />
          <mdMethod
            name="getTeamMemberViews"
            label="Get Team Members"
            returnType="dss.vector.solutions.irs.TeamMemberView[]"
            static="false" />
          <mdMethod
            name="findByLocation"
            label="Find by Location"
            static="true"
            returnType="dss.vector.solutions.irs.SprayTeam[]"
            description="Returns a list of all teams which are active in a given location">
            <mdParameter
              name="id"
              label="Geo Entity Id"
              order="0"
              type="java.lang.String" />
          </mdMethod>
        </create>
      </mdBusiness>
      <mdController
        name="dss.vector.solutions.irs.SprayTeamController">
        <create>
          <mdAction
            name="createAndAssign"
            label="Create and Assign"
            description="Creates a new Spray Team and assigns the leader and operators"
            isPost="true">
            <mdParameter
              name="team"
              label="Spray Team"
              description="New Spray Team"
              type="dss.vector.solutions.irs.SprayTeam"
              order="0" />
            <mdParameter
              name="geoId"
              label="Geo Id"
              description="Spray Zone Geo Id"
              type="java.lang.String"
              order="1" />
            <mdParameter
              name="leaderId"
              label="Spray Leader Id"
              description="Id of the assigned Spray Leader"
              type="java.lang.String"
              order="2" />
            <mdParameter
              name="operatorIds"
              label="Spray Operator Ids"
              description="Ids of the Spray Operators being reassigned to this team"
              type="java.lang.String[]"
              order="3" />
          </mdAction>
          <mdAction
            name="updateAssignments"
            label="Update Assignments"
            description="Updates a Spray Team and changes assignments"
            isPost="true">
            <mdParameter
              name="team"
              label="Spray Team"
              description="New Spray Team"
              type="dss.vector.solutions.irs.SprayTeam"
              order="0" />
            <mdParameter
              name="geoId"
              label="Geo Id"
              description="Spray Zone Geo Id"
              type="java.lang.String"
              order="1" />
            <mdParameter
              name="leaderId"
              label="Spray Leader Id"
              description="Id of the assigned Spray Leader"
              type="java.lang.String"
              order="2" />
            <mdParameter
              name="operatorIds"
              label="Spray Operator Ids"
              description="Ids of the Spray Operators being assigned to this team"
              type="java.lang.String[]"
              order="3" />
            <mdParameter
              name="removedIds"
              label="Removed Operator Ids"
              description="Ids of the Spray Operators being removed from this team"
              type="java.lang.String[]"
              order="4" />
          </mdAction>
        </create>
      </mdController>
    </update>
    <create>
      <mdRelationship
        name="dss.vector.solutions.irs.LeadTeam"
        label="Lead Team"
        description="Connects a Spray Leader to a Spray Team"
        generateController="false">
        <parent
          cardinality="1"
          name="dss.vector.solutions.irs.SprayTeam"
          method="LeadsTeam" />
        <child
          cardinality="1"
          name="dss.vector.solutions.irs.TeamMember"
          method="TeamLeader" />
      </mdRelationship>
      <mdView
        name="dss.vector.solutions.irs.TeamMemberView"
        label="Team Member">
        <attributes>
          <char
            name="actorId"
            label="Actor Id"
            size="255"
            required="true" />
          <char
            name="memberId"
            label="Member Id"
            description="Member ID"
            size="64" />
          <virtual
            name="firstName"
            concrete="firstName"
            type="dss.vector.solutions.Person" />
          <virtual
            name="lastName"
            concrete="lastName"
            type="dss.vector.solutions.Person" />
          <boolean
            name="isAssigned"
            label="Is Assigned"
            description="Is this Operator assigned to a team?"
            negativeLabel="No"
            positiveLabel="Yes" />
          <virtual
            name="teamId"
            concrete="teamId"
            type="dss.vector.solutions.irs.SprayTeam" />
        </attributes>
        <mdMethod
          name="getAllOperators"
          label="Get All"
          description="Gets all Spray Operators"
          static="true"
          returnType="dss.vector.solutions.irs.TeamMemberView[]">
        </mdMethod>
        <mdMethod
          name="getAllOperatorsForTeam"
          label="Get All OperatorViews For SprayTeam"
          description="Returns views of all operators assigned to the given team"
          static="true"
          returnType="dss.vector.solutions.irs.TeamMemberView[]">
          <mdParameter
            name="sprayTeam"
            label="Spray Team"
            description="Operators assigned to this team are returned"
            type="dss.vector.solutions.irs.SprayTeam"
            order="0" />
        </mdMethod>
      </mdView>
    </create>
  </doIt>
  <undoIt>
    <delete>
      <object
        key="dss.vector.solutions.irs.SprayTeam.teamId"
        type="com.runwaysdk.system.metadata.MdAttributeCharacter" />
      <object
        key="dss.vector.solutions.irs.SprayTeam.sprayZone"
        type="com.runwaysdk.system.metadata.MdAttributeReference" />
      <object
        key="dss.vector.solutions.irs.SprayTeam.create"
        type="com.runwaysdk.system.metadata.MdMethod" />
      <object
        key="dss.vector.solutions.irs.SprayTeam.edit"
        type="com.runwaysdk.system.metadata.MdMethod" />
      <object
        key="dss.vector.solutions.irs.SprayTeamController.createAndAssign"
        type="com.runwaysdk.system.metadata.MdAction" />
      <object
        key="dss.vector.solutions.irs.SprayTeamController.updateAssignments"
        type="com.runwaysdk.system.metadata.MdAction" />
      <object
        key="dss.vector.solutions.irs.LeadTeam"
        type="com.runwaysdk.system.metadata.MdRelationship" />
      <object
        key="dss.vector.solutions.irs.TeamMemberView"
        type="com.runwaysdk.system.metadata.MdView" />
    </delete>
  </undoIt>
</version>