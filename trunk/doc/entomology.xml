<TerraFrame
  xsi:noNamespaceSchemaLocation="file:/home/jsmethie/workspace/MDSS/profiles/datatype.xsd"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <create>
    <!-- DUMMY DEFITION FOR GEO ENTITIES -->
    <mdBusiness
      name="mdss.test.GeoEntity"
      label="Geo Entity">
      <attributes>
        <char
          name="geoId"
          label="Geo Id"
          required="true"
          indexType="unique index"
          size="6" />
        <char
          name="entityName"
          required="true"
          label="Geo Entity Name"
          size="255" />
        <enumeration
          name="terrain"
          label="Terrain"
          selectMultiple="false"
          required="true"
          type="mdss.test.Terrain" />
      </attributes>
      <mdMethod
        name="searchByGeoId"
        label="Search by GeoId"
        description="Search for a GeoEntity by Geo Id"
        static="true"
        returnType="mdss.test.GeoEntity">
        <mdParameter
          name="geoId"
          description="Geo Id of the Geo Entity"
          label="Geo Id"
          order="0"
          type="java.lang.String" />
      </mdMethod>
    </mdBusiness>

    <enumerationMaster
      name="mdss.test.TerrainMaster"
      label="Terrain Master" />

    <object
      id="SENTINEL_SITE"
      type="mdss.test.TerrainMaster">
      <valueAttribute
        name="enumName"
        value="SENTINEL_SITE" />
      <valueAttribute
        name="displayLabel"
        value="Sentinel Site" />
    </object>

    <object
      id="NON_SENTINEL_SITE"
      type="mdss.test.TerrainMaster">
      <valueAttribute
        name="enumName"
        value="NON_SENTINEL_SITE" />
      <valueAttribute
        name="displayLabel"
        value="Non Sentinel Site" />
    </object>

    <object
      id="FIXED_TRAP"
      type="mdss.test.TerrainMaster">
      <valueAttribute
        name="enumName"
        value="FIXED_TRAP" />
      <valueAttribute
        name="displayLabel"
        value="Fixed Trap" />
    </object>

    <object
      id="PERMANENT_WATER_BODY"
      type="mdss.test.TerrainMaster">
      <valueAttribute
        name="enumName"
        value="PERMANENT_WATER_BODY" />
      <valueAttribute
        name="displayLabel"
        value="Permanent Water Body" />
    </object>

    <mdEnumeration
      name="mdss.test.Terrain"
      type="mdss.test.TerrainMaster"
      label="Terrain">
      <includeAll />
    </mdEnumeration>

    <!-- DELETE WHEN REAL DEFINITION IS DONE -->

    <mdController
      name="com.terraframe.mojo.defaults.LoginController"
      label="Login Controller"
      description="Provides functionallity for logging in and logging out">
      <mdAction
        name="login"
        label="login"
        isPost="true">
        <mdParameter
          name="username"
          label="username"
          order="0"
          type="java.lang.String" />
        <mdParameter
          name="password"
          label="password"
          order="1"
          type="java.lang.String" />
      </mdAction>
      <mdAction
        name="logout"
        label="logout"
        isPost="false">
      </mdAction>
    </mdController>

    <mdBusiness
      removable="true"
      isAbstract="true"
      cacheAlgorithm="nothing"
      extendable="true"
      label="Abstract Mosquito Collection"
      description="This is a group of mosquitos of varing species that were collected via a certian techinque at a certian point in space and time"
      cacheSize="0"
      name="mdss.entomology.AbstractMosquitoCollection"
      generateController="false">
      <attributes>
        <date
          name="dateCollected"
          label="Date Collected"
          required="true" />
        <reference
          name="geoEntity"
          required="true"
          label="Geo Entity"
          type="mdss.test.GeoEntity" />
      </attributes>
      <mdMethod
        name="getMosquitos"
        label="Get Mosquitos"
        description="Returns a list of all mosquitos contained within this abstract mosquito collection"
        static="false"
        returnType="mdss.entomology.Mosquito">
      </mdMethod>
      <mdMethod
        name="getUninterestingSpecieGroups"
        label="Get Uninteresting Specie Groups"
        description="Returns a list of all uninteresting true specie groups which are contained within this abstract mosquito collection"
        static="false"
        returnType="mdss.entomology.UninterestingSpecieGroup">
      </mdMethod>
      <mdMethod
        name="getMorphologicalSpecieGroups"
        label="Get Morphological Specie Groups"
        description="Returns all morphological specie groups of this collection"
        returnType="mdss.entomology.MorphologicalSpecieGroupView[]"
        static="false">
      </mdMethod>
    </mdBusiness>

    <mdIndex
      type="mdss.entomology.AbstractMosquitoCollection"
      active="true"
      label="Abstract Mosquito Collection"
      unique="true"
      description="Uniquness constraint between the date and location of an abstract mosquito collection">
      <attribute
        name="dateCollected" />
      <attribute
        name="geoEntity" />
    </mdIndex>

    <mdBusiness
      name="mdss.entomology.MosquitoCollection"
      description="A mosqitio collection from a sentinal or non sental site, these are usualy collected only once from a given point, this is not for permenant traps"
      label="Mosquito Collection"
      extends="mdss.entomology.AbstractMosquitoCollection">
      <attributes>
        <reference
          name="collectionMethod"
          label="Collection Method"
          type="mdss.mo.CollectionMethod"
          required="true" />
      </attributes>
      <mdMethod
        name="searchByGeoEntityAndDate"
        label="Search By GeoEntity and Date"
        description="Searches for a Mosquito collection with the given geo entity and date"
        static="true"
        returnType="mdss.entomology.MosquitoCollection">
        <mdParameter
          name="geoEntity"
          label="Geo Entity"
          type="mdss.test.GeoEntity"
          order="0"
          description="GeoEntity" />
        <mdParameter
          name="collectionDate"
          label="Colllection Date"
          type="java.util.Date"
          order="1" />
      </mdMethod>
    </mdBusiness>

    <mdException
      name="mdss.entomology.InvalidMosquitoCollectionGeoEntityException"
      label="Invalid Mosquito Collection"
      description="Exception thrown when a Mosquito Collection's GeoEntity is not a (non)sentinel site">
      <attributes>
        <char
          name="geoId"
          label="Geo Id"
          size="6"
          required="true"
          description="Id of the GeoEntity" />
      </attributes>
    </mdException>

    <mdBusiness
      name="mdss.entomology.MosquitoCollectionPoint"
      label="Mosquito Collection Point"
      extends="mdss.entomology.AbstractMosquitoCollection"
      description="This a collection of mosquitos from a permanant trap or water body, the trap is checked on a routine basis">
      <mdMethod
        name="searchByGeoEntityAndDate"
        label="Search By GeoEntity and Date"
        description="Searches for a Mosquito collection with the given geo entity and date"
        static="true"
        returnType="mdss.entomology.MosquitoCollectionPoint">
        <mdParameter
          name="geoEntity"
          label="Geo Entity"
          type="mdss.test.GeoEntity"
          order="0"
          description="GeoEntity" />
        <mdParameter
          name="collectionDate"
          label="Colllection Date"
          type="java.util.Date"
          order="1" />
      </mdMethod>
    </mdBusiness>

    <mdException
      name="mdss.entomology.InvalidMosquitoCollectionPointGeoEntityException"
      label="Invalid Mosquito Collection"
      description="Exception thrown when a Mosquito Collection's GeoEntity is not a (non)sentinel site">
      <attributes>
        <char
          name="geoId"
          label="Geo Id"
          size="6"
          required="true"
          description="Id of the GeoEntity" />
      </attributes>
    </mdException>


    <mdBusiness
      name="mdss.entomology.MorphologicalSpecieGroup"
      label="Morphological Specie Group"
      description="This is a row that records the quantity of a species and its identification method.">
      <attributes>
        <integer
          name="quantity"
          label="Quantity"
          rejectNegative="true"
          required="true" />
        <reference
          name="specie"
          label="Specie"
          type="mdss.mo.Specie"
          required="false" />
        <reference
          name="identificationMethod"
          label="Identification Method"
          type="mdss.mo.IdentificationMethod"
          required="false" />
        <reference
          name="collection"
          label="MosquitoCollection"
          required="true"
          type="mdss.entomology.AbstractMosquitoCollection"
          immutable="true" />
      </attributes>
    </mdBusiness>

    <mdProblem
      name="mdss.entomology.InvalidMorphologicalQuantityProblem"
      label="Invalid Quantity"
      description="A MorphologicalSpecieGroup has a contextually invalid quantity (Equal to or less than 0)">
    </mdProblem>

    <mdProblem
      name="mdss.entomology.EmptyValueProblem"
      label="Empty Value Problem"
      description="A MorphologicalSpecieGroup is missing contextual required values">
      <attributes>
        <char
          name="attributeLabel"
          size="255"
          label="Attribute Label"
          required="true"
          description="Label of the attribute" />
      </attributes>
    </mdProblem>

    <mdProblem
      name="mdss.entomology.InvalidMorphologicalSpecieProblem"
      label="Invalid Morphological Specie Problem"
      description="A morphological specie group cannot have an identification method or specie if the quantity is zero">
      <attributes>
        <char
          name="attributeLabel"
          size="255"
          label="Attribute Label"
          required="true"
          description="Label of the attribute" />
      </attributes>
    </mdProblem>

    <mdView
      name="mdss.entomology.MorphologicalSpecieGroupView"
      label="Morphological Specie Group View"
      description="View for morphological specie groups">
      <attributes>
        <char
          name="specie"
          label="Specie"
          size="255" />
        <char
          name="identificationMethod"
          label="Identification Method"
          size="255" />
        <integer
          name="quantity"
          label="Quantity"
          required="true"
          rejectNegative="true" />
        <char
          name="collectionId"
          label="Collection Id"
          required="true"
          size="255" />
        <char
          name="groupId"
          label="Morphological Group Id"
          required="true"
          size="255" />
      </attributes>
      <mdMethod
        name="saveAll"
        label="Save All"
        returnType="void"
        static="true"
        description="Saves an array of MorphologicalSpecieGroupView in a single transaction">
        <mdParameter
          name="array"
          label="Array"
          description="Array of objects to save"
          order="0"
          type="mdss.entomology.MorphologicalSpecieGroupView[]" />
      </mdMethod>
    </mdView>

    <!--
      <mdTree name="mdss.entomology.CollectionSpecie" label="Collection Specie" description="A mapping between a mosquito collection and all the morphological specie groups it is comprised of."
      publish="true"> <parent cardinality="1" name="mdss.entomology.AbstractMosquitoCollection" method="AbstractMosqitoCollection" label="Abstract Mosqito Collection" /> <child cardinality="*"
      name="mdss.entomology.MorphologicalSpecieGroup" method="MorphologicalSpecieGroup" label="Morphological Specie Group" /> </mdTree>
    -->
    <mdBusiness
      name="mdss.entomology.TrueSpecieEntity"
      label="True Specie Collection"
      isAbstract="true"
      extendable="true">
      <attributes>
        <char
          name="collectionId"
          label="Collection Id"
          required="true"
          size="4"
          description="The id the entomologist gives to a sample when its true specie is determined." />
        <reference
          name="specie"
          label="Specie"
          type="mdss.mo.Specie"
          required="false"
          description="The true specie of the collection" />
        <reference
          name="identificationMethod"
          label="Identification Method"
          type="mdss.mo.IdentificationMethod"
          description="Method used to indentify the true specie collection" />
        <reference
          name="collection"
          label="Mosquito Collection"
          required="true"
          type="mdss.entomology.AbstractMosquitoCollection"
          description="References to the mosquito collection from which the true specie sample came." />
      </attributes>
    </mdBusiness>

    <mdIndex
      type="mdss.entomology.TrueSpecieEntity"
      active="true"
      label="True Specie Collection Index"
      unique="true"
      description="Uniquness constraint between the mosquito collection and true specie collection id">
      <attribute
        name="collection" />
      <attribute
        name="collectionId" />
    </mdIndex>

    <mdTree
      name="mdss.entomology.CollectionTrueSpecie"
      label="Collection True Specie"
      description="A mapping between a mosquito collection and all the true specie entities it is comprised of."
      publish="true">
      <parent
        cardinality="1"
        name="mdss.entomology.AbstractMosquitoCollection"
        method="AbstractMosqitoCollection"
        label="Abstract Mosqito Collection" />
      <child
        cardinality="*"
        name="mdss.entomology.TrueSpecieEntity"
        method="TrueSpecieCollection"
        label="True Specie Collection" />
    </mdTree>

    <mdBusiness
      name="mdss.entomology.UninterestingSpecieGroup"
      label="Uninteresting Specie"
      extends="mdss.entomology.TrueSpecieEntity">
      <attributes>
        <integer
          name="quanity"
          label="Quanity"
          rejectNegative="true"
          rejectZero="true"
          required="true" />
      </attributes>
    </mdBusiness>

    <mdBusiness
      name="mdss.entomology.Mosquito"
      label="Mosquito"
      extends="mdss.entomology.TrueSpecieEntity">
      <attributes>
        <date
          name="testDate"
          label="Test Date"
          required="true"
          description="The date the tests were performed on the misquito" />
        <boolean
          name="isofemale"
          label="Isofemale"
          required="true"
          default_value="false"
          description="Flag denoting if this mosquito is from the iso-female line" />
        <enumeration
          name="sex"
          label="Sex"
          required="true"
          description="The sex of the mosquito"
          selectMultiple="false"
          type="mdss.entomology.Sex" />
        <reference
          name="generation"
          label="Generation"
          required="true"
          description="The generation of the mosquito"
          type="mdss.mo.Generation" />
      </attributes>
    </mdBusiness>

    <enumerationMaster
      name="mdss.entomology.SexMaster"
      label="Sex Master"
      description="Master list of all possible mosquito sexes" />

    <object
      id="MALE"
      type="mdss.entomology.SexMaster">
      <valueAttribute
        name="enumName"
        value="MALE" />
      <valueAttribute
        name="displayLabel"
        value="Male" />
    </object>

    <object
      id="FEMALE"
      type="mdss.entomology.SexMaster">
      <valueAttribute
        name="enumName"
        value="FEMALE" />
      <valueAttribute
        name="displayLabel"
        value="Female" />
    </object>

    <object
      id="MIXED"
      type="mdss.entomology.SexMaster">
      <valueAttribute
        name="enumName"
        value="MIXED" />
      <valueAttribute
        name="displayLabel"
        value="Mixed" />
    </object>

    <object
      id="UNKNOWN"
      type="mdss.entomology.SexMaster">
      <valueAttribute
        name="enumName"
        value="UNKNOWN" />
      <valueAttribute
        name="displayLabel"
        value="Unknown" />
    </object>

    <mdEnumeration
      name="mdss.entomology.Sex"
      type="mdss.entomology.SexMaster"
      label="Sex"
      description="List of all possible single mosquito sex options">
      <addEnumItem
        id="MALE" />
      <addEnumItem
        id="FEMALE" />
      <addEnumItem
        id="UNKNOWN" />
    </mdEnumeration>

    <mdEnumeration
      name="mdss.entomology.AssaySex"
      type="mdss.entomology.SexMaster"
      label="Sex"
      description="List of all possible mosquito assay sex options">
      <includeAll />
    </mdEnumeration>

    <!--
      ***************************************************** Start of MIRO enumerations. These enumerations will change onces the MIRO ontology has been sorted out. We have outstanding questions of
      wether or not we will use the MIRO ontology or just take the terms from the ontology and create our own enumerations *****************************************************
    -->

    <mdBusiness
      name="mdss.mo.AbstractTerm"
      label="MO Term"
      isAbstract="true"
      extendable="true">
      <attributes>
        <char
          name="termName"
          required="true"
          size="255"
          label="Term Name"
          description="The name of the MO Collection Method Term" />
        <char
          name="termId"
          required="true"
          size="50"
          label="Term Id"
          description="The MO or MIRO id"
          indexType="unique index" />
        <char
          name="definition"
          label="Definition"
          size="255"
          required="true"
          description="Description of the MO term" />
        <char
          name="oboNamespace"
          label="Namespace"
          required="false"
          description="OBO namespace"
          size="255" />
        <char
          name="inheritsTerm"
          label="Inherits Term"
          required="false"
          description="Id of the MO term this term inherits"
          size="50" />
        <char
          name="inheritsTermName"
          label="Inherits Term Name"
          required="false"
          description="Name of the MO term this term inherits"
          size="25" />
      </attributes>
    </mdBusiness>

    <mdBusiness
      name="mdss.mo.CollectionMethod"
      label="Collection Method"
      description="List of all possible collection methods"
      extends="mdss.mo.AbstractTerm">
      <mdMethod
        name="getAllTermNames"
        returnType="java.lang.String[]"
        label="Get All Term Names"
        static="true"
        description="Returns all term names of a MO subcatagory" />
    </mdBusiness>

    <mdBusiness
      name="mdss.mo.Generation"
      label="Generation Method"
      description="List of all possible MO generation"
      extends="mdss.mo.AbstractTerm">
      <mdMethod
        name="getAllTermNames"
        returnType="java.lang.String[]"
        label="Get All Term Names"
        static="true"
        description="Returns all term names of a MO subcatagory" />
    </mdBusiness>

    <mdBusiness
      name="mdss.mo.Specie"
      label="Specie Method"
      description="List of all possible MO species"
      extends="mdss.mo.AbstractTerm">
      <mdMethod
        name="getAllTermNames"
        returnType="java.lang.String[]"
        label="Get All Term Names"
        static="true"
        description="Returns all term names of a MO subcatagory" />
    </mdBusiness>

    <mdBusiness
      name="mdss.mo.IdentificationMethod"
      label="Identification Method"
      description="List of all possible MO specie identification methods"
      extends="mdss.mo.AbstractTerm">
      <mdMethod
        name="getAllTermNames"
        returnType="java.lang.String[]"
        label="Get All Term Names"
        static="true"
        description="Returns all term names of a MO subcatagory" />
    </mdBusiness>

    <!--
      **************************************************************
            End of MIRO definitions
      **************************************************************
    -->
  </create>
  <update>
    <mdController
      name="mdss.entomology.MosquitoCollectionController">
      <create>
        <mdAction
          name="searchByGeoEntityAndDate"
          label="Search By Geo Entity And Date"
          isPost="true"
          description="Searches for a single mosquito collection with the given GeoEntity and Collection Date">
          <mdParameter
            name="geoEntity"
            label="Geo Entity"
            order="0"
            type="mdss.test.GeoEntity"
            description="GeoEntity to search" />
          <mdParameter
            name="collectionDate"
            label="Collection Date"
            description="The date the mosquito collection was collected"
            order="1"
            type="java.util.Date" />
        </mdAction>
        <mdAction
          name="searchByGeoIdAndDate"
          label="Search By Geo Id And Date"
          isPost="true"
          description="Searches for a single mosquito collection with the given Geo Id and Collection Date">
          <mdParameter
            name="geoId"
            label="Geo Id"
            order="0"
            type="java.lang.String"
            description="GeoId to search" />
          <mdParameter
            name="collectionDate"
            label="Collection Date"
            description="The date the mosquito collection was collected"
            order="1"
            type="java.util.Date" />
        </mdAction>
      </create>
    </mdController>
  </update>

  <!--
    **********************************
      Adult Discriminating Dose Assay
    **********************************
   -->

  <create>
    <mdBusiness
      name="mdss.mo.Insecticide"
      label="Insecticide"
      description="List of all MO insecticides"
      extends="mdss.mo.AbstractTerm">
      <mdMethod
        name="getAllTermNames"
        returnType="java.lang.String[]"
        label="Get All Term Names"
        static="true"
        description="Returns all term names of a MO subcatagory" />

    </mdBusiness>

    <mdBusiness
      name="mdss.mo.AssayMethod"
      label="Assay Method"
      description="List of all assay methods"
      extends="mdss.mo.AbstractTerm">
      <mdMethod
        name="getAllTermNames"
        returnType="java.lang.String[]"
        label="Get All Term Names"
        static="true"
        description="Returns all term names of a MO subcatagory" />
    </mdBusiness>

    <mdStruct
      name="mdss.entomology.assay.AdultAgeRange"
      label="Age Range"
      description="Age range of mosquitos in an assay">
      <attributes>
        <integer
          name="startPoint"
          label="Beginning Age"
          rejectNegative="true"
          required="true"
          description="Starting age of the age range" />
        <integer
          name="endPoint"
          label="Ending Age"
          rejectNegative="true"
          required="true"
          description="Ending age of the age range" />
      </attributes>
    </mdStruct>

    <mdProblem
      name="mdss.entomology.assay.InvalidAgeProblem"
      label="Invalid Age Exception"
      description="A mosquito age must be between 0 and 20 for adult assays">
      <attributes>
        <integer
          name="age"
          label="Age"
          required="true" />
      </attributes>
    </mdProblem>

    <mdProblem
      name="mdss.entomology.assay.InvalidAgeRangeProblem"
      label="Invalid Age Range Exception"
      description="A valid age range must have a starting point equal to or less than the ending point">
      <attributes>
        <integer
          name="startPoint"
          label="Start Point"
          required="true" />
        <integer
          name="endPoint"
          label="End Point"
          required="true" />
      </attributes>
    </mdProblem>

    <mdBusiness
      name="mdss.entomology.assay.AbstractAssay"
      label="Abstract Assay"
      isAbstract="true"
      extendable="true"
      generateController="false"
      description="Abstract assay which can be performed on a collection of mosquitos">
      <attributes>
        <date
          name="testDate"
          label="Test Date"
          description="The date the test was performed" />
        <reference
          name="testMethod"
          label="Test Method"
          type="mdss.mo.AssayMethod" />
        <reference
          name="specie"
          label="Specie"
          type="mdss.mo.Specie"
          required="false" />
        <reference
          name="identificationMethod"
          label="Identification Method"
          type="mdss.mo.IdentificationMethod"
          required="false" />
        <boolean
          name="isofemale"
          label="Isofemale"
          required="true"
          default_value="false"
          description="Flag denoting if this mosquito is from the iso-female line" />
        <reference
          name="collection"
          label="Mosquito Collection"
          required="true"
          type="mdss.entomology.MosquitoCollection"
          immutable="true" />
        <enumeration
          name="sex"
          label="Sex"
          required="true"
          description="The sex of the tested mosquitos"
          selectMultiple="false"
          type="mdss.entomology.AssaySex" />
      </attributes>
    </mdBusiness>

    <mdBusiness
      name="mdss.entomology.assay.AdultAssay"
      label="Adult Assay"
      isAbstract="true"
      extendable="true"
      description="Abstract assay which can be performed on a group of adult mosquitos"
      generateController="false"
      extends="mdss.entomology.assay.AbstractAssay">
      <attributes>
        <struct
          name="ageRange"
          label="Age Range"
          required="false"
          description="The age range of the mosquitos tested"
          type="mdss.entomology.assay.AdultAgeRange" />
        <integer
          name="fed"
          label="Fed"
          description="Fed value (Only applicable when females are present)."
          rejectNegative="true"
          required="true"
          default_value="0" />
        <integer
          name="gravid"
          label="Gravid"
          description="Gravid value (Only applicable when females are present)"
          rejectNegative="true"
          required="true"
          default_value="0" />
        <integer
          name="exposureTime"
          label="Exposure Time"
          description="The exposure time in minutes"
          rejectNegative="true"
          rejectZero="true"
          default_value="60" />
        <integer
          name="quantityTested"
          label="Quantity Tested"
          rejectNegative="true"
          rejectZero="true"
          required="true"
          description="The total number mosquitos tested" />
        <reference
          name="insecticide"
          label="Insecticide"
          type="mdss.mo.Insecticide"
          required="true" />
        <integer
          name="amount"
          label="Amount"
          rejectZero="true"
          rejectNegative="true"
          required="true" />
        <char
          name="units"
          label="Units"
          size="255"
          required="true"
          default_value="%" />
        <char
          name="genericName"
          label="Generic Name"
          size="255"
          description="Generic name of the insecticide.  Only displayed when an 'Other' insecticide is used." />
        <reference
          name="generation"
          label="Generation"
          required="true"
          description="The generation of the mosquito"
          type="mdss.mo.Generation" />
      </attributes>
    </mdBusiness>

    <mdView
      name="mdss.entomology.assay.ADDATestIntervalView"
      label="Test Interval View"
      description="View for Adult Discriminating Dose Assay test intervals">
      <attributes>
        <char
          name="assayId"
          label="Adult Discriminating Dose Assay Id"
          required="true"
          size="255" />
        <char
          name="intervalId"
          label="Test Interval Id"
          required="true"
          size="255" />
        <integer
          name="period"
          label="Period"
          rejectNegative="true"
          required="true" />
        <integer
          name="knockedDown"
          rejectNegative="true"
          label="Knocked Down"
          required="true"
          default_value="0" />
      </attributes>
      <mdMethod
        name="saveAll"
        label="Save All"
        returnType="void"
        static="true"
        description="Saves an array of ADDATestIntervalViews in a single transaction">
        <mdParameter
          name="array"
          label="Array"
          description="Array of objects to save"
          order="0"
          type="mdss.entomology.assay.ADDATestIntervalView[]" />
      </mdMethod>
    </mdView>

    <mdBusiness
      name="mdss.entomology.assay.AdultDiscriminatingDoseAssay"
      label="Adult Discriminating Dose Assay"
      description="Discriminating dose assay which can be performed on a group of adult mosquitos"
      extends="mdss.entomology.assay.AdultAssay">
      <attributes>
        <integer
          name="holdingTime"
          label="Holding Time"
          required="true"
          rejectNegative="true"
          description="The amount of time the mosquitos were held after exposure" />
        <integer
          name="quantityDead"
          label="Quantity Dead"
          rejectNegative="true"
          required="true"
          description="The total number of mosquitos which died during the assay" />
        <float
          name="controlTestMortality"
          label="Control Test Mortality Rate"
          length="4"
          decimal="2"
          description="Mortality rate of the control test"
          required="false" />
        <integer
          name="intervalTime"
          label="Interval Time"
          rejectNegative="true"
          rejectZero="true"
          required="true"
          description="The interval time in minutes"
          default_value="10" />
      </attributes>
      <mdMethod
        name="getTestIntervals"
        label="Get Test Intervals"
        returnType="mdss.entomology.assay.ADDATestIntervalView[]"
        static="false"
        description="Returns a list of test intervals">
      </mdMethod>
      <mdMethod
        name="getKD50"
        label="Get KD50"
        returnType="java.lang.Integer"
        static="false"
        description="Returns the predicted KD50" />
      <mdMethod
        name="getKD95"
        label="Get KD95"
        returnType="java.lang.Integer"
        static="false"
        description="Returns the predicted KD95" />
    </mdBusiness>

    <mdBusiness
      name="mdss.entomology.assay.ADDATestInterval"
      label="Test Interval"
      description="A single test interval for an individual adult discriminating dose assay">
      <attributes>
        <reference
          name="assay"
          label="Adult Discriminating Dose Assay"
          required="true"
          type="mdss.entomology.assay.AdultDiscriminatingDoseAssay" />
        <integer
          name="period"
          label="Period"
          rejectNegative="true"
          required="true" />
        <integer
          name="knockedDown"
          rejectNegative="true"
          label="Knocked Down"
          required="true"
          default_value="0" />
      </attributes>
    </mdBusiness>

    <mdIndex
      type="mdss.entomology.assay.ADDATestInterval"
      active="true"
      unique="true"
      label="ADDA Test Interval Index"
      description="Uniqueness constraint between an assay and its interval period">
      <attribute
        name="assay" />
      <attribute
        name="period" />
    </mdIndex>
  </create>

  <create>
    <mdBusiness
      name="mdss.entomology.ResistantCutOff"
      label="Property"
      description="A global property of the MDSS system"
      extendable="false">
      <attributes>
        <integer
          name="aDDAR"
          label="Adult Diagnostic Dose Assay Resistant Limit"
          rejectNegative="true"
          required="true" />
        <integer
          name="aDDAS"
          label="Adult Diagnostic Dose Assay Potentially Resistant Limit"
          rejectNegative="true"
          required="true" />

        <integer
          name="lDDAR"
          label="Larvae Diagnostic Dose Assay Resistant Limit"
          rejectNegative="true"
          required="true" />
        <integer
          name="lDDAS"
          label="Larvae Diagnostic Dose Assay Potentially Resistant Limit"
          rejectNegative="true"
          required="true" />

        <integer
          name="aAKnockDownR"
          label="Adult Assay Knock Down for Resistant Limit"
          rejectNegative="true"
          required="true" />
        <integer
          name="aAKnockDownPR"
          label="Adult Assay Knock Down for Potentially Resistant Limit"
          rejectNegative="true"
          required="true" />

        <integer
          name="lAKnockDownR"
          label="Larvae Assay Knock Down for Resistant Lower Limit"
          rejectNegative="true"
          required="true" />
        <integer
          name="lAKnockDownPR"
          label="Larvae Assay Knock Down for Potentially Resistant Limit"
          rejectNegative="true"
          required="true" />
      </attributes>
      <mdMethod
        name="instance"
        label="Instance"
        static="true"
        returnType="mdss.entomology.ResistantCutOff"
        description="Returns the singleton instance of this class" />
    </mdBusiness>

    <object
      type="mdss.entomology.ResistantCutOff"
      id="RESISTANT_CUT_OFF">
      <valueAttribute
        name="aDDAR"
        value="95" />
      <valueAttribute
        name="aDDAS"
        value="98" />
      <valueAttribute
        name="lDDAR"
        value="95" />
      <valueAttribute
        name="lDDAS"
        value="98" />
      <valueAttribute
        name="aAKnockDownR"
        value="95" />
      <valueAttribute
        name="aAKnockDownPR"
        value="98" />
      <valueAttribute
        name="lAKnockDownR"
        value="95" />
      <valueAttribute
        name="lAKnockDownPR"
        value="98" />
    </object>
  </create>
</TerraFrame>