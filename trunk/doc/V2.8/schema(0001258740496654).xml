<!--
  Copyright (C) 2018 IVCC
  
  This program is free software: you can redistribute it and/or modify
  it under the terms of the GNU General Public License as published by
  the Free Software Foundation, either version 3 of the License, or
  (at your option) any later version.
  
  This program is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  GNU General Public License for more details.
  
  You should have received a copy of the GNU General Public License
  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-->
<version xsi:noNamespaceSchemaLocation="../../profiles/version_gis.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <doIt>
    <create>
    
      <mdBusiness
        name="dss.vector.solutions.query.DefaultSavedMap"
        isAbstract="false"
        label="Default Saved Query"
        extendable="false"
        description="Representation of a default saved map."
        extends="dss.vector.solutions.query.SavedMap"
        generateController="false" />    
    
    </create>
    <update>
    
     <mdBusiness name="dss.vector.solutions.MDSSUser">
       <create>
         <attributes>
           <reference
             name="defaultMap"
             label="Default Map"
             description="Default Map"
             required="false"
             type="dss.vector.solutions.query.DefaultSavedMap" />
         </attributes>
       </create>
     </mdBusiness>
    
     <mdBusiness name="dss.vector.solutions.query.SavedMap">
       <create>
        <mdMethod
          name="moveLayerOnMap"
          label="Move Layer On Map"
          static="false"
          returnType="void">
          <mdParameter
            name="layerId"
            label="Layer Id"
            order="0"
            type="java.lang.String" />
          <mdParameter
            name="layerPosition"
            label="Layer Position"
            order="1"
            type="java.lang.Integer" />
        </mdMethod>       
        <mdMethod
          name="addLayerToMap"
          label="Add Layer To Map"
          static="false"
          returnType="dss.vector.solutions.query.LayerView">
          <mdParameter
            name="savedSearchId"
            label="SavedSearch Id"
            order="0"
            type="java.lang.String" />
        </mdMethod>
        <mdMethod
          name="deleteLayerFromMap"
          label="Delete Layer From Map"
          static="false"
          returnType="void">
          <mdParameter
            name="layerId"
            order="0"
            label="Layer Id"
            type="java.lang.String"/>
        </mdMethod>
        <mdMethod
          name="getAllSavedMaps"
          label="Get All Saved Maps"
          description="Gets all non-default maps."
          static="true"
          returnType="dss.vector.solutions.query.SavedMapQuery">
        </mdMethod>
         <mdMethod
           name="loadDefaultMap"
           label="Load Default Map"
           description="Loads the default map for the current user"
           static="true"
           returnType="dss.vector.solutions.query.SavedMap">
           <mdParameter
             name="savedMap"
             label="Saved Map View"
             description="Saved Map View"
             order="0"
             type="dss.vector.solutions.query.SavedMap"/>
         </mdMethod>
        <mdMethod
          name="loadMap"
          label="Load Map"
          description="Loads a map with the given id."
          static="true"
          returnType="dss.vector.solutions.query.SavedMap">
          <mdParameter
            name="mapId"
            label="Map Id"
            order="0"
            type="java.lang.String" />
        </mdMethod>
      </create>
     </mdBusiness>    
    
      <mdView
       name="dss.vector.solutions.ontology.TermView">
       <create>
          <attributes>
            <virtual
             concrete="selectable"
             type="dss.vector.solutions.ontology.BrowserRoot"/>
          </attributes>
        </create>
      </mdView>

    <mdBusiness
      name="dss.vector.solutions.query.Layer" >
      <create>
        <attributes>
          <char
            name="layerName"
            label="Layer Name"
            size="50"
            required="true"/>
        </attributes>
      </create>
    </mdBusiness>

    <mdView
      name="dss.vector.solutions.query.LayerView" >
      <create>
        <attributes>
          <virtual
            concrete="layerName"
            type="dss.vector.solutions.query.Layer"
            required="true"/>
        </attributes>
      </create>
    </mdView>
      
    </update>
  </doIt>
  <undoIt>
    <delete></delete>
  </undoIt>
</version>
