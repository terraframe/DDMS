<!--
  Copyright (C) 2018 IVCC
  
  This program is free software: you can redistribute it and/or modify
  it under the terms of the GNU General Public License as published by
  the Free Software Foundation, either version 3 of the License, or
  (at your option) any later version.
  
  This program is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  GNU General Public License for more details.
  
  You should have received a copy of the GNU General Public License
  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-->
<version
	xsi:noNamespaceSchemaLocation="../../profiles/version_gis.xsd"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
	<doIt>
		<create>
			<mdView
				name="dss.vector.solutions.general.WeeklyThresholdView"
				label="Threshold Export View">
				<attributes>
					<char
						name="entityLabel"
						label="Entity Label"
						size="255"
						required="true" />
					<integer
						name="period"
						label="Epi Week" />
					<integer
						name="yearOfWeek"
						label="Year" />
					<double
						name="thresholdValue"
						label="Actual Threshold Value"
						length="12"
						decimal="2" />
					<char
						name="threshsoldType"
						label="Threshold Type"
						size="255" />
					<date
						name="thresholdDate"
						label="Date" />
				</attributes>
				<mdMethod
					name="exportHistory"
					label="Export History"
					returnType="java.io.InputStream"
					static="true" />
			</mdView>
		</create>
		<update>
			<mdBusiness
				name="dss.vector.solutions.intervention.monitor.IndividualInstance">
				<attributes>
					<date
						name="facilityVisit"
						label="Visit Date"
						required="true" />
				</attributes>
			</mdBusiness>
			<mdTree
				name="dss.vector.solutions.general.WeeklyThreshold"
				label="Weekly Threshold">
				<create>
					<attributes>
						<date
							name="firstFacilityNotification"
							label="First Facility Notification" />
						<date
							name="firstFacilityIdentification"
							column="firstFacilityIdent"
							label="First Facility Identification" />
						<date
							name="firstNotification"
							label="First Notification" />
						<date
							name="firstIdentification"
							label="First Identification" />
						<double
							name="actualNotification"
							label="Actual Notification"
							length="12"
							decimal="2" />
						<double
							name="actualIdentification"
							label="Actual Identification"
							length="12"
							decimal="2" />
						<double
							name="actualFacilityNotification"
							label="Actual Facility Notification"
							length="12"
							decimal="2" />
						<double
							name="actualFacilityIdentification"
							column="actualFacilityIdent"
							label="Actual Facility Identification"
							length="12"
							decimal="2" />
					</attributes>
				</create>
				<parent
					cardinality="*"
					name="dss.vector.solutions.general.ThresholdData"
					method="Thresholds" />
				<child
					cardinality="*"
					name="dss.vector.solutions.general.EpiWeek"
					method="EpiWeeks" />
			</mdTree>
			<mdController
				name="dss.vector.solutions.general.ThresholdDataController">
				<create>
					<mdAction
						name="exportHistory"
						label="Export History"
						isPost="false" />
				</create>
			</mdController>
		</update>
	</doIt>
	<undoIt>
		<delete>
			<object
				key="dss.vector.solutions.general.ThresholdDataController.exportHistory"
				type="com.runwaysdk.system.metadata.MdAction" />
			<object
				key="dss.vector.solutions.general.WeeklyThreshold.actualNotification"
				type="com.runwaysdk.system.metadata.MdAttribute" />
			<object
				key="dss.vector.solutions.general.WeeklyThreshold.actualIdentification"
				type="com.runwaysdk.system.metadata.MdAttribute" />
			<object
				key="dss.vector.solutions.general.WeeklyThreshold.actualFacilityNotification"
				type="com.runwaysdk.system.metadata.MdAttribute" />
			<object
				key="dss.vector.solutions.general.WeeklyThreshold.actualFacilityIdentification"
				type="com.runwaysdk.system.metadata.MdAttribute" />
			<object
				key="dss.vector.solutions.general.WeeklyThreshold.firstNotification"
				type="com.runwaysdk.system.metadata.MdAttribute" />
			<object
				key="dss.vector.solutions.general.WeeklyThreshold.firstIdentification"
				type="com.runwaysdk.system.metadata.MdAttribute" />
			<object
				key="dss.vector.solutions.general.WeeklyThreshold.firstFacilityIdentification"
				type="com.runwaysdk.system.metadata.MdAttribute" />
			<object
				key="dss.vector.solutions.general.WeeklyThreshold.firstFacilityNotification"
				type="com.runwaysdk.system.metadata.MdAttribute" />
			<object
				key="dss.vector.solutions.general.WeeklyThresholdView"
				type="com.runwaysdk.system.metadata.MdView" />
		</delete>
	</undoIt>
</version>
