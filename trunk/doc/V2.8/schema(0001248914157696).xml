<!--
  Copyright (C) 2018 IVCC
  
  This program is free software: you can redistribute it and/or modify
  it under the terms of the GNU General Public License as published by
  the Free Software Foundation, either version 3 of the License, or
  (at your option) any later version.
  
  This program is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  GNU General Public License for more details.
  
  You should have received a copy of the GNU General Public License
  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-->
<version xsi:noNamespaceSchemaLocation="../../profiles/version_gis.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <doIt>
    <create>
      <mdBusiness
        name="dss.vector.solutions.geo.GeoSynonym"
        label="Geo Entity Synonym"
        description="Synonym for a Geo Entity Name."
        isAbstract="false"
        extendable="true"
        generateController="false">
        <attributes>
          <char
            name="entityName"
            required="false"
            label="Geo Entity Name"
            indexType="non-unique index"
            size="255" />
        </attributes>
          <mdMethod
            name="createSynonym"
            label="Create Synonym"
            description="Creates a new synonym with the given name with the given geo id"
            static="true"
            returnType="void">
            <mdParameter
              name="entityName"
              label="Entity Name"
              description="Geo Entity Name"
              order="0"
              type="java.lang.String" />
            <mdParameter
              name="geoId"
              label="Geo Id"
              description="Geo Id"
              order="1"
              type="java.lang.String" />
          </mdMethod>
      </mdBusiness>

      <mdGraph
        name="dss.vector.solutions.geo.HasSynonym"
        label="Has Synonym"
        description="Relationship between geo entity names and synonyms"
        generateController="false">
        <parent
          cardinality="1"
          name="dss.vector.solutions.geo.generated.GeoEntity"
          method="GeoEntity" />
        <child
          cardinality="*"
          name="dss.vector.solutions.geo.GeoSynonym"
          method="Synonyms" />
      </mdGraph>
    </create>

    <update>
      <mdBusiness
        name="dss.vector.solutions.util.Facade">
        <create>
          <mdMethod
            name="importExcelFile"
            label="Import Excel File"
            description="Imports Excel Files that map to a given class or view"
            static="true"
            returnType="java.io.InputStream">
            <mdParameter
              name="inputStream"
              label="Input Stream"
              description="Input Stream containing the Excel file"
              order="0"
              type="java.io.InputStream" />
            <mdParameter
              name="type"
              label="Type"
              description="Type of the class that rows of this "
              order="1"
              type="java.lang.String" />
            <mdParameter
              name="listenerMethod"
              label="Listener Method"
              description="Name of the method that listens for events as rows are parsed"
              order="2"
              type="java.lang.String" />
            <mdParameter
              name="params"
              label="Parameters"
              description="Custom parameters"
              order="3"
              type="java.lang.String[]" />
          </mdMethod>
        </create>
      </mdBusiness>
    </update>
  </doIt>

  <undoIt>

    <delete>
      <object
        key="dss.vector.solutions.util.Facade.importExcelFile"
        type="com.runwaysdk.system.metadata.MdMethod"/>
    </delete>

    <delete>
      <object
        key="dss.vector.solutions.geo.GeoSynonym"
        type="com.runwaysdk.system.metadata.MdBusiness"/>
    </delete>

  </undoIt>
</version>
