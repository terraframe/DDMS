<!--
  Copyright (C) 2018 IVCC
  
  This program is free software: you can redistribute it and/or modify
  it under the terms of the GNU General Public License as published by
  the Free Software Foundation, either version 3 of the License, or
  (at your option) any later version.
  
  This program is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  GNU General Public License for more details.
  
  You should have received a copy of the GNU General Public License
  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-->
<version xsi:noNamespaceSchemaLocation="../../profiles/version_gis.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <doIt>
    <create></create>
    <update>
    
      <mdBusiness
        name="dss.vector.solutions.ontology.BrowserRoot">
        <create>
        <mdMethod
          name="getAttributeRoots"
          label="Get Attribute Roots"
          static="true"
          returnType="dss.vector.solutions.ontology.BrowserRootView[]">
            <mdParameter
              name="className"
              label="Class Name"
              order="0"
              type="java.lang.String" />
            <mdParameter
              name="attributeName"
              label="Attribute Name"
              order="1"
              type="java.lang.String" />
        </mdMethod>
        </create>
      </mdBusiness> 
    
     <mdController
       name="dss.vector.solutions.ontology.TermController">
       <create>
         <mdAction
           name="viewTree"
           label="View Tree"
           description="Views the Terms as a tree."
           returnType="void">
         </mdAction>
         <mdAction
           name="confirmDeleteTerm"
           isPost="true"
           label="Confirm Delete Term"
           description="Called to produce a dialog asking the user what action to take when deleteing a Term.">
           <mdParameter
             name="parentId"
             label="Parent Id"
             order="0"
             type="java.lang.String"/>
         </mdAction>
         <mdAction
           name="deleteTerm"
           label="Delete Term"
           description="Deletes the Term entirely"
           isPost="true" /> 
         <mdAction
           name="deleteRelationship"
           label="Delete Relationship"
           description="Deletes just the relationship with the current parent."
           isPost="true" /> 
         <mdAction
           name="confirmChangeParent"
           isPost="true"
           label="Confirm Parent Change"
           description="Called to produce a dialog asking the user what action to take when changing a parent">
           <mdParameter
             name="childId"
             label="Child Id"
             order="0"
             type="java.lang.String"/>
           <mdParameter
             name="parentId"
             label="Parent Id"
             order="1"
             type="java.lang.String"/>
         </mdAction>
         <mdAction
           name="doClone"
           label="Do Clone"
           description="Do Clone Operation"
           isPost="true" /> 
         <mdAction
           name="doNotClone"
           label="Do Not Clone"
           description="Do Not Clone Operation"
           isPost="true" /> 
       </create>
     </mdController>    

     <mdView name="dss.vector.solutions.ontology.TermView">
       <create>
       <attributes>
         <virtual
           name="termOntologyId"
           type="dss.vector.solutions.ontology.Term"
           concrete="termId"
           required="true" />
       </attributes>
       </create>
     </mdView>     
     
     <mdView name="dss.vector.solutions.ontology.BrowserRootView">
       <create>
       <attributes>
         <virtual
           name="termOntologyId"
           type="dss.vector.solutions.ontology.Term"
           concrete="termId"
           required="true" />
       </attributes>
       </create>
     </mdView>
     
     <mdBusiness
       name="dss.vector.solutions.ontology.Term">
       <create>
        <mdMethod
          name="confirmDeleteTerm"
          label="Confirm Delete Term"
          description="Throws exception with confirmation information to delete a Term with more than one parent."
          static="false"
          returnType="void">
        <mdParameter
          name="parentId"
          label="Parent Id"
          description="The id of the Term parent."
          order="0"
          type="java.lang.String" />
        </mdMethod>
        <mdMethod
          name="confirmChangeParent"
          label="Confirm Change Parent"
          description="Throws an exception with confirmation information to change a Term's parent."
          static="false"
          returnType="void">
          <mdParameter
            name="parentId"
            label="Parent Id"
            description="The id of the Term parent."
            order="0"
            type="java.lang.String" />
        </mdMethod>
         <mdMethod
           name="applyWithParent"
           label="Apply With Parent"
           description="Applies a Term to a given parent."
           static="false"
           returnType="dss.vector.solutions.ontology.TermView">
           <mdParameter
             name="parentTermId"
             label="Parent Term Id"
             description="The id of the Term that will be the parent"
             type="java.lang.String"
             order="0" />
           <mdParameter
             name="cloneOperation"
             label="Clone Operation"
             description="Denotes if this Term is being cloned to another parent."
             order="1"
             type="java.lang.Boolean" />
         </mdMethod>
         <mdMethod
           name="getDefaultRoots"
           label="Get Default Roots"
           returnType="dss.vector.solutions.ontology.TermViewQuery"
           static="true">
         </mdMethod>
       </create> 
       <create>
         <mdMethod
           name="getRoots"
           label="Get Roots"
           description="Gets the root terms for a given relationship type and ontology."
           returnType="dss.vector.solutions.ontology.TermViewQuery"
           static="true">
           <mdParameter
             name="relationshipType"
             label="Relationship Type"
             order="0"
             type="java.lang.String" />
         </mdMethod>
         <mdMethod
           name="searchTerms"
           label="Search Terms"
           description="Searches Terms by name and term id."
           static="true"
           returnType="dss.vector.solutions.ontology.TermViewQuery">
           <mdParameter
             name="searchValue"
             label="Search Value"
             order="0"
             type="java.lang.String" />
           <mdParameter
             name="parentTermId"
             label="Parent Term Id"
             order="1"
             type="java.lang.String" />
         </mdMethod>
         <mdMethod
           name="getByIds"
           label="Get By Ids"
           returnType="dss.vector.solutions.ontology.TermViewQuery"
           static="true">
           <mdParameter
             name="termIds"
             label="Term Ids" 
             order="0"
             type="java.lang.String[]"/>
         </mdMethod>
       </create>
     </mdBusiness>
    
    </update>
    
    <create>
    
      <mdException
        name="dss.vector.solutions.ontology.ConfirmParentChangeException"
        label="Confirmation Parent Change Exception"
        description="Exception thrown to confirm a Term parent change">
        <attributes>
          <char
            name="parentTerm"
            label="Parent Term"
            size="255"
            required="true"
            description="Formatted string of the parent Term." />
        </attributes>
      </mdException>  
        
      <mdException
        name="dss.vector.solutions.ontology.SameChildParentTermException"
        label="Same Child and Parent Term Exception"
        description="Thrown when a user tries to set a Term as its own parent.">
        <attributes>
          <char
            name="term"
            label="Term"
            size="255"
            required="true" />
        </attributes>
      </mdException>
    
      <mdException
        name="dss.vector.solutions.ontology.DuplicateParentException"
        label="Duplicate Parent Exception"
        description="Thrown when a child Term is added to the same parent twice">
        <attributes>
          <char
            name="childTerm"
            label="Child Term Name"
            size="100"
            required="true" /> 
          <char
            name="parentTerm"
            label="Parent Term Name"
            size="100"
            required="true" />
        </attributes>
      </mdException>

      <mdException
        name="dss.vector.solutions.ontology.ConfirmDeleteTermException"
        label="Confirm delete Term exception"
        description="Exception thrown when deleting a Term with more than one parent.">
        <attributes>
          <char
            name="term"
            label="Term"
            size="100"
            required="true" />
        </attributes>
      </mdException>            
        
    </create>
    
  </doIt>
  <undoIt>
    <delete></delete>
  </undoIt>
</version>
