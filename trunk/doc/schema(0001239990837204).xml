<version
  xsi:noNamespaceSchemaLocation="../profiles/version_gis.xsd"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <doIt>
    <update>
      <mdBusiness name="dss.vector.solutions.geo.generated.GeoEntity">
        <create>
          <mdMethod
            name="searchAndCollectByGeoId"
            label="Search by Geo Id"
            description="Returns a list of GeoEntityViews that match the search criteria."
            static="true"
            returnType="dss.vector.solutions.geo.GeoEntityView[]">
            <mdParameter
              name="geoId"
              label="Geo Id"
              order="0"
              type="java.lang.String" />
            <mdParameter
              name="filter"
              label="Type Filter"
              order="1"
              type="java.lang.String" />
          </mdMethod>
        </create>
      </mdBusiness>
    </update>

    <create>
     <mdView
       name="dss.vector.solutions.util.ReadableAttributeView"
       label="Readable Attribute View"
       description="View that indicates if an attribute is readable by a user / role"
       removable="true">
       <attributes>
          <boolean
            name="readPermission"
            label="Read Permission"
            description="Can the attribute be read by the given user / role?"
            required="true"/>
          <virtual
            name="attributeName"
            required="true"
            concrete="attributeName"
            type="com.terraframe.mojo.system.metadata.MdAttributeConcrete" />
          <char
            name="displayLabel"
            required="true"
            label="The Display Label"
            size="64"/>
        </attributes>
        <mdMethod
          name="setActorAttributes"
          label="Set Actor Attributes"
          returnType="void"
          static="true">
          <mdParameter
            name="universal"
            label="Universal"
            order="0"
            type="java.lang.String"/>
          <mdParameter
            name="actorName"
            label="Actor Name"
            order="1"
            type="java.lang.String"/>
          <mdParameter
            name="attributeViews"
            label="Role Name"
            order="2"
            type="dss.vector.solutions.util.ReadableAttributeView[]"/>
        </mdMethod>
        <mdMethod
          name="getActorAttributes"
          label="Get Actor Attributes"
          returnType="dss.vector.solutions.util.ReadableAttributeView[]"
          static="true">
          <mdParameter
            name="universal"
            label="Universal"
            order="0"
            type="java.lang.String"/>
          <mdParameter
            name="actorName"
            label="Actor Name"
            order="1"
            type="java.lang.String"/>
        </mdMethod>
      </mdView>
      <mdController
        name="dss.vector.solutions.util.ReadableAttributeController"
        label="Readbale Attribute Controller"
        description="Controller to process the addition / deletion of Read permissions on attributes">
        <mdAction
          name="getActor"
          label="Get Actor"
          description="Gets An Actor" />
        <mdAction
          name="getUniversal"
          label="Get Universal"
          description="Gets A Universal">
          <mdParameter
            name="actor"
            label="Actor"
            description="Actor (User or Role)"
            order="0"
            type="java.lang.String"/>
        </mdAction>
        <mdAction
          name="getAttributes"
          label="Get Attributes"
          description="Gets a list of attributes for a given Universal + Role">
          <mdParameter
            name="universal"
            label="Universal"
            description="Fully Qualified Universal"
            order="0"
            type="java.lang.String"/>
          <mdParameter
            name="actor"
            label="Actor"
            description="Actor (User or Role)"
            order="1"
            type="java.lang.String"/>
        </mdAction>
        <mdAction
          name="setAttributes"
          label="Set Attributes"
          description="Sets (or removes) read permission on the given attributes"
          isPost="true">
          <mdParameter
            name="universal"
            label="Universal"
            description="Fully Qualified Universal"
            order="0"
            type="java.lang.String"/>
          <mdParameter
            name="actor"
            label="Actor"
            description="Actor (User or Role)"
            order="1"
            type="java.lang.String"/>
          <mdParameter
            name="attributeViews"
            label="Attribute Views"
            description="Readable Attribute Views"
            order="2"
            type="dss.vector.solutions.util.ReadableAttributeView[]"/>
        </mdAction>
      </mdController>
      <object
        type="com.terraframe.mojo.system.Roles"
        id="entomologist">
        <valueAttribute
          name="roleName"
          value="entomologist" />
      </object>
      <object
        id="testEntomologist"
        type="com.terraframe.mojo.system.Users">
        <valueAttribute
          name="username"
          value="testEntomologist" />
        <valueAttribute
          name="password"
          value="bugsarecool" />
        <valueAttribute
          name="sessionLimit"
          value="10" />
      </object>
    </create>
    <permissions>
      <user userName="testEntomologist">
        <assignedRole roleName="entomologist"/>
      </user>
      <role roleName="entomologist">
        <mdBusinessPermission type="dss.vector.solutions.entomology.assay.EfficacyAssay">
          <operation name="CREATE"/>
          <operation name="READ"/>
          <operation name="WRITE"/>
          <operation name="READ_ALL"/>
          <operation name="WRITE_ALL"/>
        </mdBusinessPermission>
        <mdBusinessPermission type="dss.vector.solutions.entomology.assay.AbstractAssay">
          <operation name="READ"/>
          <operation name="READ_ALL"/>
        </mdBusinessPermission>
        <mdBusinessPermission type="dss.vector.solutions.general.Insecticide">
          <operation name="READ"/>
          <operation name="READ_ALL"/>
        </mdBusinessPermission>
        <mdBusinessPermission type="dss.vector.solutions.geo.generated.GeoEntity">
          <operation name="READ"/>
          <operation name="READ_ALL"/>
        </mdBusinessPermission>
        <mdBusinessPermission type="dss.vector.solutions.mo.Generation">
          <operation name="READ"/>
          <operation name="READ_ALL"/>
        </mdBusinessPermission>
        <mdBusinessPermission type="dss.vector.solutions.mo.IdentificationMethod">
          <operation name="READ"/>
          <operation name="READ_ALL"/>
        </mdBusinessPermission>
        <mdBusinessPermission type="dss.vector.solutions.mo.Specie">
          <operation name="READ"/>
          <operation name="READ_ALL"/>
        </mdBusinessPermission>
        <mdBusinessPermission type="dss.vector.solutions.mo.ResistanceMethodology">
          <operation name="READ"/>
          <operation name="READ_ALL"/>
        </mdBusinessPermission>
        <mdBusinessPermission type="dss.vector.solutions.entomology.SexMaster">
          <operation name="READ"/>
          <operation name="READ_ALL"/>
        </mdBusinessPermission>
        <mdBusinessPermission type="dss.vector.solutions.SurfacePositionMaster">
          <operation name="READ"/>
          <operation name="READ_ALL"/>
        </mdBusinessPermission>
      </role>
    </permissions>
  </doIt>
  <undoIt>
    <delete>
      <object
        key="dss.vector.solutions.util.ReadableAttributeView"
        type="com.terraframe.mojo.system.metadata.MdView" />
      <object
        key="dss.vector.solutions.util.ReadableAttributeController"
        type="com.terraframe.mojo.system.metadata.MdController" />
      <object
        key="com.terraframe.mojo.system.Roles.entomologist"
        type="com.terraframe.mojo.system.Roles" />
      <object
        key="com.terraframe.mojo.system.Users.testEntomologist"
        type="com.terraframe.mojo.system.Users" />
    </delete>
  </undoIt>
</version>