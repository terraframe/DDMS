
(function(){var getXY=YAHOO.util.Dom.getXY,Event=YAHOO.util.Event,_AS=Array.prototype.slice;function Slider(sElementId,sGroup,oThumb,sType){Slider.ANIM_AVAIL=(!YAHOO.lang.isUndefined(YAHOO.util.Anim));if(sElementId){this.init(sElementId,sGroup,true);this.initSlider(sType);this.initThumb(oThumb);}}
YAHOO.lang.augmentObject(Slider,{getHorizSlider:function(sBGElId,sHandleElId,iLeft,iRight,iTickSize){return new Slider(sBGElId,sBGElId,new YAHOO.widget.SliderThumb(sHandleElId,sBGElId,iLeft,iRight,0,0,iTickSize),"horiz");},getVertSlider:function(sBGElId,sHandleElId,iUp,iDown,iTickSize){return new Slider(sBGElId,sBGElId,new YAHOO.widget.SliderThumb(sHandleElId,sBGElId,0,0,iUp,iDown,iTickSize),"vert");},getSliderRegion:function(sBGElId,sHandleElId,iLeft,iRight,iUp,iDown,iTickSize){return new Slider(sBGElId,sBGElId,new YAHOO.widget.SliderThumb(sHandleElId,sBGElId,iLeft,iRight,iUp,iDown,iTickSize),"region");},SOURCE_UI_EVENT:1,SOURCE_SET_VALUE:2,SOURCE_KEY_EVENT:3,ANIM_AVAIL:false},true);YAHOO.extend(Slider,YAHOO.util.DragDrop,{_mouseDown:false,dragOnly:true,initSlider:function(sType){this.type=sType;this.logger=new YAHOO.widget.LogWriter(this.toString());this.createEvent("change",this);this.createEvent("slideStart",this);this.createEvent("slideEnd",this);this.isTarget=false;this.animate=Slider.ANIM_AVAIL;this.backgroundEnabled=true;this.tickPause=40;this.enableKeys=true;this.keyIncrement=20;this.moveComplete=true;this.animationDuration=0.2;this.SOURCE_UI_EVENT=1;this.SOURCE_SET_VALUE=2;this.valueChangeSource=0;this._silent=false;this.lastOffset=[0,0];},initThumb:function(t){var self=this;this.thumb=t;t.cacheBetweenDrags=true;if(t._isHoriz&&t.xTicks&&t.xTicks.length){this.tickPause=Math.round(360/t.xTicks.length);}else if(t.yTicks&&t.yTicks.length){this.tickPause=Math.round(360/t.yTicks.length);}
this.logger.log("tickPause: "+this.tickPause);t.onAvailable=function(){return self.setStartSliderState();};t.onMouseDown=function(){self._mouseDown=true;self.logger.log('thumb mousedown');return self.focus();};t.startDrag=function(){self.logger.log('thumb startDrag');self._slideStart();};t.onDrag=function(){self.logger.log('thumb drag');self.fireEvents(true);};t.onMouseUp=function(){self.thumbMouseUp();};},onAvailable:function(){this._bindKeyEvents();},_bindKeyEvents:function(){Event.on(this.id,"keydown",this.handleKeyDown,this,true);Event.on(this.id,"keypress",this.handleKeyPress,this,true);},handleKeyPress:function(e){if(this.enableKeys){var kc=Event.getCharCode(e);switch(kc){case 0x25:case 0x26:case 0x27:case 0x28:case 0x24:case 0x23:Event.preventDefault(e);break;default:}}},handleKeyDown:function(e){if(this.enableKeys){var kc=Event.getCharCode(e),t=this.thumb,h=this.getXValue(),v=this.getYValue(),changeValue=true;switch(kc){case 0x25:h-=this.keyIncrement;break;case 0x26:v-=this.keyIncrement;break;case 0x27:h+=this.keyIncrement;break;case 0x28:v+=this.keyIncrement;break;case 0x24:h=t.leftConstraint;v=t.topConstraint;break;case 0x23:h=t.rightConstraint;v=t.bottomConstraint;break;default:changeValue=false;}
if(changeValue){if(t._isRegion){this._setRegionValue(Slider.SOURCE_KEY_EVENT,h,v,true);}else{this._setValue(Slider.SOURCE_KEY_EVENT,(t._isHoriz?h:v),true);}
Event.stopEvent(e);}}},setStartSliderState:function(){this.logger.log("Fixing state");this.setThumbCenterPoint();this.baselinePos=getXY(this.getEl());this.thumb.startOffset=this.thumb.getOffsetFromParent(this.baselinePos);if(this.thumb._isRegion){if(this.deferredSetRegionValue){this._setRegionValue.apply(this,this.deferredSetRegionValue);this.deferredSetRegionValue=null;}else{this.setRegionValue(0,0,true,true,true);}}else{if(this.deferredSetValue){this._setValue.apply(this,this.deferredSetValue);this.deferredSetValue=null;}else{this.setValue(0,true,true,true);}}},setThumbCenterPoint:function(){var el=this.thumb.getEl();if(el){this.thumbCenterPoint={x:parseInt(el.offsetWidth/2,10),y:parseInt(el.offsetHeight/2,10)};}},lock:function(){this.logger.log("locking");this.thumb.lock();this.locked=true;},unlock:function(){this.logger.log("unlocking");this.thumb.unlock();this.locked=false;},thumbMouseUp:function(){this._mouseDown=false;this.logger.log("thumb mouseup");if(!this.isLocked()){this.endMove();}},onMouseUp:function(){this._mouseDown=false;this.logger.log("background mouseup");if(this.backgroundEnabled&&!this.isLocked()){this.endMove();}},getThumb:function(){return this.thumb;},focus:function(){this.logger.log("focus");this.valueChangeSource=Slider.SOURCE_UI_EVENT;var el=this.getEl();if(el.focus){try{el.focus();}catch(e){}}
this.verifyOffset();return!this.isLocked();},onChange:function(firstOffset,secondOffset){this.logger.log("onChange: "+firstOffset+", "+secondOffset);},onSlideStart:function(){this.logger.log("onSlideStart");},onSlideEnd:function(){this.logger.log("onSlideEnd");},getValue:function(){return this.thumb.getValue();},getXValue:function(){return this.thumb.getXValue();},getYValue:function(){return this.thumb.getYValue();},setValue:function(){var args=_AS.call(arguments);args.unshift(Slider.SOURCE_SET_VALUE);return this._setValue.apply(this,args);},_setValue:function(source,newOffset,skipAnim,force,silent){var t=this.thumb,newX,newY;if(!t.available){this.logger.log("defer setValue until after onAvailble");this.deferredSetValue=arguments;return false;}
if(this.isLocked()&&!force){this.logger.log("Can't set the value, the control is locked");return false;}
if(isNaN(newOffset)){this.logger.log("setValue, Illegal argument: "+newOffset);return false;}
if(t._isRegion){this.logger.log("Call to setValue for region Slider ignored. Use setRegionValue","warn");return false;}
this.logger.log("setValue "+newOffset);this._silent=silent;this.valueChangeSource=source||Slider.SOURCE_SET_VALUE;t.lastOffset=[newOffset,newOffset];this.verifyOffset();this._slideStart();if(t._isHoriz){newX=t.initPageX+newOffset+this.thumbCenterPoint.x;this.moveThumb(newX,t.initPageY,skipAnim);}else{newY=t.initPageY+newOffset+this.thumbCenterPoint.y;this.moveThumb(t.initPageX,newY,skipAnim);}
return true;},setRegionValue:function(){var args=_AS.call(arguments);args.unshift(Slider.SOURCE_SET_VALUE);return this._setRegionValue.apply(this,args);},_setRegionValue:function(source,newOffset,newOffset2,skipAnim,force,silent){var t=this.thumb,newX,newY;if(!t.available){this.logger.log("defer setRegionValue until after onAvailble");this.deferredSetRegionValue=arguments;return false;}
if(this.isLocked()&&!force){this.logger.log("Can't set the value, the control is locked");return false;}
if(isNaN(newOffset)){this.logger.log("setRegionValue, Illegal argument: "+newOffset);return false;}
if(!t._isRegion){this.logger.log("Call to setRegionValue for non-region Slider ignored. Use setValue","warn");return false;}
this._silent=silent;this.valueChangeSource=source||Slider.SOURCE_SET_VALUE;t.lastOffset=[newOffset,newOffset2];this.verifyOffset();this._slideStart();newX=t.initPageX+newOffset+this.thumbCenterPoint.x;newY=t.initPageY+newOffset2+this.thumbCenterPoint.y;this.moveThumb(newX,newY,skipAnim);return true;},verifyOffset:function(){var xy=getXY(this.getEl()),t=this.thumb;if(!this.thumbCenterPoint||!this.thumbCenterPoint.x){this.setThumbCenterPoint();}
if(xy){this.logger.log("newPos: "+xy);if(xy[0]!=this.baselinePos[0]||xy[1]!=this.baselinePos[1]){this.logger.log("background moved, resetting constraints");this.setInitPosition();this.baselinePos=xy;t.initPageX=this.initPageX+t.startOffset[0];t.initPageY=this.initPageY+t.startOffset[1];t.deltaSetXY=null;this.resetThumbConstraints();return false;}}
return true;},moveThumb:function(x,y,skipAnim,midMove){var t=this.thumb,self=this,p,_p,anim;if(!t.available){this.logger.log("thumb is not available yet, aborting move");return;}
this.logger.log("move thumb, x: "+x+", y: "+y);t.setDelta(this.thumbCenterPoint.x,this.thumbCenterPoint.y);_p=t.getTargetCoord(x,y);p=[Math.round(_p.x),Math.round(_p.y)];if(this.animate&&t._graduated&&!skipAnim){this.logger.log("graduated");this.lock();this.curCoord=getXY(this.thumb.getEl());this.curCoord=[Math.round(this.curCoord[0]),Math.round(this.curCoord[1])];setTimeout(function(){self.moveOneTick(p);},this.tickPause);}else if(this.animate&&Slider.ANIM_AVAIL&&!skipAnim){this.logger.log("animating to "+p);this.lock();anim=new YAHOO.util.Motion(t.id,{points:{to:p}},this.animationDuration,YAHOO.util.Easing.easeOut);anim.onComplete.subscribe(function(){self.logger.log("Animation completed _mouseDown:"+self._mouseDown);self.unlock();if(!self._mouseDown){self.endMove();}});anim.animate();}else{t.setDragElPos(x,y);if(!midMove&&!this._mouseDown){this.endMove();}}},_slideStart:function(){if(!this._sliding){if(!this._silent){this.onSlideStart();this.fireEvent("slideStart");}
this._sliding=true;this.moveComplete=false;}},_slideEnd:function(){if(this._sliding){var silent=this._silent;this._sliding=false;this.moveComplete=true;this._silent=false;if(!silent){this.onSlideEnd();this.fireEvent("slideEnd");}}},moveOneTick:function(finalCoord){var t=this.thumb,self=this,nextCoord=null,tmpX,tmpY;if(t._isRegion){nextCoord=this._getNextX(this.curCoord,finalCoord);tmpX=(nextCoord!==null)?nextCoord[0]:this.curCoord[0];nextCoord=this._getNextY(this.curCoord,finalCoord);tmpY=(nextCoord!==null)?nextCoord[1]:this.curCoord[1];nextCoord=tmpX!==this.curCoord[0]||tmpY!==this.curCoord[1]?[tmpX,tmpY]:null;}else if(t._isHoriz){nextCoord=this._getNextX(this.curCoord,finalCoord);}else{nextCoord=this._getNextY(this.curCoord,finalCoord);}
this.logger.log("moveOneTick: "+" finalCoord: "+finalCoord+" this.curCoord: "+this.curCoord+" nextCoord: "+nextCoord);if(nextCoord){this.curCoord=nextCoord;this.thumb.alignElWithMouse(t.getEl(),nextCoord[0]+this.thumbCenterPoint.x,nextCoord[1]+this.thumbCenterPoint.y);if(!(nextCoord[0]==finalCoord[0]&&nextCoord[1]==finalCoord[1])){setTimeout(function(){self.moveOneTick(finalCoord);},this.tickPause);}else{this.unlock();if(!this._mouseDown){this.endMove();}}}else{this.unlock();if(!this._mouseDown){this.endMove();}}},_getNextX:function(curCoord,finalCoord){this.logger.log("getNextX: "+curCoord+", "+finalCoord);var t=this.thumb,thresh,tmp=[],nextCoord=null;if(curCoord[0]>finalCoord[0]){thresh=t.tickSize-this.thumbCenterPoint.x;tmp=t.getTargetCoord(curCoord[0]-thresh,curCoord[1]);nextCoord=[tmp.x,tmp.y];}else if(curCoord[0]<finalCoord[0]){thresh=t.tickSize+this.thumbCenterPoint.x;tmp=t.getTargetCoord(curCoord[0]+thresh,curCoord[1]);nextCoord=[tmp.x,tmp.y];}else{}
return nextCoord;},_getNextY:function(curCoord,finalCoord){var t=this.thumb,thresh,tmp=[],nextCoord=null;if(curCoord[1]>finalCoord[1]){thresh=t.tickSize-this.thumbCenterPoint.y;tmp=t.getTargetCoord(curCoord[0],curCoord[1]-thresh);nextCoord=[tmp.x,tmp.y];}else if(curCoord[1]<finalCoord[1]){thresh=t.tickSize+this.thumbCenterPoint.y;tmp=t.getTargetCoord(curCoord[0],curCoord[1]+thresh);nextCoord=[tmp.x,tmp.y];}else{}
return nextCoord;},b4MouseDown:function(e){if(!this.backgroundEnabled){return false;}
this.thumb.autoOffset();this.baselinePos=[];},onMouseDown:function(e){if(!this.backgroundEnabled||this.isLocked()){return false;}
this._mouseDown=true;var x=Event.getPageX(e),y=Event.getPageY(e);this.logger.log("bg mousedown: "+x+","+y);this.focus();this._slideStart();this.moveThumb(x,y);},onDrag:function(e){this.logger.log("background drag");if(this.backgroundEnabled&&!this.isLocked()){var x=Event.getPageX(e),y=Event.getPageY(e);this.moveThumb(x,y,true,true);this.fireEvents();}},endMove:function(){this.logger.log("endMove");this.unlock();this.fireEvents();this._slideEnd();},resetThumbConstraints:function(){var t=this.thumb;t.setXConstraint(t.leftConstraint,t.rightConstraint,t.xTickSize);t.setYConstraint(t.topConstraint,t.bottomConstraint,t.xTickSize);},fireEvents:function(thumbEvent){var t=this.thumb,newX,newY,newVal;if(!thumbEvent){t.cachePosition();}
if(!this.isLocked()){if(t._isRegion){newX=t.getXValue();newY=t.getYValue();if(newX!=this.previousX||newY!=this.previousY){if(!this._silent){this.onChange(newX,newY);this.fireEvent("change",{x:newX,y:newY});}}
this.previousX=newX;this.previousY=newY;}else{newVal=t.getValue();if(newVal!=this.previousVal){this.logger.log("Firing onchange: "+newVal);if(!this._silent){this.onChange(newVal);this.fireEvent("change",newVal);}}
this.previousVal=newVal;}}},toString:function(){return("Slider ("+this.type+") "+this.id);}});YAHOO.lang.augmentProto(Slider,YAHOO.util.EventProvider);YAHOO.widget.Slider=Slider;})();YAHOO.widget.SliderThumb=function(id,sGroup,iLeft,iRight,iUp,iDown,iTickSize){if(id){YAHOO.widget.SliderThumb.superclass.constructor.call(this,id,sGroup);this.parentElId=sGroup;}
this.logger=new YAHOO.widget.LogWriter(this.toString());this.isTarget=false;this.tickSize=iTickSize;this.maintainOffset=true;this.initSlider(iLeft,iRight,iUp,iDown,iTickSize);this.scroll=false;};YAHOO.extend(YAHOO.widget.SliderThumb,YAHOO.util.DD,{startOffset:null,dragOnly:true,_isHoriz:false,_prevVal:0,_graduated:false,getOffsetFromParent0:function(parentPos){var myPos=YAHOO.util.Dom.getXY(this.getEl()),ppos=parentPos||YAHOO.util.Dom.getXY(this.parentElId);return[(myPos[0]-ppos[0]),(myPos[1]-ppos[1])];},getOffsetFromParent:function(parentPos){var el=this.getEl(),newOffset,myPos,ppos,l,t,deltaX,deltaY,newLeft,newTop;if(!this.deltaOffset){myPos=YAHOO.util.Dom.getXY(el);ppos=parentPos||YAHOO.util.Dom.getXY(this.parentElId);newOffset=[(myPos[0]-ppos[0]),(myPos[1]-ppos[1])];l=parseInt(YAHOO.util.Dom.getStyle(el,"left"),10);t=parseInt(YAHOO.util.Dom.getStyle(el,"top"),10);deltaX=l-newOffset[0];deltaY=t-newOffset[1];if(isNaN(deltaX)||isNaN(deltaY)){this.logger.log("element does not have a position style def yet");}else{this.deltaOffset=[deltaX,deltaY];}}else{newLeft=parseInt(YAHOO.util.Dom.getStyle(el,"left"),10);newTop=parseInt(YAHOO.util.Dom.getStyle(el,"top"),10);newOffset=[newLeft+this.deltaOffset[0],newTop+this.deltaOffset[1]];}
return newOffset;},initSlider:function(iLeft,iRight,iUp,iDown,iTickSize){this.initLeft=iLeft;this.initRight=iRight;this.initUp=iUp;this.initDown=iDown;this.setXConstraint(iLeft,iRight,iTickSize);this.setYConstraint(iUp,iDown,iTickSize);if(iTickSize&&iTickSize>1){this._graduated=true;}
this._isHoriz=(iLeft||iRight);this._isVert=(iUp||iDown);this._isRegion=(this._isHoriz&&this._isVert);},clearTicks:function(){YAHOO.widget.SliderThumb.superclass.clearTicks.call(this);this.tickSize=0;this._graduated=false;},getValue:function(){return(this._isHoriz)?this.getXValue():this.getYValue();},getXValue:function(){if(!this.available){return 0;}
var newOffset=this.getOffsetFromParent();if(YAHOO.lang.isNumber(newOffset[0])){this.lastOffset=newOffset;return(newOffset[0]-this.startOffset[0]);}else{this.logger.log("can't get offset, using old value: "+
this.lastOffset[0]);return(this.lastOffset[0]-this.startOffset[0]);}},getYValue:function(){if(!this.available){return 0;}
var newOffset=this.getOffsetFromParent();if(YAHOO.lang.isNumber(newOffset[1])){this.lastOffset=newOffset;return(newOffset[1]-this.startOffset[1]);}else{this.logger.log("can't get offset, using old value: "+
this.lastOffset[1]);return(this.lastOffset[1]-this.startOffset[1]);}},toString:function(){return"SliderThumb "+this.id;},onChange:function(x,y){}});(function(){var Event=YAHOO.util.Event,YW=YAHOO.widget;function DualSlider(minSlider,maxSlider,range,initVals){var self=this,ready={min:false,max:false},minThumbOnMouseDown,maxThumbOnMouseDown;this.minSlider=minSlider;this.maxSlider=maxSlider;this.activeSlider=minSlider;this.isHoriz=minSlider.thumb._isHoriz;minThumbOnMouseDown=this.minSlider.thumb.onMouseDown;maxThumbOnMouseDown=this.maxSlider.thumb.onMouseDown;this.minSlider.thumb.onMouseDown=function(){self.activeSlider=self.minSlider;minThumbOnMouseDown.apply(this,arguments);};this.maxSlider.thumb.onMouseDown=function(){self.activeSlider=self.maxSlider;maxThumbOnMouseDown.apply(this,arguments);};this.minSlider.thumb.onAvailable=function(){minSlider.setStartSliderState();ready.min=true;if(ready.max){self.fireEvent('ready',self);}};this.maxSlider.thumb.onAvailable=function(){maxSlider.setStartSliderState();ready.max=true;if(ready.min){self.fireEvent('ready',self);}};minSlider.onMouseDown=maxSlider.onMouseDown=function(e){return this.backgroundEnabled&&self._handleMouseDown(e);};minSlider.onDrag=maxSlider.onDrag=function(e){self._handleDrag(e);};minSlider.onMouseUp=maxSlider.onMouseUp=function(e){self._handleMouseUp(e);};minSlider._bindKeyEvents=function(){self._bindKeyEvents(this);};maxSlider._bindKeyEvents=function(){};minSlider.subscribe("change",this._handleMinChange,minSlider,this);minSlider.subscribe("slideStart",this._handleSlideStart,minSlider,this);minSlider.subscribe("slideEnd",this._handleSlideEnd,minSlider,this);maxSlider.subscribe("change",this._handleMaxChange,maxSlider,this);maxSlider.subscribe("slideStart",this._handleSlideStart,maxSlider,this);maxSlider.subscribe("slideEnd",this._handleSlideEnd,maxSlider,this);this.createEvent("ready",this);this.createEvent("change",this);this.createEvent("slideStart",this);this.createEvent("slideEnd",this);initVals=YAHOO.lang.isArray(initVals)?initVals:[0,range];initVals[0]=Math.min(Math.max(parseInt(initVals[0],10)|0,0),range);initVals[1]=Math.max(Math.min(parseInt(initVals[1],10)|0,range),0);if(initVals[0]>initVals[1]){initVals.splice(0,2,initVals[1],initVals[0]);}
this.minVal=initVals[0];this.maxVal=initVals[1];this.minSlider.setValue(this.minVal,true,true,true);this.maxSlider.setValue(this.maxVal,true,true,true);YAHOO.log("Setting initial values "+this.minVal+", "+this.maxVal,"info","DualSlider");}
DualSlider.prototype={minVal:-1,maxVal:-1,minRange:0,_handleSlideStart:function(data,slider){this.fireEvent("slideStart",slider);},_handleSlideEnd:function(data,slider){this.fireEvent("slideEnd",slider);},_handleDrag:function(e){YW.Slider.prototype.onDrag.call(this.activeSlider,e);},_handleMinChange:function(){this.activeSlider=this.minSlider;this.updateValue();},_handleMaxChange:function(){this.activeSlider=this.maxSlider;this.updateValue();},_bindKeyEvents:function(slider){Event.on(slider.id,'keydown',this._handleKeyDown,this,true);Event.on(slider.id,'keypress',this._handleKeyPress,this,true);},_handleKeyDown:function(e){this.activeSlider.handleKeyDown.apply(this.activeSlider,arguments);},_handleKeyPress:function(e){this.activeSlider.handleKeyPress.apply(this.activeSlider,arguments);},setValues:function(min,max,skipAnim,force,silent){var mins=this.minSlider,maxs=this.maxSlider,mint=mins.thumb,maxt=maxs.thumb,self=this,done={min:false,max:false};if(mint._isHoriz){mint.setXConstraint(mint.leftConstraint,maxt.rightConstraint,mint.tickSize);maxt.setXConstraint(mint.leftConstraint,maxt.rightConstraint,maxt.tickSize);}else{mint.setYConstraint(mint.topConstraint,maxt.bottomConstraint,mint.tickSize);maxt.setYConstraint(mint.topConstraint,maxt.bottomConstraint,maxt.tickSize);}
this._oneTimeCallback(mins,'slideEnd',function(){done.min=true;if(done.max){self.updateValue(silent);setTimeout(function(){self._cleanEvent(mins,'slideEnd');self._cleanEvent(maxs,'slideEnd');},0);}});this._oneTimeCallback(maxs,'slideEnd',function(){done.max=true;if(done.min){self.updateValue(silent);setTimeout(function(){self._cleanEvent(mins,'slideEnd');self._cleanEvent(maxs,'slideEnd');},0);}});mins.setValue(min,skipAnim,force,false);maxs.setValue(max,skipAnim,force,false);},setMinValue:function(min,skipAnim,force,silent){var mins=this.minSlider,self=this;this.activeSlider=mins;self=this;this._oneTimeCallback(mins,'slideEnd',function(){self.updateValue(silent);setTimeout(function(){self._cleanEvent(mins,'slideEnd');},0);});mins.setValue(min,skipAnim,force);},setMaxValue:function(max,skipAnim,force,silent){var maxs=this.maxSlider,self=this;this.activeSlider=maxs;this._oneTimeCallback(maxs,'slideEnd',function(){self.updateValue(silent);setTimeout(function(){self._cleanEvent(maxs,'slideEnd');},0);});maxs.setValue(max,skipAnim,force);},updateValue:function(silent){var min=this.minSlider.getValue(),max=this.maxSlider.getValue(),changed=false,mint,maxt,dim,minConstraint,maxConstraint,thumbInnerWidth;if(min!=this.minVal||max!=this.maxVal){changed=true;mint=this.minSlider.thumb;maxt=this.maxSlider.thumb;dim=this.isHoriz?'x':'y';thumbInnerWidth=this.minSlider.thumbCenterPoint[dim]+
this.maxSlider.thumbCenterPoint[dim];minConstraint=Math.max(max-thumbInnerWidth-this.minRange,0);maxConstraint=Math.min(-min-thumbInnerWidth-this.minRange,0);if(this.isHoriz){minConstraint=Math.min(minConstraint,maxt.rightConstraint);mint.setXConstraint(mint.leftConstraint,minConstraint,mint.tickSize);maxt.setXConstraint(maxConstraint,maxt.rightConstraint,maxt.tickSize);}else{minConstraint=Math.min(minConstraint,maxt.bottomConstraint);mint.setYConstraint(mint.leftConstraint,minConstraint,mint.tickSize);maxt.setYConstraint(maxConstraint,maxt.bottomConstraint,maxt.tickSize);}}
this.minVal=min;this.maxVal=max;if(changed&&!silent){this.fireEvent("change",this);}},selectActiveSlider:function(e){var min=this.minSlider,max=this.maxSlider,minLocked=min.isLocked()||!min.backgroundEnabled,maxLocked=max.isLocked()||!min.backgroundEnabled,Ev=YAHOO.util.Event,d;if(minLocked||maxLocked){this.activeSlider=minLocked?max:min;}else{if(this.isHoriz){d=Ev.getPageX(e)-min.thumb.initPageX-min.thumbCenterPoint.x;}else{d=Ev.getPageY(e)-min.thumb.initPageY-min.thumbCenterPoint.y;}
this.activeSlider=d*2>max.getValue()+min.getValue()?max:min;}},_handleMouseDown:function(e){if(!e._handled&&!this.minSlider._sliding&&!this.maxSlider._sliding){e._handled=true;this.selectActiveSlider(e);return YW.Slider.prototype.onMouseDown.call(this.activeSlider,e);}else{return false;}},_handleMouseUp:function(e){YW.Slider.prototype.onMouseUp.apply(this.activeSlider,arguments);},_oneTimeCallback:function(o,evt,fn){var sub=function(){o.unsubscribe(evt,sub);fn.apply({},arguments);};o.subscribe(evt,sub);},_cleanEvent:function(o,evt){var ce,i,len,j,subs,newSubs;if(o.__yui_events&&o.events[evt]){for(i=o.__yui_events.length;i>=0;--i){if(o.__yui_events[i].type===evt){ce=o.__yui_events[i];break;}}
if(ce){subs=ce.subscribers;newSubs=[];j=0;for(i=0,len=subs.length;i<len;++i){if(subs[i]){newSubs[j++]=subs[i];}}
ce.subscribers=newSubs;}}}};YAHOO.lang.augmentProto(DualSlider,YAHOO.util.EventProvider);YW.Slider.getHorizDualSlider=function(bg,minthumb,maxthumb,range,iTickSize,initVals){var mint=new YW.SliderThumb(minthumb,bg,0,range,0,0,iTickSize),maxt=new YW.SliderThumb(maxthumb,bg,0,range,0,0,iTickSize);return new DualSlider(new YW.Slider(bg,bg,mint,"horiz"),new YW.Slider(bg,bg,maxt,"horiz"),range,initVals);};YW.Slider.getVertDualSlider=function(bg,minthumb,maxthumb,range,iTickSize,initVals){var mint=new YW.SliderThumb(minthumb,bg,0,0,0,range,iTickSize),maxt=new YW.SliderThumb(maxthumb,bg,0,0,0,range,iTickSize);return new YW.DualSlider(new YW.Slider(bg,bg,mint,"vert"),new YW.Slider(bg,bg,maxt,"vert"),range,initVals);};YAHOO.widget.DualSlider=DualSlider;})();YAHOO.register("slider",YAHOO.widget.Slider,{version:"2.8.0r4",build:"2449"});