<version xsi:noNamespaceSchemaLocation="../../profiles/version_gis.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <doIt>
    <create>
      <mdView name="dss.vector.solutions.general.ReportModuleView" label="Report process view">
        <attributes>
          <char name="moduleName" label="Module name" size="255" />
        </attributes>
        <mdMethod name="buildDatabaseViews" label="Build database views" returnType="void" />
        <mdMethod name="getProgress" label="Get progress" static="true" returnType="java.lang.Integer">
          <mdParameter name="requestId" type="java.lang.String" order="0" label="Request id" />
        </mdMethod>
        <mdMethod name="getModules" label="Get modules" static="true" returnType="dss.vector.solutions.general.ReportModuleView[]" />
      </mdView>
      <mdController name="dss.vector.solutions.general.ReportModuleController" label="Report view controller">
        <mdAction name="form" isPost="false" isQuery="false" label="Report view form action" description="Report view form action" />
        <mdAction name="buildDatabaseViews" isPost="true" isQuery="false" label="Report view form action" description="Report view form action">
          <mdParameter name="view" label="View" order="0" type="dss.vector.solutions.general.ReportModuleView" />
        </mdAction>
        <mdAction name="getProgress" isPost="false" isQuery="false" label="Get progress" description="Get progress">
          <mdParameter name="requestId" label="Request Id" order="0" type="java.lang.String" />
        </mdAction>
      </mdController>

      <mdException name="dss.vector.solutions.general.UnsupportedReportModuleException" label="Unsupported report module" message="Unable to find database views for module [{moduleName}]">
        <attributes>
          <char name="moduleName" label="Module name" size="255" />
        </attributes>
      </mdException>
      <mdException name="dss.vector.solutions.general.InProgressReportModuleException" label="Unsupported report module" message="The materialized report tables are already in the process of being created.">
        <attributes>
          <char name="moduleName" label="Module name" size="255" />
        </attributes>
      </mdException>
      <mdException name="dss.vector.solutions.general.UnableToDeleteReportTableException" label="Unable to delete report table" message="Unable to delete the materialized report tables.">
        <attributes>
          <char name="moduleName" label="Module name" size="255" />
        </attributes>
      </mdException>
      <mdException name="dss.vector.solutions.general.UnableToCreateReportTableException" label="Unable to delete report table" message="Unable to create the materialized report table for view [{viewName}].">
        <attributes>
          <char name="viewName" label="View name" size="255" />
        </attributes>
      </mdException>
      <mdException name="dss.vector.solutions.general.ViewNotFoundException" label="View not found exception" message="View [{viewName}] does not exist.">
        <attributes>
          <char name="viewName" label="View name" size="255" />
        </attributes>
      </mdException>
    </create>
    <permissions>
      <method type="dss.vector.solutions.general.ReportModuleView" methodName="buildDatabaseViews">
        <assignedRole roleName="Administrator" />
      </method>
    </permissions>
  </doIt>
  <undoIt>
    <delete>
      <object key="dss.vector.solutions.general.ViewNotFoundException" type="com.runwaysdk.system.metadata.MdException" />
      <object key="dss.vector.solutions.general.UnableToCreateReportTableException" type="com.runwaysdk.system.metadata.MdException" />
      <object key="dss.vector.solutions.general.UnableToDeleteReportTableException" type="com.runwaysdk.system.metadata.MdException" />
      <object key="dss.vector.solutions.general.InProgressReportModuleException" type="com.runwaysdk.system.metadata.MdException" />
      <object key="dss.vector.solutions.general.UnsupportedReportModuleException" type="com.runwaysdk.system.metadata.MdException" />
      <object key="dss.vector.solutions.general.ReportModuleView" type="com.runwaysdk.system.metadata.MdView" />
      <object key="dss.vector.solutions.general.ReportModuleController" type="com.runwaysdk.system.metadata.MdController" />
    </delete>
  </undoIt>
</version>