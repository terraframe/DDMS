
(function(){var Dom=YAHOO.util.Dom,lang=YAHOO.lang,isObject=lang.isObject,isFunction=lang.isFunction,isArray=lang.isArray,isString=lang.isString;function Paginator(config){var UNLIMITED=Paginator.VALUE_UNLIMITED,attrib,initialPage,records,perPage,startIndex;config=isObject(config)?config:{};this.initConfig();this.initEvents();this.set('rowsPerPage',config.rowsPerPage,true);if(Paginator.isNumeric(config.totalRecords)){this.set('totalRecords',config.totalRecords,true);}
this.initUIComponents();for(attrib in config){if(config.hasOwnProperty(attrib)){this.set(attrib,config[attrib],true);}}
initialPage=this.get('initialPage');records=this.get('totalRecords');perPage=this.get('rowsPerPage');if(initialPage>1&&perPage!==UNLIMITED){startIndex=(initialPage-1)*perPage;if(records===UNLIMITED||startIndex<records){this.set('recordOffset',startIndex,true);}}}
lang.augmentObject(Paginator,{id:0,ID_BASE:'yui-pg',VALUE_UNLIMITED:-1,TEMPLATE_DEFAULT:"{FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}",TEMPLATE_ROWS_PER_PAGE:"{FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}",ui:{},isNumeric:function(v){return isFinite(+v);},toNumber:function(n){return isFinite(+n)?+n:null;}},true);Paginator.prototype={_containers:[],_batch:false,_pageChanged:false,_state:null,initConfig:function(){var UNLIMITED=Paginator.VALUE_UNLIMITED;this.setAttributeConfig('rowsPerPage',{value:0,validator:Paginator.isNumeric,setter:Paginator.toNumber});this.setAttributeConfig('containers',{value:null,validator:function(val){if(!isArray(val)){val=[val];}
for(var i=0,len=val.length;i<len;++i){if(isString(val[i])||(isObject(val[i])&&val[i].nodeType===1)){continue;}
return false;}
return true;},method:function(val){val=Dom.get(val);if(!isArray(val)){val=[val];}
this._containers=val;}});this.setAttributeConfig('totalRecords',{value:0,validator:Paginator.isNumeric,setter:Paginator.toNumber});this.setAttributeConfig('recordOffset',{value:0,validator:function(val){var total=this.get('totalRecords');if(Paginator.isNumeric(val)){val=+val;return total===UNLIMITED||total>val||(total===0&&val===0);}
return false;},setter:Paginator.toNumber});this.setAttributeConfig('initialPage',{value:1,validator:Paginator.isNumeric,setter:Paginator.toNumber});this.setAttributeConfig('template',{value:Paginator.TEMPLATE_DEFAULT,validator:isString});this.setAttributeConfig('containerClass',{value:'yui-pg-container',validator:isString});this.setAttributeConfig('alwaysVisible',{value:true,validator:lang.isBoolean});this.setAttributeConfig('updateOnChange',{value:false,validator:lang.isBoolean});this.setAttributeConfig('id',{value:Paginator.id++,readOnly:true});this.setAttributeConfig('rendered',{value:false,readOnly:true});},initUIComponents:function(){var ui=Paginator.ui,name,UIComp;for(name in ui){if(ui.hasOwnProperty(name)){UIComp=ui[name];if(isObject(UIComp)&&isFunction(UIComp.init)){UIComp.init(this);}}}},initEvents:function(){this.createEvent('render');this.createEvent('rendered');this.createEvent('changeRequest');this.createEvent('pageChange');this.createEvent('beforeDestroy');this.createEvent('destroy');this._selfSubscribe();},_selfSubscribe:function(){this.subscribe('totalRecordsChange',this.updateVisibility,this,true);this.subscribe('alwaysVisibleChange',this.updateVisibility,this,true);this.subscribe('totalRecordsChange',this._handleStateChange,this,true);this.subscribe('recordOffsetChange',this._handleStateChange,this,true);this.subscribe('rowsPerPageChange',this._handleStateChange,this,true);this.subscribe('totalRecordsChange',this._syncRecordOffset,this,true);},_syncRecordOffset:function(e){var v=e.newValue,rpp,state;if(e.prevValue!==v){if(v!==Paginator.VALUE_UNLIMITED){rpp=this.get('rowsPerPage');if(rpp&&this.get('recordOffset')>=v){state=this.getState({totalRecords:e.prevValue,recordOffset:this.get('recordOffset')});this.set('recordOffset',state.before.recordOffset);this._firePageChange(state);}}}},_handleStateChange:function(e){if(e.prevValue!==e.newValue){var change=this._state||{},state;change[e.type.replace(/Change$/,'')]=e.prevValue;state=this.getState(change);if(state.page!==state.before.page){if(this._batch){this._pageChanged=true;}else{this._firePageChange(state);}}}},_firePageChange:function(state){if(isObject(state)){var current=state.before;delete state.before;this.fireEvent('pageChange',{type:'pageChange',prevValue:state.page,newValue:current.page,prevState:state,newState:current});}},render:function(){if(this.get('rendered')){return this;}
var template=this.get('template'),state=this.getState(),id_base=Paginator.ID_BASE+this.get('id')+'-',i,len;for(i=0,len=this._containers.length;i<len;++i){this._renderTemplate(this._containers[i],template,id_base+i,true);}
this.updateVisibility();if(this._containers.length){this.setAttributeConfig('rendered',{value:true});this.fireEvent('render',state);this.fireEvent('rendered',state);}
return this;},_renderTemplate:function(container,template,id_base,hide){var containerClass=this.get('containerClass'),markers,i,len;if(!container){return;}
Dom.setStyle(container,'display','none');Dom.addClass(container,containerClass);container.innerHTML=template.replace(/\{([a-z0-9_ \-]+)\}/gi,'<span class="yui-pg-ui yui-pg-ui-$1"></span>');markers=Dom.getElementsByClassName('yui-pg-ui','span',container);for(i=0,len=markers.length;i<len;++i){this.renderUIComponent(markers[i],id_base);}
if(!hide){Dom.setStyle(container,'display','');}},renderUIComponent:function(marker,id_base){var par=marker.parentNode,name=/yui-pg-ui-(\w+)/.exec(marker.className),UIComp=name&&Paginator.ui[name[1]],comp;if(isFunction(UIComp)){comp=new UIComp(this);if(isFunction(comp.render)){par.replaceChild(comp.render(id_base),marker);}}},destroy:function(){this.fireEvent('beforeDestroy');this.fireEvent('destroy');this.setAttributeConfig('rendered',{value:false});this.unsubscribeAll();},updateVisibility:function(e){var alwaysVisible=this.get('alwaysVisible'),totalRecords,visible,rpp,rppOptions,i,len;if(!e||e.type==='alwaysVisibleChange'||!alwaysVisible){totalRecords=this.get('totalRecords');visible=true;rpp=this.get('rowsPerPage');rppOptions=this.get('rowsPerPageOptions');if(isArray(rppOptions)){for(i=0,len=rppOptions.length;i<len;++i){rpp=Math.min(rpp,rppOptions[i]);}}
if(totalRecords!==Paginator.VALUE_UNLIMITED&&totalRecords<=rpp){visible=false;}
visible=visible||alwaysVisible;for(i=0,len=this._containers.length;i<len;++i){Dom.setStyle(this._containers[i],'display',visible?'':'none');}}},getContainerNodes:function(){return this._containers;},getTotalPages:function(){var records=this.get('totalRecords'),perPage=this.get('rowsPerPage');if(!perPage){return null;}
if(records===Paginator.VALUE_UNLIMITED){return Paginator.VALUE_UNLIMITED;}
return Math.ceil(records/perPage);},hasPage:function(page){if(!lang.isNumber(page)||page<1){return false;}
var totalPages=this.getTotalPages();return(totalPages===Paginator.VALUE_UNLIMITED||totalPages>=page);},getCurrentPage:function(){var perPage=this.get('rowsPerPage');if(!perPage||!this.get('totalRecords')){return 0;}
return Math.floor(this.get('recordOffset')/perPage)+1;},hasNextPage:function(){var currentPage=this.getCurrentPage(),totalPages=this.getTotalPages();return currentPage&&(totalPages===Paginator.VALUE_UNLIMITED||currentPage<totalPages);},getNextPage:function(){return this.hasNextPage()?this.getCurrentPage()+1:null;},hasPreviousPage:function(){return(this.getCurrentPage()>1);},getPreviousPage:function(){return(this.hasPreviousPage()?this.getCurrentPage()-1:1);},getPageRecords:function(page){if(!lang.isNumber(page)){page=this.getCurrentPage();}
var perPage=this.get('rowsPerPage'),records=this.get('totalRecords'),start,end;if(!page||!perPage){return null;}
start=(page-1)*perPage;if(records!==Paginator.VALUE_UNLIMITED){if(start>=records){return null;}
end=Math.min(start+perPage,records)-1;}else{end=start+perPage-1;}
return[start,end];},setPage:function(page,silent){if(this.hasPage(page)&&page!==this.getCurrentPage()){if(this.get('updateOnChange')||silent){this.set('recordOffset',(page-1)*this.get('rowsPerPage'));}else{this.fireEvent('changeRequest',this.getState({'page':page}));}}},getRowsPerPage:function(){return this.get('rowsPerPage');},setRowsPerPage:function(rpp,silent){if(Paginator.isNumeric(rpp)&&+rpp>0&&+rpp!==this.get('rowsPerPage')){if(this.get('updateOnChange')||silent){this.set('rowsPerPage',rpp);}else{this.fireEvent('changeRequest',this.getState({'rowsPerPage':+rpp}));}}},getTotalRecords:function(){return this.get('totalRecords');},setTotalRecords:function(total,silent){if(Paginator.isNumeric(total)&&+total>=0&&+total!==this.get('totalRecords')){if(this.get('updateOnChange')||silent){this.set('totalRecords',total);}else{this.fireEvent('changeRequest',this.getState({'totalRecords':+total}));}}},getStartIndex:function(){return this.get('recordOffset');},setStartIndex:function(offset,silent){if(Paginator.isNumeric(offset)&&+offset>=0&&+offset!==this.get('recordOffset')){if(this.get('updateOnChange')||silent){this.set('recordOffset',offset);}else{this.fireEvent('changeRequest',this.getState({'recordOffset':+offset}));}}},getState:function(changes){var UNLIMITED=Paginator.VALUE_UNLIMITED,M=Math,max=M.max,ceil=M.ceil,currentState,state,offset;function normalizeOffset(offset,total,rpp){if(offset<=0||total===0){return 0;}
if(total===UNLIMITED||total>offset){return offset-(offset%rpp);}
return total-(total%rpp||rpp);}
currentState={paginator:this,totalRecords:this.get('totalRecords'),rowsPerPage:this.get('rowsPerPage'),records:this.getPageRecords()};currentState.recordOffset=normalizeOffset(this.get('recordOffset'),currentState.totalRecords,currentState.rowsPerPage);currentState.page=ceil(currentState.recordOffset/currentState.rowsPerPage)+1;if(!changes){return currentState;}
state={paginator:this,before:currentState,rowsPerPage:changes.rowsPerPage||currentState.rowsPerPage,totalRecords:(Paginator.isNumeric(changes.totalRecords)?max(changes.totalRecords,UNLIMITED):+currentState.totalRecords)};if(state.totalRecords===0){state.recordOffset=state.page=0;}else{offset=Paginator.isNumeric(changes.page)?(changes.page-1)*state.rowsPerPage:Paginator.isNumeric(changes.recordOffset)?+changes.recordOffset:currentState.recordOffset;state.recordOffset=normalizeOffset(offset,state.totalRecords,state.rowsPerPage);state.page=ceil(state.recordOffset/state.rowsPerPage)+1;}
state.records=[state.recordOffset,state.recordOffset+state.rowsPerPage-1];if(state.totalRecords!==UNLIMITED&&state.recordOffset<state.totalRecords&&state.records&&state.records[1]>state.totalRecords-1){state.records[1]=state.totalRecords-1;}
return state;},setState:function(state){if(isObject(state)){this._state=this.getState({});state={page:state.page,rowsPerPage:state.rowsPerPage,totalRecords:state.totalRecords,recordOffset:state.recordOffset};if(state.page&&state.recordOffset===undefined){state.recordOffset=(state.page-1)*(state.rowsPerPage||this.get('rowsPerPage'));}
this._batch=true;this._pageChanged=false;for(var k in state){if(state.hasOwnProperty(k)&&this._configs.hasOwnProperty(k)){this.set(k,state[k]);}}
this._batch=false;if(this._pageChanged){this._pageChanged=false;this._firePageChange(this.getState(this._state));}}}};lang.augmentProto(Paginator,YAHOO.util.AttributeProvider);YAHOO.widget.Paginator=Paginator;})();(function(){var Paginator=YAHOO.widget.Paginator,l=YAHOO.lang;Paginator.ui.CurrentPageReport=function(p){this.paginator=p;p.subscribe('recordOffsetChange',this.update,this,true);p.subscribe('rowsPerPageChange',this.update,this,true);p.subscribe('totalRecordsChange',this.update,this,true);p.subscribe('pageReportTemplateChange',this.update,this,true);p.subscribe('destroy',this.destroy,this,true);p.subscribe('pageReportClassChange',this.update,this,true);};Paginator.ui.CurrentPageReport.init=function(p){p.setAttributeConfig('pageReportClass',{value:'yui-pg-current',validator:l.isString});p.setAttributeConfig('pageReportTemplate',{value:'({currentPage} of {totalPages})',validator:l.isString});p.setAttributeConfig('pageReportValueGenerator',{value:function(paginator){var curPage=paginator.getCurrentPage(),records=paginator.getPageRecords();return{'currentPage':records?curPage:0,'totalPages':paginator.getTotalPages(),'startIndex':records?records[0]:0,'endIndex':records?records[1]:0,'startRecord':records?records[0]+1:0,'endRecord':records?records[1]+1:0,'totalRecords':paginator.get('totalRecords')};},validator:l.isFunction});};Paginator.ui.CurrentPageReport.sprintf=function(template,values){return template.replace(/\{([\w\s\-]+)\}/g,function(x,key){return(key in values)?values[key]:'';});};Paginator.ui.CurrentPageReport.prototype={span:null,render:function(id_base){this.span=document.createElement('span');this.span.id=id_base+'-page-report';this.span.className=this.paginator.get('pageReportClass');this.update();return this.span;},update:function(e){if(e&&e.prevValue===e.newValue){return;}
this.span.innerHTML=Paginator.ui.CurrentPageReport.sprintf(this.paginator.get('pageReportTemplate'),this.paginator.get('pageReportValueGenerator')(this.paginator));},destroy:function(){this.span.parentNode.removeChild(this.span);this.span=null;}};})();(function(){var Paginator=YAHOO.widget.Paginator,l=YAHOO.lang;Paginator.ui.PageLinks=function(p){this.paginator=p;p.subscribe('recordOffsetChange',this.update,this,true);p.subscribe('rowsPerPageChange',this.update,this,true);p.subscribe('totalRecordsChange',this.update,this,true);p.subscribe('pageLinksChange',this.rebuild,this,true);p.subscribe('pageLinkClassChange',this.rebuild,this,true);p.subscribe('currentPageClassChange',this.rebuild,this,true);p.subscribe('destroy',this.destroy,this,true);p.subscribe('pageLinksContainerClassChange',this.rebuild,this,true);};Paginator.ui.PageLinks.init=function(p){p.setAttributeConfig('pageLinkClass',{value:'yui-pg-page',validator:l.isString});p.setAttributeConfig('currentPageClass',{value:'yui-pg-current-page',validator:l.isString});p.setAttributeConfig('pageLinksContainerClass',{value:'yui-pg-pages',validator:l.isString});p.setAttributeConfig('pageLinks',{value:10,validator:Paginator.isNumeric});p.setAttributeConfig('pageLabelBuilder',{value:function(page,paginator){return page;},validator:l.isFunction});};Paginator.ui.PageLinks.calculateRange=function(currentPage,totalPages,numPages){var UNLIMITED=Paginator.VALUE_UNLIMITED,start,end,delta;if(!currentPage||numPages===0||totalPages===0||(totalPages===UNLIMITED&&numPages===UNLIMITED)){return[0,-1];}
if(totalPages!==UNLIMITED){numPages=numPages===UNLIMITED?totalPages:Math.min(numPages,totalPages);}
start=Math.max(1,Math.ceil(currentPage-(numPages/2)));if(totalPages===UNLIMITED){end=start+numPages-1;}else{end=Math.min(totalPages,start+numPages-1);}
delta=numPages-(end-start+1);start=Math.max(1,start-delta);return[start,end];};Paginator.ui.PageLinks.prototype={current:0,container:null,render:function(id_base){var p=this.paginator;this.container=document.createElement('span');this.container.id=id_base+'-pages';this.container.className=p.get('pageLinksContainerClass');YAHOO.util.Event.on(this.container,'click',this.onClick,this,true);this.update({newValue:null,rebuild:true});return this.container;},update:function(e){if(e&&e.prevValue===e.newValue){return;}
var p=this.paginator,currentPage=p.getCurrentPage();if(this.current!==currentPage||!currentPage||e.rebuild){var labelBuilder=p.get('pageLabelBuilder'),range=Paginator.ui.PageLinks.calculateRange(currentPage,p.getTotalPages(),p.get('pageLinks')),start=range[0],end=range[1],content='',linkTemplate,i;linkTemplate='<a href="#" class="'+p.get('pageLinkClass')+'" page="';for(i=start;i<=end;++i){if(i===currentPage){content+='<span class="'+p.get('currentPageClass')+' '+
p.get('pageLinkClass')+'">'+
labelBuilder(i,p)+'</span>';}else{content+=linkTemplate+i+'">'+labelBuilder(i,p)+'</a>';}}
this.container.innerHTML=content;}},rebuild:function(e){e.rebuild=true;this.update(e);},destroy:function(){YAHOO.util.Event.purgeElement(this.container,true);this.container.parentNode.removeChild(this.container);this.container=null;},onClick:function(e){var t=YAHOO.util.Event.getTarget(e);if(t&&YAHOO.util.Dom.hasClass(t,this.paginator.get('pageLinkClass'))){YAHOO.util.Event.stopEvent(e);this.paginator.setPage(parseInt(t.getAttribute('page'),10));}}};})();(function(){var Paginator=YAHOO.widget.Paginator,l=YAHOO.lang;Paginator.ui.FirstPageLink=function(p){this.paginator=p;p.subscribe('recordOffsetChange',this.update,this,true);p.subscribe('rowsPerPageChange',this.update,this,true);p.subscribe('totalRecordsChange',this.update,this,true);p.subscribe('destroy',this.destroy,this,true);p.subscribe('firstPageLinkLabelChange',this.update,this,true);p.subscribe('firstPageLinkClassChange',this.update,this,true);};Paginator.ui.FirstPageLink.init=function(p){p.setAttributeConfig('firstPageLinkLabel',{value:'&lt;&lt; first',validator:l.isString});p.setAttributeConfig('firstPageLinkClass',{value:'yui-pg-first',validator:l.isString});};Paginator.ui.FirstPageLink.prototype={current:null,link:null,span:null,render:function(id_base){var p=this.paginator,c=p.get('firstPageLinkClass'),label=p.get('firstPageLinkLabel');this.link=document.createElement('a');this.span=document.createElement('span');this.link.id=id_base+'-first-link';this.link.href='#';this.link.className=c;this.link.innerHTML=label;YAHOO.util.Event.on(this.link,'click',this.onClick,this,true);this.span.id=id_base+'-first-span';this.span.className=c;this.span.innerHTML=label;this.current=p.getCurrentPage()>1?this.link:this.span;return this.current;},update:function(e){if(e&&e.prevValue===e.newValue){return;}
var par=this.current?this.current.parentNode:null;if(this.paginator.getCurrentPage()>1){if(par&&this.current===this.span){par.replaceChild(this.link,this.current);this.current=this.link;}}else{if(par&&this.current===this.link){par.replaceChild(this.span,this.current);this.current=this.span;}}},destroy:function(){YAHOO.util.Event.purgeElement(this.link);this.current.parentNode.removeChild(this.current);this.link=this.span=null;},onClick:function(e){YAHOO.util.Event.stopEvent(e);this.paginator.setPage(1);}};})();(function(){var Paginator=YAHOO.widget.Paginator,l=YAHOO.lang;Paginator.ui.LastPageLink=function(p){this.paginator=p;p.subscribe('recordOffsetChange',this.update,this,true);p.subscribe('rowsPerPageChange',this.update,this,true);p.subscribe('totalRecordsChange',this.update,this,true);p.subscribe('destroy',this.destroy,this,true);p.subscribe('lastPageLinkLabelChange',this.update,this,true);p.subscribe('lastPageLinkClassChange',this.update,this,true);};Paginator.ui.LastPageLink.init=function(p){p.setAttributeConfig('lastPageLinkLabel',{value:'last &gt;&gt;',validator:l.isString});p.setAttributeConfig('lastPageLinkClass',{value:'yui-pg-last',validator:l.isString});};Paginator.ui.LastPageLink.prototype={current:null,link:null,span:null,na:null,render:function(id_base){var p=this.paginator,c=p.get('lastPageLinkClass'),label=p.get('lastPageLinkLabel'),last=p.getTotalPages();this.link=document.createElement('a');this.span=document.createElement('span');this.na=this.span.cloneNode(false);this.link.id=id_base+'-last-link';this.link.href='#';this.link.className=c;this.link.innerHTML=label;YAHOO.util.Event.on(this.link,'click',this.onClick,this,true);this.span.id=id_base+'-last-span';this.span.className=c;this.span.innerHTML=label;this.na.id=id_base+'-last-na';switch(last){case Paginator.VALUE_UNLIMITED:this.current=this.na;break;case p.getCurrentPage():this.current=this.span;break;default:this.current=this.link;}
return this.current;},update:function(e){if(e&&e.prevValue===e.newValue){return;}
var par=this.current?this.current.parentNode:null,after=this.link;if(par){switch(this.paginator.getTotalPages()){case Paginator.VALUE_UNLIMITED:after=this.na;break;case this.paginator.getCurrentPage():after=this.span;break;}
if(this.current!==after){par.replaceChild(after,this.current);this.current=after;}}},destroy:function(){YAHOO.util.Event.purgeElement(this.link);this.current.parentNode.removeChild(this.current);this.link=this.span=null;},onClick:function(e){YAHOO.util.Event.stopEvent(e);this.paginator.setPage(this.paginator.getTotalPages());}};})();(function(){var Paginator=YAHOO.widget.Paginator,l=YAHOO.lang;Paginator.ui.NextPageLink=function(p){this.paginator=p;p.subscribe('recordOffsetChange',this.update,this,true);p.subscribe('rowsPerPageChange',this.update,this,true);p.subscribe('totalRecordsChange',this.update,this,true);p.subscribe('destroy',this.destroy,this,true);p.subscribe('nextPageLinkLabelChange',this.update,this,true);p.subscribe('nextPageLinkClassChange',this.update,this,true);};Paginator.ui.NextPageLink.init=function(p){p.setAttributeConfig('nextPageLinkLabel',{value:'next &gt;',validator:l.isString});p.setAttributeConfig('nextPageLinkClass',{value:'yui-pg-next',validator:l.isString});};Paginator.ui.NextPageLink.prototype={current:null,link:null,span:null,render:function(id_base){var p=this.paginator,c=p.get('nextPageLinkClass'),label=p.get('nextPageLinkLabel'),last=p.getTotalPages();this.link=document.createElement('a');this.span=document.createElement('span');this.link.id=id_base+'-next-link';this.link.href='#';this.link.className=c;this.link.innerHTML=label;YAHOO.util.Event.on(this.link,'click',this.onClick,this,true);this.span.id=id_base+'-next-span';this.span.className=c;this.span.innerHTML=label;this.current=p.getCurrentPage()===last?this.span:this.link;return this.current;},update:function(e){if(e&&e.prevValue===e.newValue){return;}
var last=this.paginator.getTotalPages(),par=this.current?this.current.parentNode:null;if(this.paginator.getCurrentPage()!==last){if(par&&this.current===this.span){par.replaceChild(this.link,this.current);this.current=this.link;}}else if(this.current===this.link){if(par){par.replaceChild(this.span,this.current);this.current=this.span;}}},destroy:function(){YAHOO.util.Event.purgeElement(this.link);this.current.parentNode.removeChild(this.current);this.link=this.span=null;},onClick:function(e){YAHOO.util.Event.stopEvent(e);this.paginator.setPage(this.paginator.getNextPage());}};})();(function(){var Paginator=YAHOO.widget.Paginator,l=YAHOO.lang;Paginator.ui.PreviousPageLink=function(p){this.paginator=p;p.subscribe('recordOffsetChange',this.update,this,true);p.subscribe('rowsPerPageChange',this.update,this,true);p.subscribe('totalRecordsChange',this.update,this,true);p.subscribe('destroy',this.destroy,this,true);p.subscribe('previousPageLinkLabelChange',this.update,this,true);p.subscribe('previousPageLinkClassChange',this.update,this,true);};Paginator.ui.PreviousPageLink.init=function(p){p.setAttributeConfig('previousPageLinkLabel',{value:'&lt; prev',validator:l.isString});p.setAttributeConfig('previousPageLinkClass',{value:'yui-pg-previous',validator:l.isString});};Paginator.ui.PreviousPageLink.prototype={current:null,link:null,span:null,render:function(id_base){var p=this.paginator,c=p.get('previousPageLinkClass'),label=p.get('previousPageLinkLabel');this.link=document.createElement('a');this.span=document.createElement('span');this.link.id=id_base+'-prev-link';this.link.href='#';this.link.className=c;this.link.innerHTML=label;YAHOO.util.Event.on(this.link,'click',this.onClick,this,true);this.span.id=id_base+'-prev-span';this.span.className=c;this.span.innerHTML=label;this.current=p.getCurrentPage()>1?this.link:this.span;return this.current;},update:function(e){if(e&&e.prevValue===e.newValue){return;}
var par=this.current?this.current.parentNode:null;if(this.paginator.getCurrentPage()>1){if(par&&this.current===this.span){par.replaceChild(this.link,this.current);this.current=this.link;}}else{if(par&&this.current===this.link){par.replaceChild(this.span,this.current);this.current=this.span;}}},destroy:function(){YAHOO.util.Event.purgeElement(this.link);this.current.parentNode.removeChild(this.current);this.link=this.span=null;},onClick:function(e){YAHOO.util.Event.stopEvent(e);this.paginator.setPage(this.paginator.getPreviousPage());}};})();(function(){var Paginator=YAHOO.widget.Paginator,l=YAHOO.lang;Paginator.ui.RowsPerPageDropdown=function(p){this.paginator=p;p.subscribe('rowsPerPageChange',this.update,this,true);p.subscribe('rowsPerPageOptionsChange',this.rebuild,this,true);p.subscribe('totalRecordsChange',this._handleTotalRecordsChange,this,true);p.subscribe('destroy',this.destroy,this,true);p.subscribe('rowsPerPageDropdownClassChange',this.rebuild,this,true);};Paginator.ui.RowsPerPageDropdown.init=function(p){p.setAttributeConfig('rowsPerPageOptions',{value:[],validator:l.isArray});p.setAttributeConfig('rowsPerPageDropdownClass',{value:'yui-pg-rpp-options',validator:l.isString});};Paginator.ui.RowsPerPageDropdown.prototype={select:null,all:null,render:function(id_base){this.select=document.createElement('select');this.select.id=id_base+'-rpp';this.select.className=this.paginator.get('rowsPerPageDropdownClass');this.select.title='Rows per page';YAHOO.util.Event.on(this.select,'change',this.onChange,this,true);this.rebuild();return this.select;},rebuild:function(e){var p=this.paginator,sel=this.select,options=p.get('rowsPerPageOptions'),opt,cfg,val,i,len;this.all=null;for(i=0,len=options.length;i<len;++i){cfg=options[i];opt=sel.options[i]||sel.appendChild(document.createElement('option'));val=l.isValue(cfg.value)?cfg.value:cfg;opt.innerHTML=l.isValue(cfg.text)?cfg.text:cfg;if(l.isString(val)&&val.toLowerCase()==='all'){this.all=opt;opt.value=p.get('totalRecords');}else{opt.value=val;}}
while(sel.options.length>options.length){sel.removeChild(sel.firstChild);}
this.update();},update:function(e){if(e&&e.prevValue===e.newValue){return;}
var rpp=this.paginator.get('rowsPerPage')+'',options=this.select.options,i,len;for(i=0,len=options.length;i<len;++i){if(options[i].value===rpp){options[i].selected=true;break;}}},onChange:function(e){this.paginator.setRowsPerPage(parseInt(this.select.options[this.select.selectedIndex].value,10));},_handleTotalRecordsChange:function(e){if(!this.all||(e&&e.prevValue===e.newValue)){return;}
this.all.value=e.newValue;if(this.all.selected){this.paginator.set('rowsPerPage',e.newValue);}},destroy:function(){YAHOO.util.Event.purgeElement(this.select);this.select.parentNode.removeChild(this.select);this.select=null;}};})();YAHOO.register("paginator",YAHOO.widget.Paginator,{version:"2.8.0r4",build:"2449"});