
(function(){var Y=YAHOO.util,Dom=Y.Dom,Event=Y.Event,document=window.document,ACTIVE='active',ACTIVE_INDEX='activeIndex',ACTIVE_TAB='activeTab',CONTENT_EL='contentEl',ELEMENT='element',TabView=function(el,attr){attr=attr||{};if(arguments.length==1&&!YAHOO.lang.isString(el)&&!el.nodeName){attr=el;el=attr.element||null;}
if(!el&&!attr.element){el=this._createTabViewElement(attr);}
TabView.superclass.constructor.call(this,el,attr);};YAHOO.extend(TabView,Y.Element,{CLASSNAME:'yui-navset',TAB_PARENT_CLASSNAME:'yui-nav',CONTENT_PARENT_CLASSNAME:'yui-content',_tabParent:null,_contentParent:null,addTab:function(tab,index){var tabs=this.get('tabs'),before=this.getTab(index),tabParent=this._tabParent,contentParent=this._contentParent,tabElement=tab.get(ELEMENT),contentEl=tab.get(CONTENT_EL);if(!tabs){this._queue[this._queue.length]=['addTab',arguments];return false;}
index=(index===undefined)?tabs.length:index;tabs.splice(index,0,tab);if(before){tabParent.insertBefore(tabElement,before.get(ELEMENT));}else{tabParent.appendChild(tabElement);}
if(contentEl&&!Dom.isAncestor(contentParent,contentEl)){contentParent.appendChild(contentEl);}
if(!tab.get(ACTIVE)){tab.set('contentVisible',false,true);}else{this.set(ACTIVE_TAB,tab,true);this.set('activeIndex',index,true);}
this._initTabEvents(tab);},_initTabEvents:function(tab){tab.addListener(tab.get('activationEvent'),tab._onActivate,this,tab);tab.addListener(tab.get('activationEventChange'),tab._onActivationEventChange,this,tab);},_removeTabEvents:function(tab){tab.removeListener(tab.get('activationEvent'),tab._onActivate,this,tab);tab.removeListener('activationEventChange',tab._onActivationEventChange,this,tab);},DOMEventHandler:function(e){var target=Event.getTarget(e),tabParent=this._tabParent,tabs=this.get('tabs'),tab,tabEl,contentEl;if(Dom.isAncestor(tabParent,target)){for(var i=0,len=tabs.length;i<len;i++){tabEl=tabs[i].get(ELEMENT);contentEl=tabs[i].get(CONTENT_EL);if(target==tabEl||Dom.isAncestor(tabEl,target)){tab=tabs[i];break;}}
if(tab){tab.fireEvent(e.type,e);}}},getTab:function(index){return this.get('tabs')[index];},getTabIndex:function(tab){var index=null,tabs=this.get('tabs');for(var i=0,len=tabs.length;i<len;++i){if(tab==tabs[i]){index=i;break;}}
return index;},removeTab:function(tab){var tabCount=this.get('tabs').length,index=this.getTabIndex(tab);if(tab===this.get(ACTIVE_TAB)){if(tabCount>1){if(index+1===tabCount){this.set(ACTIVE_INDEX,index-1);}else{this.set(ACTIVE_INDEX,index+1);}}else{this.set(ACTIVE_TAB,null);}}
this._removeTabEvents(tab);this._tabParent.removeChild(tab.get(ELEMENT));this._contentParent.removeChild(tab.get(CONTENT_EL));this._configs.tabs.value.splice(index,1);tab.fireEvent('remove',{type:'remove',tabview:this});},toString:function(){var name=this.get('id')||this.get('tagName');return"TabView "+name;},contentTransition:function(newTab,oldTab){if(newTab){newTab.set('contentVisible',true);}
if(oldTab){oldTab.set('contentVisible',false);}},initAttributes:function(attr){TabView.superclass.initAttributes.call(this,attr);if(!attr.orientation){attr.orientation='top';}
var el=this.get(ELEMENT);if(!Dom.hasClass(el,this.CLASSNAME)){Dom.addClass(el,this.CLASSNAME);}
this.setAttributeConfig('tabs',{value:[],readOnly:true});this._tabParent=this.getElementsByClassName(this.TAB_PARENT_CLASSNAME,'ul')[0]||this._createTabParent();this._contentParent=this.getElementsByClassName(this.CONTENT_PARENT_CLASSNAME,'div')[0]||this._createContentParent();this.setAttributeConfig('orientation',{value:attr.orientation,method:function(value){var current=this.get('orientation');this.addClass('yui-navset-'+value);if(current!=value){this.removeClass('yui-navset-'+current);}
if(value==='bottom'){this.appendChild(this._tabParent);}}});this.setAttributeConfig(ACTIVE_INDEX,{value:attr.activeIndex,validator:function(value){var ret=true;if(value&&this.getTab(value).get('disabled')){ret=false;}
return ret;}});this.setAttributeConfig(ACTIVE_TAB,{value:attr.activeTab,method:function(tab){var activeTab=this.get(ACTIVE_TAB);if(tab){tab.set(ACTIVE,true);}
if(activeTab&&activeTab!==tab){activeTab.set(ACTIVE,false);}
if(activeTab&&tab!==activeTab){this.contentTransition(tab,activeTab);}else if(tab){tab.set('contentVisible',true);}},validator:function(value){var ret=true;if(value&&value.get('disabled')){ret=false;}
return ret;}});this.on('activeTabChange',this._onActiveTabChange);this.on('activeIndexChange',this._onActiveIndexChange);YAHOO.log('attributes initialized','info','TabView');if(this._tabParent){this._initTabs();}
this.DOM_EVENTS.submit=false;this.DOM_EVENTS.focus=false;this.DOM_EVENTS.blur=false;for(var type in this.DOM_EVENTS){if(YAHOO.lang.hasOwnProperty(this.DOM_EVENTS,type)){this.addListener.call(this,type,this.DOMEventHandler);}}},deselectTab:function(index){if(this.getTab(index)===this.get('activeTab')){this.set('activeTab',null);}},selectTab:function(index){this.set('activeTab',this.getTab(index));},_onActiveTabChange:function(e){var activeIndex=this.get(ACTIVE_INDEX),newIndex=this.getTabIndex(e.newValue);if(activeIndex!==newIndex){if(!(this.set(ACTIVE_INDEX,newIndex))){this.set(ACTIVE_TAB,e.prevValue);}}},_onActiveIndexChange:function(e){if(e.newValue!==this.getTabIndex(this.get(ACTIVE_TAB))){if(!(this.set(ACTIVE_TAB,this.getTab(e.newValue)))){this.set(ACTIVE_INDEX,e.prevValue);}}},_initTabs:function(){var tabs=Dom.getChildren(this._tabParent),contentElements=Dom.getChildren(this._contentParent),activeIndex=this.get(ACTIVE_INDEX),tab,attr,active;for(var i=0,len=tabs.length;i<len;++i){attr={};if(contentElements[i]){attr.contentEl=contentElements[i];}
tab=new YAHOO.widget.Tab(tabs[i],attr);this.addTab(tab);if(tab.hasClass(tab.ACTIVE_CLASSNAME)){active=tab;}}
if(activeIndex){this.set(ACTIVE_TAB,this.getTab(activeIndex));}else{this._configs.activeTab.value=active;this._configs.activeIndex.value=this.getTabIndex(active);}},_createTabViewElement:function(attr){var el=document.createElement('div');if(this.CLASSNAME){el.className=this.CLASSNAME;}
YAHOO.log('TabView Dom created','info','TabView');return el;},_createTabParent:function(attr){var el=document.createElement('ul');if(this.TAB_PARENT_CLASSNAME){el.className=this.TAB_PARENT_CLASSNAME;}
this.get(ELEMENT).appendChild(el);return el;},_createContentParent:function(attr){var el=document.createElement('div');if(this.CONTENT_PARENT_CLASSNAME){el.className=this.CONTENT_PARENT_CLASSNAME;}
this.get(ELEMENT).appendChild(el);return el;}});YAHOO.widget.TabView=TabView;})();(function(){var Y=YAHOO.util,Dom=Y.Dom,Lang=YAHOO.lang,ACTIVE_TAB='activeTab',LABEL='label',LABEL_EL='labelEl',CONTENT='content',CONTENT_EL='contentEl',ELEMENT='element',CACHE_DATA='cacheData',DATA_SRC='dataSrc',DATA_LOADED='dataLoaded',DATA_TIMEOUT='dataTimeout',LOAD_METHOD='loadMethod',POST_DATA='postData',DISABLED='disabled',Tab=function(el,attr){attr=attr||{};if(arguments.length==1&&!Lang.isString(el)&&!el.nodeName){attr=el;el=attr.element;}
if(!el&&!attr.element){el=this._createTabElement(attr);}
this.loadHandler={success:function(o){this.set(CONTENT,o.responseText);},failure:function(o){}};Tab.superclass.constructor.call(this,el,attr);this.DOM_EVENTS={};};YAHOO.extend(Tab,YAHOO.util.Element,{LABEL_TAGNAME:'em',ACTIVE_CLASSNAME:'selected',HIDDEN_CLASSNAME:'yui-hidden',ACTIVE_TITLE:'active',DISABLED_CLASSNAME:DISABLED,LOADING_CLASSNAME:'loading',dataConnection:null,loadHandler:null,_loading:false,toString:function(){var el=this.get(ELEMENT),id=el.id||el.tagName;return"Tab "+id;},initAttributes:function(attr){attr=attr||{};Tab.superclass.initAttributes.call(this,attr);this.setAttributeConfig('activationEvent',{value:attr.activationEvent||'click'});this.setAttributeConfig(LABEL_EL,{value:attr[LABEL_EL]||this._getLabelEl(),method:function(value){value=Dom.get(value);var current=this.get(LABEL_EL);if(current){if(current==value){return false;}
current.parentNode.replaceChild(value,current);this.set(LABEL,value.innerHTML);}}});this.setAttributeConfig(LABEL,{value:attr.label||this._getLabel(),method:function(value){var labelEl=this.get(LABEL_EL);if(!labelEl){this.set(LABEL_EL,this._createLabelEl());}
labelEl.innerHTML=value;}});this.setAttributeConfig(CONTENT_EL,{value:attr[CONTENT_EL]||document.createElement('div'),method:function(value){value=Dom.get(value);var current=this.get(CONTENT_EL);if(current){if(current===value){return false;}
if(!this.get('selected')){Dom.addClass(value,this.HIDDEN_CLASSNAME);}
current.parentNode.replaceChild(value,current);this.set(CONTENT,value.innerHTML);}}});this.setAttributeConfig(CONTENT,{value:attr[CONTENT],method:function(value){this.get(CONTENT_EL).innerHTML=value;}});this.setAttributeConfig(DATA_SRC,{value:attr.dataSrc});this.setAttributeConfig(CACHE_DATA,{value:attr.cacheData||false,validator:Lang.isBoolean});this.setAttributeConfig(LOAD_METHOD,{value:attr.loadMethod||'GET',validator:Lang.isString});this.setAttributeConfig(DATA_LOADED,{value:false,validator:Lang.isBoolean,writeOnce:true});this.setAttributeConfig(DATA_TIMEOUT,{value:attr.dataTimeout||null,validator:Lang.isNumber});this.setAttributeConfig(POST_DATA,{value:attr.postData||null});this.setAttributeConfig('active',{value:attr.active||this.hasClass(this.ACTIVE_CLASSNAME),method:function(value){if(value===true){this.addClass(this.ACTIVE_CLASSNAME);this.set('title',this.ACTIVE_TITLE);}else{this.removeClass(this.ACTIVE_CLASSNAME);this.set('title','');}},validator:function(value){return Lang.isBoolean(value)&&!this.get(DISABLED);}});this.setAttributeConfig(DISABLED,{value:attr.disabled||this.hasClass(this.DISABLED_CLASSNAME),method:function(value){if(value===true){Dom.addClass(this.get(ELEMENT),this.DISABLED_CLASSNAME);}else{Dom.removeClass(this.get(ELEMENT),this.DISABLED_CLASSNAME);}},validator:Lang.isBoolean});this.setAttributeConfig('href',{value:attr.href||this.getElementsByTagName('a')[0].getAttribute('href',2)||'#',method:function(value){this.getElementsByTagName('a')[0].href=value;},validator:Lang.isString});this.setAttributeConfig('contentVisible',{value:attr.contentVisible,method:function(value){if(value){Dom.removeClass(this.get(CONTENT_EL),this.HIDDEN_CLASSNAME);if(this.get(DATA_SRC)){if(!this._loading&&!(this.get(DATA_LOADED)&&this.get(CACHE_DATA))){this._dataConnect();}}}else{Dom.addClass(this.get(CONTENT_EL),this.HIDDEN_CLASSNAME);}},validator:Lang.isBoolean});YAHOO.log('attributes initialized','info','Tab');},_dataConnect:function(){if(!Y.Connect){YAHOO.log('YAHOO.util.Connect dependency not met','error','Tab');return false;}
Dom.addClass(this.get(CONTENT_EL).parentNode,this.LOADING_CLASSNAME);this._loading=true;this.dataConnection=Y.Connect.asyncRequest(this.get(LOAD_METHOD),this.get(DATA_SRC),{success:function(o){YAHOO.log('content loaded successfully','info','Tab');this.loadHandler.success.call(this,o);this.set(DATA_LOADED,true);this.dataConnection=null;Dom.removeClass(this.get(CONTENT_EL).parentNode,this.LOADING_CLASSNAME);this._loading=false;},failure:function(o){YAHOO.log('loading failed: '+o.statusText,'error','Tab');this.loadHandler.failure.call(this,o);this.dataConnection=null;Dom.removeClass(this.get(CONTENT_EL).parentNode,this.LOADING_CLASSNAME);this._loading=false;},scope:this,timeout:this.get(DATA_TIMEOUT)},this.get(POST_DATA));},_createTabElement:function(attr){var el=document.createElement('li'),a=document.createElement('a'),label=attr.label||null,labelEl=attr.labelEl||null;a.href=attr.href||'#';el.appendChild(a);if(labelEl){if(!label){label=this._getLabel();}}else{labelEl=this._createLabelEl();}
a.appendChild(labelEl);YAHOO.log('creating Tab Dom','info','Tab');return el;},_getLabelEl:function(){return this.getElementsByTagName(this.LABEL_TAGNAME)[0];},_createLabelEl:function(){var el=document.createElement(this.LABEL_TAGNAME);return el;},_getLabel:function(){var el=this.get(LABEL_EL);if(!el){return undefined;}
return el.innerHTML;},_onActivate:function(e,tabview){var tab=this,silent=false;Y.Event.preventDefault(e);if(tab===tabview.get(ACTIVE_TAB)){silent=true;}
tabview.set(ACTIVE_TAB,tab,silent);},_onActivationEventChange:function(e){var tab=this;if(e.prevValue!=e.newValue){tab.removeListener(e.prevValue,tab._onActivate);tab.addListener(e.newValue,tab._onActivate,this,tab);}}});YAHOO.widget.Tab=Tab;})();YAHOO.register("tabview",YAHOO.widget.TabView,{version:"2.8.0r4",build:"2449"});