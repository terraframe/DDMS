
<TerraFrame
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:noNamespaceSchemaLocation="../../MyBodyTutor/profiles/datatype.xsd">

  <create>
    
    <mdView
      name="com.mybodytutor.UnrespondedFeedbackView"
      label="Unresponded Feedback View"
      description="View for the Totur's Nav bar showing an unresponded request for feedback">
      <attributes>
        <char
          name="firstName"
          label="First Name"
          description="First Name"
          size="50"
          required="true" />
        <char
          name="lastName"
          label="Last Name"
          description="Last Name"
          size="50"
          required="true" />
        <char
          name="feedbackId"
          label="Feedback ID"
          description="The ID of feedback the tutor hasn't responded to yet"
          size="64"
          required="true"/>
        <date
          name="feedbackDate"
          label="Feedback Date"
          description="The Date of this feedback"
          required="true"/>
      </attributes>
    </mdView>
    
    <mdView
      name="com.mybodytutor.NoRecentActivityView"
      label="No Recent Activity View"
      description="View for the Totur's Nav bar showing a client who has no recent activity">
      <attributes>
        <char
          name="firstName"
          label="First Name"
          description="First Name"
          size="50"
          required="true" />
        <char
          name="lastName"
          label="Last Name"
          description="Last Name"
          size="50"
          required="true" />
        <char
          name="clientId"
          label="Client ID"
          description="The ID of the client who hasn't requested feedback recently"
          size="64"
          required="true"/>
      </attributes>
    </mdView>
    
    <mdBusiness
      name="com.mybodytutor.Inspiration"
      label="Daily Inspiration"
      description="A Daily Inspiration from Adam">
      <attributes>
        <char
          name="subject"
          label="Subject line"
          description="Daily Inspiration Subject Line"
          required="true"
          size="128"/>
        <text
          name="body"
          label="Message Body"
          description="Daily Inspiration Message Body"
          required="true"/>
        <date
          name="publishDate"
          label="Publish Date"
          description="Publish Date for this Inspiration"
          required="true"/>
      </attributes>
      <mdMethod
        name="getLatestInspiration"
        label="Get Latest Inspiration"
        description="Returns the most recent Daily Inspiration"
        static="true"
        returnType="com.mybodytutor.Inspiration">
      </mdMethod>
    </mdBusiness>
    
    <mdBusiness
      name="com.mybodytutor.Activity"
      label="Recent Activity Row"
      description="An entry in a client's Recent Activity"
      isAbstract="true"
      extendable="true">
      <attributes>
        <char
          name="subject"
          label="Subject line"
          description="Recent Activity Subject Line"
          required="true"
          size="128"/>
        <char
          name="preview"
          label="Preview line"
          description="Recent Activity Preview Line"
          required="false"
          size="128"/>
        <char
          name="referenceID"
          label="Reference ID"
          description="Recent Activity Reference ID"
          required="true"
          size="64"/>
        <enumeration
          name="activityStatus"
          accessor="status"
          label="Activity Status"
          required="true"
          type="com.mybodytutor.AllActivityStatus"
          default_value="activityNew"/>
        <reference
          name="clientRef"
          label="Client"
          description="The Client this feedback is for"
          required="true"
          type="com.mybodytutor.Client"
          indexType="non-unique index"/>
      </attributes>
    </mdBusiness>
    
    <mdBusiness
      name="com.mybodytutor.ActivityFeedback"
      label="Recent Feedback Activity"
      description="A Feedback entry in a client's Recent Activity"
      extends="com.mybodytutor.Activity">
    </mdBusiness>
    
    <mdBusiness
      name="com.mybodytutor.ActivityMessage"
      label="Recent Message Activity"
      description="A Message entry in a client's Recent Activity"
      extends="com.mybodytutor.Activity">
    </mdBusiness>
    
    <mdBusiness
      name="com.mybodytutor.ActivityInspiration"
      label="Recent Inspiration Activity"
      description="An Inspiration entry in a client's Recent Activity"
      extends="com.mybodytutor.Activity">
    </mdBusiness>
    
    <enumerationMaster
      name="com.mybodytutor.ActivityStatus"
      label="Recent Activity Status"
      description="Recent Activity Status">
    </enumerationMaster>
    
    <object
      id="activityNew"
      type="com.mybodytutor.ActivityStatus">
      <valueAttribute
       name="enumName"
       value="NEW" />
      <valueAttribute
       name="displayLabel"
       value="New!" />
    </object>

    <object
      id="activityRead"
      type="com.mybodytutor.ActivityStatus">
      <valueAttribute
        name="enumName"
        value="READ" />
      <valueAttribute
       name="displayLabel"
       value="Read" />
    </object>
    
    <object
      id="activitySent"
      type="com.mybodytutor.ActivityStatus">
      <valueAttribute
        name="enumName"
        value="SENT" />
      <valueAttribute
       name="displayLabel"
       value="Sent" />
    </object>
    
    <object
      id="activityNutrition"
      type="com.mybodytutor.ActivityStatus">
      <valueAttribute
        name="enumName"
        value="NUTRITION" />
      <valueAttribute
       name="displayLabel"
       value="Nutrition" />
    </object>
    
    <object
      id="activityRecorded"
      type="com.mybodytutor.ActivityStatus">
      <valueAttribute
        name="enumName"
        value="RECORDED" />
      <valueAttribute
       name="displayLabel"
       value="Recorded" />
    </object>
    
    <object
      id="activityPhotos"
      type="com.mybodytutor.ActivityStatus">
      <valueAttribute
        name="enumName"
        value="PHOTOS" />
      <valueAttribute
       name="displayLabel"
       value="Photos" />
    </object>
    
    <object
      id="activityExercise"
      type="com.mybodytutor.ActivityStatus">
      <valueAttribute
        name="enumName"
        value="EXERCISE" />
      <valueAttribute
       name="displayLabel"
       value="Exercise" />
    </object>

    <mdEnumeration
      name="com.mybodytutor.AllActivityStatus"
      type="com.mybodytutor.ActivityStatus"
      label="All Recent Activity Status"
      description="All Recent Activity Status Options">
      <includeAll />
    </mdEnumeration>
    
    <mdBusiness
      name="com.mybodytutor.Feedback"
      label="Tutor Feedback"
      description="Personalized Tutor Feedback">
      <attributes>
        <date
          name="feedbackDate"
          label="Feedback Date"
          description="The Date of this feedback"
          required="true"/>
        <reference
          name="clientRef"
          label="Client"
          description="The Client this feedback is for"
          required="true"
          type="com.mybodytutor.Client"
          indexType="non-unique index"/>
        <integer
          name="foodRating"
          label="Food Rating"
          description="User rating of the diet for one day"
          rejectNegative="true"
          required="true"/>
        <integer
          name="healthRating"
          label="Health Rating"
          description="User rating of overall feeling of healthiness for one day"
          rejectNegative="true"
          required="true"/>
        <integer
          name="exerciseRating"
          label="Exercise Rating"
          description="User rating of success exercising for one day"
          rejectNegative="true"
          required="true"/>
        <integer
          name="weight"
          label="Client Weight"
          description="Client's weight"
          rejectNegative="true"
          required="true"/>
        <text 
          name="exerciseComment"
          label="Exercise Comment"
          description="User comment concerning Exercise"
          required="true"/>
        <text 
          name="exerciseTomorrow"
          label="Exercise Tomorrow"
          description="User's Exercise Plan for Tomorrow"
          required="true"/>
        <text 
          name="exerciseYesterday"
          label="Exercise Yesterday"
          description="User's Exercise Plan for today, specified yesterday"/>
        <text 
          name="exerciseResponse"
          label="Exercise Response"
          description="Tutor response to user exercise comment"/>
        <text 
          name="healthComment"
          label="Health Comment"
          description="User comment concerning feeling of healthiness"
          required="true"/>
        <text 
          name="healthResponse"
          label="Health Response"
          description="Tutor response to user health comment"/>
        <text 
          name="meal1Time"
          label="1st Meal Time"
          description="User comment concerning the time of the first meal"
          required="true"/>
        <text 
          name="meal1Comment"
          label="1st Meal Comment"
          description="User comment concerning the first meal"
          required="true"/>
        <text 
          name="meal1Response"
          label="1st Meal Response"
          description="Tutor response to user's first meal comment"/>
        <text 
          name="meal2Time"
          label="2nd Meal Time"
          description="User comment concerning the time of the second meal"/>
        <text 
          name="meal2Comment"
          label="2nd Meal Comment"
          description="User comment concerning the second meal"/>
        <text 
          name="meal2Response"
          label="2nd Meal Response"
          description="Tutor response to user's second meal comment"/>
        <text 
          name="meal3Time"
          label="3rd Meal Time"
          description="User comment concerning the time of the third meal"/>
        <text 
          name="meal3Comment"
          label="3rd Meal Comment"
          description="User comment concerning the third meal"/>
        <text 
          name="meal3Response"
          label="3rd Meal Response"
          description="Tutor response to user's third meal comment"/>
        <text 
          name="meal4Time"
          label="4th Meal Time"
          description="User comment concerning the time of the fourth meal"/>
        <text 
          name="meal4Comment"
          label="4th Meal Comment"
          description="User comment concerning the fourth meal"/>
        <text 
          name="meal4Response"
          label="4th Meal Response"
          description="Tutor response to user's fourth meal comment"/>
        <text 
          name="meal5Time"
          label="5th Meal Time"
          description="User comment concerning the time of the fifth meal"/>
        <text 
          name="meal5Comment"
          label="5th Meal Comment"
          description="User comment concerning the fifth meal"/>
        <text 
          name="meal5Response"
          label="5th Meal Response"
          description="Tutor response to user's fifth meal comment"/>
        <text 
          name="sacrifice"
          label="My Sacrifice for today"
          description="My Sacrifice for today"/>
        <text 
          name="gratefulComment"
          label="My 3 Things I am grateful for today"
          description="My 3 Things I am grateful for today"/>
        <text 
          name="outcomesComment"
          label="My 3 Outcomes for tomorrow"
          description="My 3 Outcomes for tomorrow"/>
        <text 
          name="newMeResponse"
          label="The New Me Response"
          description="Tutor response to The New Me"/>
      </attributes>
      <mdMethod
        name="newFeedback"
        label="New Feedback"
        description="Creates a new Feedback, and populates the yesterdayExercise attribute"
        static="true"
        returnType="com.mybodytutor.Feedback">
      </mdMethod>
    </mdBusiness>
    
    <mdView
      name="com.mybodytutor.CalendarFeedback"
      label="Calendar Feedback"
      isAbstract="false"
      extendable="false"
      description="The Feedback view for use in the YUI Calendar">
      <attributes>
        <char
          name="feedbackId"
          label="Feedback Id"
          description="The id of the Feedback this CalendarFeedback represents."
          size="64"
          required="true" />
        <date
         name="feedbackDate"
         label="Feedback Date"
         description="The date when the feedback was submitted."
         required="true" />
      </attributes>
      <mdMethod
        name="getCalendarFeedbacks"
        label="Get Calendar Feedbacks"
        description="Returns CalendarFeedback options for use with the YUI calendar"
        static="true"
        returnType="com.mybodytutor.CalendarFeedback[]">
        <mdParameter
          name="startDate"
          label="date"
          description="The start date of the range"
          order="0"
          type="java.util.Date" />
        <mdParameter
          name="endDate"
          label="date"
          description="The end date of the range"
          order="1"
          type="java.util.Date" />
        <mdParameter
          name="clientId"
          label="Client Id"
          description="Client Id"
          order="2"
          type="java.lang.String" />
      </mdMethod>
    </mdView>
    
    <mdBusiness
      name="com.mybodytutor.Exercise"
      label="Exercise">
      <attributes>
        <char
          name="title"
          size="64"
          required="true"
          indexType="unique index"
          label="Exercise Title"/>
        <text
          name="description"
          required="true"
          label="Exercise Description"/>
      </attributes>
      <mdMethod
       name="getExercisesById"
       label="Get Exercises By Id"
       description="Gets all Exercises with the given ids"
       static="true"
       returnType="com.mybodytutor.ExerciseQuery">
       <mdParameter
         name="exerciseIds"
         order="0"
         label="Exercise Ids"
         description="Exercise Ids"
         type="java.lang.String[]" />
     </mdMethod>
      <mdMethod
        name="getAllExercises"
        label="Get All Exercises"
        description="Gets All Exercises"
        returnType="com.mybodytutor.ExerciseQuery"
        static="true">
        <mdParameter
          name="pageSize"
          type="java.lang.Integer"
          label="Page Size"
          order="0" />
        <mdParameter
          name="pageNumber"
          type="java.lang.Integer"
          label="Page Number"
          order="1" />
      </mdMethod>
      <mdMethod
        name="searchExercises"
        label="Search Exercises"
        description="Searches Exercises"
        returnType="com.mybodytutor.ExerciseQuery"
        static="true">
        <mdParameter
          name="pageSize"
          type="java.lang.Integer"
          label="Page Size"
          order="0" />
        <mdParameter
          name="pageNumber"
          type="java.lang.Integer"
          label="Page Number"
          order="1" />
        <mdParameter
          name="sortAttribute"
          type="java.lang.String"
          label="Sort Attribute"
          order="2" />
        <mdParameter
          name="ascending"
          type="java.lang.Boolean"
          label="Sort Ascending"
          order="3" />
        <mdParameter
          name="search"
          type="java.lang.String"
          label="Search Query"
          order="4" />
      </mdMethod>
    </mdBusiness>
    
    <mdBusiness
      name="com.mybodytutor.AbstractRoutine"
      isAbstract="true"
      extendable="true"
      label="Abstrat Exercise Routine">
      <attributes>
        <char
          name="title"
          size="64"
          required="true"
          label="Exercise Routine Title"
          indexType="unique index"/>
        <text
          name="description"
          required="true"
          label="Exercise Routine Description"/>
      </attributes>
      <mdMethod
       name="getAllAssignmentViews"
       label="Get All Assignment Views"
       description="Get All Assignment Views"
       returnType="com.mybodytutor.AssignmentViewQuery"
       static="false">
      </mdMethod>
      <mdMethod
       name="applyAllExerciseAssignments"
       static="false"
       label="Apply All ExercisesAssignments"
       description="Applies all the given ExerciseAssignments."
       returnType="void">
       <mdParameter
         name="exerciseAssignments"
         label="Exercise Assignments"
         description="ExerciseAssignments to be applied."
         order="0"
         type="com.mybodytutor.ExerciseAssignment[]" />
     </mdMethod>
    </mdBusiness>
    
    <mdBusiness
      name="com.mybodytutor.RoutineTemplate"
      label="Routine Template"
      description="A searchable template for an exercise routine"
      extends="com.mybodytutor.AbstractRoutine">
      <mdMethod
        name="searchRoutineTemplates"
        label="Search RoutineTemplates"
        description="Searches RoutineTemplates"
        returnType="com.mybodytutor.RoutineTemplateQuery"
        static="true">
        <mdParameter
          name="pageSize"
          type="java.lang.Integer"
          label="Page Size"
          order="0" />
        <mdParameter
          name="pageNumber"
          type="java.lang.Integer"
          label="Page Number"
          order="1" />
        <mdParameter
          name="sortAttribute"
          type="java.lang.String"
          label="Sort Attribute"
          order="2" />
        <mdParameter
          name="ascending"
          type="java.lang.Boolean"
          label="Sort Ascending"
          order="3" />
        <mdParameter
          name="search"
          type="java.lang.String"
          label="Search Query"
          order="4" />
      </mdMethod>
    </mdBusiness>
    
    <mdBusiness
      name="com.mybodytutor.RoutineInstance"
      label="Routine Instance"
      description="A personalized isntance of an exercise routine"
      extends="com.mybodytutor.AbstractRoutine">
      <mdMethod
       name="getAllRoutines"
       label="Get All Routines"
       description="Get All Routines"
       returnType="com.mybodytutor.RoutineInstanceQuery"
       static="true" />
      <mdMethod
        name="searchRoutineInstances"
        label="Search RoutineInstances"
        description="Searches RoutineInstances"
        returnType="com.mybodytutor.RoutineInstanceQuery"
        static="true">
        <mdParameter
          name="pageSize"
          type="java.lang.Integer"
          label="Page Size"
          order="0" />
        <mdParameter
          name="pageNumber"
          type="java.lang.Integer"
          label="Page Number"
          order="1" />
        <mdParameter
          name="sortAttribute"
          type="java.lang.String"
          label="Sort Attribute"
          order="2" />
        <mdParameter
          name="ascending"
          type="java.lang.Boolean"
          label="Sort Ascending"
          order="3" />
        <mdParameter
          name="search"
          type="java.lang.String"
          label="Search Query"
          order="4" />
      </mdMethod>
    </mdBusiness>
    
    <mdGraph
      name="com.mybodytutor.ExerciseAssignment"
      label="Exercise Assignment"
      description="An assignment of an exercise to a routine.">
      <parent cardinality="*" name="com.mybodytutor.AbstractRoutine" method="Routines"/>
      <child cardinality="*" name="com.mybodytutor.Exercise" method="Exercises"/>
      <attributes>
        <integer
         name="orderInRoutine"
         required="true"
         label="Order"
         description="The order of the exercise in the routine"
         rejectZero="true"
         rejectNegative="true" />
        <text
          name="instructions"
          required="true"
          label="Task Instructions"
          description="Specific instructions regarding this exercise"/>
      </attributes>
    </mdGraph>
    
    <mdTree
      name="com.mybodytutor.RoutineAssignment"
      label="Routine Assignment"
      description="An assignment of a routine to a client">
      <parent cardinality="1" name="com.mybodytutor.Client" method="Client"/>
      <child  cardinality="*" name="com.mybodytutor.RoutineInstance" method="Routine"/>
      <attributes></attributes>
    </mdTree>

    <mdView
      name="com.mybodytutor.AssignmentView"
      label="AssignmentView"
      description="View to aggregate ExerciseAssignments and Exercises">
      <attributes>
        <char
         name="routineId"
         required="true"
         label="Routine Id"
         description="Routine Id"
         size="64" />
        <char
         name="exerciseId"
         required="true"
         label="Excercise Id"
         description="Excercise Id"
         size="64" />
        <char
         name="exerciseAssignmentId"
         required="true"
         label="Exercise Assignment Id"
         description="Exercise Assignment Id"
         size="64" />
        <integer
         name="orderInRoutine"
         required="true"
         label="Order"
         description="The order of the exercise in the routine"
         rejectZero="true"
         rejectNegative="true" />
        <char
          name="title"
          size="64"
          required="true"
          label="Exercise Routine Title"/>
        <text
          name="description"
          required="true"
          label="Exercise Routine Description"/>
        <text
          name="instructions"
          required="true"
          label="Task Instructions"
          description="Specific instructions regarding this exercise"/>  
      </attributes>
    </mdView>

    <enumerationMaster
      name="com.mybodytutor.MBTPlan"
      label="My Body Tutor Plan"
      description="My Body Tutor Plan">
      <attributes>
        <double
          name="price"
          label="price"
          description="The price per month"
          required="true"
          length="8"
          decimal="2" />
      </attributes>
    </enumerationMaster>
  
    <object
      id="gold"
      type="com.mybodytutor.MBTPlan">
        <valueAttribute
          name="enumName"
          value="GOLD" />
        <valueAttribute
          name="displayLabel"
          value="Gold" />
        <valueAttribute
          name="price"
          value="100.00"/>
    </object>
    
    <object
      id="platinum"
      type="com.mybodytutor.MBTPlan">
        <valueAttribute
          name="enumName"
          value="PLATINUM" />
        <valueAttribute
          name="displayLabel"
          value="Platinum" />
        <valueAttribute
          name="price"
          value="150.00"/>
    </object>
    
    <object
      id="maintenance"
      type="com.mybodytutor.MBTPlan">
        <valueAttribute
          name="enumName"
          value="MAINTENANCE" />
        <valueAttribute
          name="displayLabel"
          value="Maintenance" />
        <valueAttribute
          name="price"
          value="90.00"/>
    </object>
    
    <mdEnumeration
      name="com.mybodytutor.AllMBTPlan"
      type="com.mybodytutor.MBTPlan"
      label="All My Body Tutor Plans"
      description="All My Body Tutor Plans">
      <includeAll />
    </mdEnumeration>

    <enumerationMaster
      name="com.mybodytutor.GiftCertificateStatus"
      label="Gift Certificate Status"
      description="Gift Certificate Status">
    </enumerationMaster>
    
    <object
      id="gcInactive"
      type="com.mybodytutor.GiftCertificateStatus">
      <valueAttribute
       name="enumName"
       value="INACTIVE" />
      <valueAttribute
       name="displayLabel"
       value="Inactive" />
    </object>

    <object
      id="gcActive"
      type="com.mybodytutor.GiftCertificateStatus">
      <valueAttribute
        name="enumName"
        value="ACTIVE" />
      <valueAttribute
       name="displayLabel"
       value="Active" />
    </object>
    
    <object
      id="gcExpired"
      type="com.mybodytutor.GiftCertificateStatus">
      <valueAttribute
        name="enumName"
        value="EXPIRED" />
      <valueAttribute
       name="displayLabel"
       value="Expired" />
    </object>

    <mdEnumeration
      name="com.mybodytutor.AllGiftCertificateStatus"
      type="com.mybodytutor.GiftCertificateStatus"
      label="All Gift Certificate Status"
      description="All Gift Certificate Status Options">
      <includeAll />
    </mdEnumeration>
    
    <mdBusiness
      name="com.mybodytutor.GiftCertificate"
      label="Gift Certificate"
      description="Gift Certificate"
      isAbstract="false">
      <attributes>
        <char
          name="toFirstName"
          label="Recipient's First Name"
          description="First name of the recpient"
          required="true"
          size="30" />
        <char
          name="toLastName"
          label="Recipient's Last Name"
          description="Last name of the recpient"
          required="true"
          size="30" />        
        <char
          name="toEmail"
          label="Recipient's Email"
          description="Email of the Gift Certificate recipient"
          required="true"
          size="255" />
        <char
          name="fromFirstName"
          label="Your First Name"
          description="First name of the purchaser"
          required="true"
          size="30" />
        <char
          name="fromLastName"
          label="Your Last Name"
          description="Last name of the purchaser"
          required="true"
          size="30" />  
        <char
          name="fromEmail"
          label="Your Email"
          description="Email of the Gift Certificate sender"
          required="true"
          size="255" />
        <text
          name="personalMessage"
          label="Personal Message"
          description="Personal Message"
          required="false" />
        <enumeration
          name="mbtPlan"
          label="Workout Plan"
          description="Workout Plan"
          selectMultiple="false"
          required="true"
          default_value="gold"
          type="com.mybodytutor.AllMBTPlan" />
        <enumeration
          name="duration"
          label="Duration in Months"
          description="Gift Certificate Duration"
          selectMultiple="false"
          required="true"
          default_value="one"
          type="com.mybodytutor.AllGiftCertificateDuration" />
        <enumeration
          name="currentStatus"
          label="Status"
          selectMultiple="false"
          required="true"
          default_value="gcInactive"
          type="com.mybodytutor.AllGiftCertificateStatus" />
        <char
          name="redeemKey"
          size="32"
          label="Redeem Key"
          description="The unique key used to redeem a Gift Cerfificate"
          required="true"
          indexType="unique index" />
        <char
          name="transactionId"
          required="true"
          size="19"
          label="Transaction Reference"
          description="The Paypal transaction id for the gift certficate purchase" />
        <char
          name="amount"
          required="true"
          size="9"
          label="Amount"
          description="Gift Certificate total amount" />
        <dateTime
          name="redeemDate"
          required="false"
          label="Redeem Date"
          description="Redeem Date" />
        <integer
          name="remainingMonths"
          label="Remaining Months"
          description="Remaining Months"
          required="true"
          rejectNegative="true" />
      </attributes>
      <mdMethod
        name="searchGiftCertificates"
        label="Search Gift Certificates"
        description="Searches Gift Certificates"
        returnType="com.mybodytutor.GiftCertificateQuery"
        static="true">
        <mdParameter
          name="pageSize"
          type="java.lang.Integer"
          label="Page Size"
          order="0" />
        <mdParameter
          name="pageNumber"
          type="java.lang.Integer"
          label="Page Number"
          order="1" />
        <mdParameter
          name="sortAttribute"
          type="java.lang.String"
          label="Sort Attribute"
          order="2" />
        <mdParameter
          name="ascending"
          type="java.lang.Boolean"
          label="Sort Ascending"
          order="3" />
        <mdParameter
          name="search"
          type="java.lang.String"
          label="Search Query"
          order="4" />
      </mdMethod>
      <mdMethod
        name="createGiftCertificate"
        returnType="com.mybodytutor.paypal.TransactionView"
        label="Create Gift Certificate"
        static="true"
        description="Creates a Gift Certificate using the given billing information">
        <mdParameter
          name="giftCertificateView"
          label="Gift Certificate View"
          description="View for validating GC info without applying an instance"
          order="0"
          type="com.mybodytutor.GiftCertificateView" />
        <mdParameter
          name="billingView"
          label="Billing Information"
          description="Billing Information to purchase a Gift Certificate"
          order="1"
          type="com.mybodytutor.BillingView" />
        <mdParameter
          name="endpoint"
          label="Endpoint"
          description="The client-side endpoint for processing the gift certificate"
          order="2"
          type="java.lang.String" />
      </mdMethod>
      <mdMethod
        name="calculatePrice"
        returnType="java.lang.String"
        label="Calculate Price"
        static="true"
        description="Calculates the price of a given plan for a given duration">
        <mdParameter
          name="plan"
          label="Workout Plan"
          description="Workout Plan"
          order="1"
          type="com.mybodytutor.AllMBTPlan" />
        <mdParameter
          name="duration"
          label="Gift Certificate Duration"
          description="The Gift Certification duration as an enum"
          order="2"
          type="com.mybodytutor.AllGiftCertificateDuration" />
      </mdMethod>
    </mdBusiness>

    <mdView
      name="com.mybodytutor.GiftCertificateView"
      label="Gift Certificate View"
      description="View used to validate input when purchasing a Gift Certificate">
      <attributes>
        <char
          name="toFirstName"
          label="Recipient's First Name"
          description="First name of the recpient"
          required="true"
          size="30" />
        <char
          name="toLastName"
          label="Recipient's Last Name"
          description="Last name of the recpient"
          required="true"
          size="30" />        
        <char
          name="toEmail"
          label="Recipient's Email"
          description="Email of the Gift Certificate recipient"
          required="true"
          size="255" />
        <char
          name="fromFirstName"
          label="Your First Name"
          description="First name of the purchaser"
          required="true"
          size="30" />
        <char
          name="fromLastName"
          label="Your Last Name"
          description="Last name of the purchaser"
          required="true"
          size="30" />  
        <char
          name="fromEmail"
          label="Your Email"
          description="Email of the Gift Certificate sender"
          required="true"
          size="255" />
        <text
          name="personalMessage"
          label="Personal Message"
          description="Personal Message"
          required="false" />
        <enumeration
          name="mbtPlan"
          label="Workout Plan"
          description="Workout Plan"
          selectMultiple="false"
          required="true"
          default_value="gold"
          type="com.mybodytutor.AllMBTPlan" />
        <enumeration
          name="duration"
          label="Duration in Months"
          description="Gift Certificate Duration"
          selectMultiple="false"
          required="true"
          default_value="one"
          type="com.mybodytutor.AllGiftCertificateDuration" />
      </attributes>
    </mdView>

    <mdBusiness
      name="com.mybodytutor.paypal.PaymentHistory"
      label="Payment History"
      description="Payment History"
      extendable="true">
      <attributes>
        <char
          name="transactionId"
          label="Transaction Id"
          description="The paypal transaction id"
          required="false"
          size="19" />
        <char
          name="amount"
          label="Amount"
          description="Amount"
          size="8"
          required="false" />
        <char
          name="description"
          size="255"
          label="Description"
          description="description"
          required="true" />
      </attributes>
    </mdBusiness>

    <mdBusiness
      name="com.mybodytutor.MBTUser"
      extends="com.terraframe.mrsparkle.system.Users"
      label="My Body Tutor User"
      description="My Body Tutor User"
      isAbstract="true"
      extendable="true">
      <attributes>
        <char
          name="email"
          label="Email"
          description="Email"
          size="255"
          required="true" />
        <char
          name="firstName"
          label="First Name"
          description="First Name"
          size="50"
          required="true" />
        <char
          name="lastName"
          label="Last Name"
          description="Last Name"
          size="50"
          required="true" />
        <struct
          name="phoneNumber"
          label="Phone Number"
          description="Phone Number"
          type="com.terraframe.mrsparkle.system.PhoneNumber" />
      </attributes>
    </mdBusiness>
    
    <mdBusiness
      name="com.mybodytutor.MBTTaskUser"
      extends="com.mybodytutor.MBTUser"
      label="MBT Task User"
      description="User to run MBT Tasks"
      extendable="false"
      isAbstract="false">
    </mdBusiness>
    
    <object
      id="taskUser"
      type="com.mybodytutor.MBTTaskUser">
      <valueAttribute
        name="username"
        value="taskUser" />
      <valueAttribute
        name="password"
        value="a90pkoj31" />
      <valueAttribute
        name="firstName"
        value="Task User" />
      <valueAttribute
        name="lastName"
        value="Task User" />
      <valueAttribute
        name="email"
        value="taskUser@mybodytutor.com" />
    </object>
    
    <mdBusiness
     name="com.mybodytutor.Tutor"
     extends="com.mybodytutor.MBTUser"
     label="Tutor"
     description="Tutor">
     <attributes></attributes>
     <mdMethod
       name="getUnrespondedFeedbackViews"
       label="Get all unresponded feedback views"
       description="Gets views for all unresponded feedbacks for this tutor"
       static="false"
       returnType="com.mybodytutor.UnrespondedFeedbackViewQuery">
     </mdMethod>
     <mdMethod
       name="getNoRecentActivityViews"
       label="Get all No Recent Activity Views"
       description="Gets views for all clients for this tutor with no recent activity"
       static="false"
       returnType="com.mybodytutor.NoRecentActivityViewQuery">
     </mdMethod>
    </mdBusiness>
    
    <mdTree
      name="com.mybodytutor.Tutors"
      label="Tutors"
      description="A pairing between a tutor and a client">
      <parent cardinality="1" name="com.mybodytutor.Tutor" method="Tutor"/>
      <child cardinality="*" name="com.mybodytutor.Client" method="Clients"/>
    </mdTree>
    
    <mdBusiness
     name="com.mybodytutor.Client"
     extends="com.mybodytutor.MBTUser"
     label="Client"
     description="Client">
     <attributes>
       <enumeration
         name="currentStatus"
         label="Status"
         selectMultiple="false"
         required="true"
         default_value="inactive"
         type="com.mybodytutor.AllClientStatus" />
        <boolean
          name="enableMaintenance"
          label="Enable Maintenance"
          description="True if the maintence plan should be enabled"
          required="true"
          default_value="false" />
        <enumeration
          name="mbtPlan"
          label="Workout Plan"
          description="Workout Plan"
          required="true"
          selectMultiple="false"
          type="com.mybodytutor.AllMBTPlan" />
        <enumeration
          name="nextMbtPlan"
          label="Next Workout Plan"
          description="Workout Plan change for upgrade/downgrade."
          required="true"
          selectMultiple="false"
          type="com.mybodytutor.AllMBTPlan" />
        <text
          name="nutrition"
          label="Nutrition"
          description="Individual Nutrition Info"
          required="false"/>
     </attributes>
     <mdMethod
        name="searchClients"
        label="Search Clients"
        description="Searches Clients"
        returnType="com.mybodytutor.ClientQuery"
        static="true">
        <mdParameter
          name="pageSize"
          type="java.lang.Integer"
          label="Page Size"
          order="0" />
        <mdParameter
          name="pageNumber"
          type="java.lang.Integer"
          label="Page Number"
          order="1" />
        <mdParameter
          name="sortAttribute"
          type="java.lang.String"
          label="Sort Attribute"
          order="2" />
        <mdParameter
          name="ascending"
          type="java.lang.Boolean"
          label="Sort Ascending"
          order="3" />
        <mdParameter
          name="search"
          type="java.lang.String"
          label="Search Query"
          order="4" />
     </mdMethod>
     <mdMethod
       name="getAllUnexpiredGiftCertificates"
       label="Get all unexpired gift certificates"
       description="Gets all unexpired gift certificates on a client"
       static="false"
       returnType="com.mybodytutor.GiftCertificateQuery">
     </mdMethod>
     <mdMethod
       name="getAccountView"
       label="Get Account View"
       description="Gets the AccountView for this Client"
       static="false"
       returnType="com.mybodytutor.AccountView" />
     <mdMethod
       name="billOutstanding"
       label="Bill Outstanding"
       description="Bill Outstanding Amount"
       static="false"
       returnType="void">
     </mdMethod>
     <mdMethod
       name="getBillingView"
       label="Billing View"
       description="Gets the Billing Information for display"
       returnType="com.mybodytutor.BillingView">
     </mdMethod>
     <mdMethod
       name="lockProfile"
       label="Lock Profile"
       description="Locks the PaypalProfile associated with this Client"
       returnType="void">
     </mdMethod>
     <mdMethod
       name="unlockProfile"
       label="Unlock Profile"
       description="Unlocks the PaypalProfile associated with this Client"
       returnType="void">
     </mdMethod>
     <mdMethod
       name="applyWithBilling"
       returnType="void"
       label="Apply with Billing"
       description="Applies the Client with the billing information for a new signup."
       static="false">
       <mdParameter
         name="billingView"
         label="Billing View In"
         order="0"
         type="com.mybodytutor.BillingView" />
       <mdParameter
         name="referralCode"
         label="Referral Code"
         description="Referral Code"
         type="java.lang.String"
         order="1" />
     </mdMethod>
     <mdMethod
       name="applyWithGiftCertificate"
       returnType="void"
       label="Apply With Gift Certificate"
       description="Applies the client with a gift certificate"
       static="false">
       <mdParameter
         name="redeemKey"
         label="Redeem Key"
         description="The unique key to redeem a Gift Certificate"
         type="java.lang.String"
         order="0" />
     </mdMethod>
     <mdMethod
       name="redeemGiftCertificate"
       label="Redeem Gift Certificate"
       description="Redeems a Gift Certificate for a Client"
       returnType="void">
       <mdParameter
         name="redeemKey"
         label="Redeem Key"
         description="The unique key to redeem a Gift Certificate"
         type="java.lang.String"
         order="0" />
     </mdMethod>
     <mdMethod
       name="updateBillingInformation"
       label="Update Billing Information"
       description="Update Billing Information"
       returnType="void">
       <mdParameter
         name="billingView"
         label="Billing View"
         order="0"
         type="com.mybodytutor.BillingView" />
     </mdMethod>
     <mdMethod
        name="getAllPaymentHistories"
        label="Get All Payment Histories"
        description="Gets the payment history for a given Client."
        static="false"
        returnType="com.mybodytutor.paypal.PaymentHistoryQuery">
        <mdParameter
          name="pageSize"
          type="java.lang.Integer"
          label="Page Size"
          order="0" />
        <mdParameter
          name="pageNumber"
          type="java.lang.Integer"
          label="Page Number"
          order="1" />
      </mdMethod>
      <mdMethod
        name="updatePlan"
        label="Update Plan"
        description="Updates the MBT Plan for the Client"
        static="false"
        returnType="void">
      </mdMethod>
      <mdMethod
        name="getLastestFeedback"
        label="Get Latest Feedback"
        description="Gets the most recent feedback, typically from the previous day"
        static="false"
        returnType="com.mybodytutor.Feedback">
      </mdMethod>
    </mdBusiness>
    
    <mdBusiness
      name="com.mybodytutor.Payment"
      label="Payment"
      description="Payment">
      <attributes>
        <char
          name="description"
          description="The payment description"
          size="255"
          label="Description"
          required="true" />
        <double
          name="amount"
          label="Amount"
          description="The payment amount"
          length="5"
          decimal="2"
          required="false"
          rejectNegative="true" />
      </attributes>
    </mdBusiness>
    
    <mdTree
      name="com.mybodytutor.HasPayments"
      label="Has Payments"
      description="Client has Payments"
      isAbstract="false"
      composition="true">
      <parent
        name="com.mybodytutor.Client"
        label="Has Payments"
        method="Client"
        cardinality="1" />
      <child
        name="com.mybodytutor.Payment"
        label="Has Client"
        method="Payment"
        cardinality="*" />
    </mdTree>
    
    <enumerationMaster
      name="com.mybodytutor.paypal.PaymentMethod"
      label="Payment Method"
      description="Payment Method options">
    </enumerationMaster>
    
    <object
      id="giftCertificate"
      type="com.mybodytutor.paypal.PaymentMethod">
      <valueAttribute
        name="enumName"
        value="GIFT_CERTIFICATE_METHOD" />
      <valueAttribute
       name="displayLabel"
       value="Gift Certificate Method" />
    </object>
    
    <object
      id="paypalMethod"
      type="com.mybodytutor.paypal.PaymentMethod">
      <valueAttribute
        name="enumName"
        value="PAYPAL_METHOD" />
      <valueAttribute
       name="displayLabel"
       value="Paypal Method" />
    </object>
    
    <mdEnumeration
      name="com.mybodytutor.paypal.AllPaymentMethods"
      type="com.mybodytutor.paypal.PaymentMethod"
      label="All Payment Methods">
    <includeAll />
    </mdEnumeration>
    
    <mdBusiness
      name="com.mybodytutor.paypal.PaymentProfile"
      extendable="true"
      isAbstract="true"
      label="Payment Profile"
      description="Payment Profile"
      publish="true">
      <attributes>
        <enumeration
          name="paymentMethod"
          label="Payment Method"
          description="Payment Method"
          selectMultiple="false"
          required="true"
          type="com.mybodytutor.paypal.AllPaymentMethods" />
        <enumeration
          name="currentStatus"
          selectMultiple="false"
          label="Status"
          required="true"
          type="com.mybodytutor.paypal.AllProfileStatus" />
        <dateTime
          name="lastBillingDate"
          label="Last Billing Date"
          description="The last successful billing date"
          required="false" />
        <dateTime
          name="lastAttemptedBillingDate"
          label="Last Attempted Billing Date"
          description="The last attempted billing date (does not imply success or failure)."
          required="false" />
        <double
          name="outstandingAmount"
          label="Outstanding Payment Amount"
          description="The dollar amount of the previous missed payment"
          required="true"
          default_value="0.00"
          length="8"
          decimal="2" />
        <double
          name="totalBillingAmount"
          label="Total Billing Amount"
          description="The total amount paid thus far."
          required="true"
          default_value="0.00"
          length="9"
          decimal="2" />
      </attributes>
    </mdBusiness>
    
    <mdBusiness
      name="com.mybodytutor.paypal.PaypalProfile"
      extends="com.mybodytutor.paypal.PaymentProfile"
      label="Paypal Profile"
      description="Paypal Profile"
      isAbstract="false">
      <attributes>
        <char
          name="transactionId"
          required="false"
          size="19"
          label="Transaction Id"
          description="The transaction id used for reference transactions" />
        <enumeration
          name="creditCardTypes"
          selectMultiple="false"
          label="Credit Card Types"
          type="com.mybodytutor.paypal.AllCreditCardTypes"
          description="Credit Card Types"
          required="false" />
        <char
          name="creditCardNumber"
          size="16"
          required="false"
          label="Credit Card Number"
          description="Credit Card Number" />
        <char
          name="expirationDate"
          label="Expiration Date"
          description="Expiration Date"
          required="false"
          size="6" />
        <char
          name="firstName"
          label="First Name"
          description="First Name"
          size="25"
          required="false" />
        <char
          name="lastName"
          label="Last Name"
          description="Last Name"
          size="25"
          required="false" />
        <char
          name="street1"
          label="Street 1"
          description="Street 1"
          size="100"
          required="false" />
        <char
          name="street2"
          label="Street 2"
          description="Street 2"
          size="100"
          required="false" />
        <char
          name="zipCode"
          label="Zip Code"
          description="Zip Code"
          size="20"
          required="false" />
        <char
          name="stateName"
          label="State"
          description="State"
          size="40"
          required="false" />
        <char
          name="city"
          label="City"
          description="City"
          size="50"
          required="false" />
      </attributes>
    </mdBusiness>
    
    <mdBusiness
      name="com.mybodytutor.AccountView"
      label="Account View"
      description="The billing information summary">
      <attributes>
        <char
          name="clientId"
          label="Client Id"
          description="Client Id"
          size="64"
          required="true" />
        <enumeration
          name="currentStatus"
          selectMultiple="false"
          label="Current Status"
          required="true"
          type="com.mybodytutor.paypal.AllProfileStatus" />
        <boolean
          name="hasProfile"
          label="Has Profile"
          description="True if the Client has a remote profile."
          required="true" />
        <boolean
          name="payingWithGiftCertificate"
          label="Paying With Gift Certificate"
          description="True if the client is currently paying with a gift certificate"
          required="true" />
        <enumeration
          name="creditCardTypes"
          selectMultiple="false"
          label="Credit Card Types"
          type="com.mybodytutor.paypal.AllCreditCardTypes"
          description="Credit Card Types"
          required="false" />
        <char
          name="creditCardNumber"
          size="16"
          required="false"
          label="Credit Card Number"
          description="Credit Card Number" />
        <char
          name="expirationDate"
          label="Expiration Date"
          description="Expiration Date"
          required="false"
          size="6" />
        <char
          name="firstName"
          label="First Name"
          description="First Name"
          size="25"
          required="false" />
        <char
          name="lastName"
          label="Last Name"
          description="Last Name"
          size="25"
          required="false" />
        <char
          name="street1"
          label="Street 1"
          description="Street 1"
          size="100"
          required="false" />
        <char
          name="street2"
          label="Street 2"
          description="Street 2"
          size="100"
          required="false" />
        <char
          name="zipCode"
          label="Zip Code"
          description="Zip Code"
          size="20"
          required="false" />
        <char
          name="stateName"
          label="State"
          description="State"
          size="40"
          required="false" />
        <char
          name="city"
          label="City"
          description="City"
          size="50"
          required="false" />
        <dateTime
          name="nextBillingDate"
          required="false"
          label="Next Billing Date"
          description="Next Billing Date" />
        <dateTime
          name="lastBillingDate"
          label="Last Billing Date"
          description="The last successful billing date"
          required="false" />
        <dateTime
          name="lastAttemptedBillingDate"
          label="Last Attempted Billing Date"
          description="The last attempted billing date (does not imply success or failure)."
          required="false" />
        <char
          name="outstandingAmount"
          label="Outstanding Payment Amount"
          description="The dollar amount of the previous missed payment"
          required="true"
          default_value="0.00"
          size="20" />
        <char
          name="totalBillingAmount"
          label="Total Billing Amount"
          description="The total amount paid thus far."
          required="true"
          default_value="0.00"
          size="20" />
      </attributes>
    </mdBusiness>
    
    <mdTree
      name="com.mybodytutor.PaysWith"
      label="Pays With"
      description="Client Pays With"
      isAbstract="false"
      composition="true"
      publish="true">
      <parent
        name="com.mybodytutor.Client"
        label="Client Pays With"
        method="Client"
        cardinality="1" />
      <child
        name="com.mybodytutor.paypal.PaypalProfile"
        label="Is Paid By"
        method="PaypalProfile"
        cardinality="1" />
    </mdTree>

    <mdBusiness
      name="com.mybodytutor.PaymentTask"
      label="Payment Task"
      description="Payment Task"
      extendable="false"
      isAbstract="false"
      publish="true">
      <attributes>
        <dateTime
          name="lastRun"
          label="Last Run"
          description="Time of the last task run."
          required="false" />
        <dateTime
          name="lastFailure"
          label="Last Failure"
          description="The last failure date."
          required="false" />
        <dateTime
          name="lastTimeout"
          label="Last Timeout"
          description="The last timeout date."
          required="false" />
        <integer
          name="runCount"
          label="Run Count"
          description="The number of times the task has run."
          required="true"
          rejectNegative="true"
          default_value="0" />
        <integer
          name="timeoutCount"
          label="Timeout Count"
          description="The total number of timeouts."
          required="true"
          rejectNegative="true"
          default_value="0"/>
        <integer
          name="failureCount"
          label="Failure Count"
          description="The total number of failures."
          required="true"
          rejectNegative="true"
          default_value="0"/>
        <integer
          name="totalClientsProcessed"
          label="total clients processed."
          description="The number of clients processed during the previous run."
          required="true"
          rejectNegative="true"
          default_value="0" />
        <integer
          name="totalClientsBilled"
          label="total clients billed"
          description="The number of clients billed during the previous run."
          required="true"
          rejectNegative="true"
          default_value="0" />
      </attributes>
      <mdMethod
        name="getTask"
        label="Get Task View"
        description="Gets the view of the single PaymentTask instance."
        static="true"
        returnType="com.mybodytutor.PaymentTaskView">
      </mdMethod>
      <mdMethod
        name="startTask"
        label="Start Task"
        description="Starts the task."
        returnType="com.mybodytutor.PaymentTaskView"
        static="true">
      </mdMethod>
      <mdMethod
        name="startCycles"
        label="Start Cycles"
        description="Starts the task cycles."
        returnType="void"
        static="true">
      </mdMethod>
      <mdMethod
        name="stopCycles"
        label="Stop Cycles"
        description="Stops the task cycles."
        returnType="void"
        static="true">
      </mdMethod>
      <mdMethod
        name="endTask"
        label="End Task"
        description="Ends the task."
        returnType="com.mybodytutor.PaymentTaskView"
        static="true">
      </mdMethod>
    </mdBusiness>
    
    <mdView
      name="com.mybodytutor.PaymentTaskView"
      label="Payment Task View"
      description="The view of the Payment Task with derived information about the task runtime">
      <attributes>
        <dateTime
          name="lastRun"
          label="The last payment task run."
          description="Time of the last task run."
          required="false" />
        <dateTime
          name="nextRun"
          label="The next estimated payment task run."
          description="Next scheduled run date."
          required="false" />
        <dateTime
          name="lastFailure"
          label="The date of the last reported failure."
          description="The last failure date."
          required="false" />
        <dateTime
          name="lastTimeout"
          label="The date of the last reported timeout."
          description="The last timeout date."
          required="false" />
        <integer
          name="runCount"
          label="The total number of payment task runs."
          description="The number of times the task has run."
          required="true"
          rejectNegative="true"
          default_value="0" />
        <integer
          name="timeoutCount"
          label="The total number of timeouts."
          description="The total number of timeouts."
          required="true"
          rejectNegative="true"
          default_value="0"/>
        <integer
          name="failureCount"
          label="The total number of failures."
          description="The total number of failures."
          required="true"
          rejectNegative="true"
          default_value="0"/>
        <integer
          name="totalClientsProcessed"
          label="The total number of clients processed."
          description="The number of clients processed during the previous run."
          required="true"
          rejectNegative="true"
          default_value="0" />
        <integer
          name="totalClientsBilled"
          label="The total number of clients billed."
          description="The number of clients billed during the previous run."
          required="true"
          rejectNegative="true"
          default_value="0" />
        <boolean
          name="isPaymentTaskRunning"
          label="Is the payment task running."
          description="Is the payment task currently running."
          required="true" />
        <char
          name="paymentTaskState"
          label="The payment task's current state."
          description="The state of the threaded process."
          required="true"
          size="15" />
        <boolean
          name="isBillingCycleRunning"
          label="Is the billing cycle running."
          description="Is the billing cycle currently running."
          required="true" />
        <char
          name="billingCycleState"
          label="The billing cycle's current state."
          description="The state of the billing cycle."
          required="true"
          size="15" />
      </attributes>
    </mdView>
    
    <object
      id="paymentTaskSingleton"
      type="com.mybodytutor.PaymentTask">
    </object>

    <enumerationMaster
      name="com.mybodytutor.GiftCertificateDuration"
      label="Gift Certificate Duration"
      description="Gift Certificate Duration">
      <attributes>
        <integer
          name="duration"
          label="Duration"
          description="The duration in months"
          required="true"
          rejectZero="true"
          rejectNegative="true" />
      </attributes>
    </enumerationMaster>

    <object
      id="one"
      type="com.mybodytutor.GiftCertificateDuration">
      <valueAttribute
        name="enumName"
        value="ONE" />
      <valueAttribute
       name="displayLabel"
       value="One Month" />
      <valueAttribute
        name="duration"
        value="1" />
    </object>
    
    <object
      id="three"
      type="com.mybodytutor.GiftCertificateDuration">
      <valueAttribute
        name="enumName"
        value="THREE" />
      <valueAttribute
       name="displayLabel"
       value="Three Months" />
      <valueAttribute
        name="duration"
        value="3" />
    </object>
    
    <object
      id="six"
      type="com.mybodytutor.GiftCertificateDuration">
      <valueAttribute
        name="enumName"
        value="SIX" />
      <valueAttribute
       name="displayLabel"
       value="Six Months" />
      <valueAttribute
        name="duration"
        value="6" />
    </object>
    
    <object
      id="nine"
      type="com.mybodytutor.GiftCertificateDuration">
      <valueAttribute
        name="enumName"
        value="NINE" />
      <valueAttribute
       name="displayLabel"
       value="Nine Months" />
      <valueAttribute
        name="duration"
        value="9" />
    </object>
    
    <object
      id="twelve"
      type="com.mybodytutor.GiftCertificateDuration">
      <valueAttribute
        name="enumName"
        value="TWELVE" />
      <valueAttribute
       name="displayLabel"
       value="Twelve Months" />
      <valueAttribute
        name="duration"
        value="12" />
    </object>

    <mdEnumeration
      name="com.mybodytutor.AllGiftCertificateDuration"
      type="com.mybodytutor.GiftCertificateDuration"
      label="All Gift Certificate Duration"
      description="All Gift Certificate Duration Options">
      <includeAll />
    </mdEnumeration>

    <enumerationMaster
      name="com.mybodytutor.ReferralStatus"
      label="Redeem Status"
      description="Redeem Status for referrals and gift certificates.">
    </enumerationMaster>
    
    <object
      id="referralInactive"
      type="com.mybodytutor.ReferralStatus">
      <valueAttribute
       name="enumName"
       value="INACTIVE" />
      <valueAttribute
       name="displayLabel"
       value="Inactive" />
    </object>

    <object
      id="referralRedeemed"
      type="com.mybodytutor.ReferralStatus">
      <valueAttribute
        name="enumName"
        value="REDEEMED" />
      <valueAttribute
       name="displayLabel"
       value="Redeemed" />
    </object>

    <mdEnumeration
      name="com.mybodytutor.AllReferralStatus"
      type="com.mybodytutor.ReferralStatus"
      label="All Redeem Status"
      description="All Redeem Status Options">
      <includeAll />
    </mdEnumeration>
    

    
    <mdBusiness
      name="com.mybodytutor.Referral"
      label="Referral"
      description="Represents a client referral"
      isAbstract="false">
      <attributes>
        <char
          name="referrerId"
          label="Referrer Id"
          description="The id of the client referrer"
          required="true"
          size="64" />
        <text
          name="personalMessage"
          label="Personal Message"
          description="Personal Message"
          required="false" />
        <char
          name="toFirstName"
          label="Recipient's First Name"
          description="First name of the recpient"
          required="true"
          size="30" />
        <char
          name="toLastName"
          label="Recipient's Last Name"
          description="Last name of the recpient"
          required="true"
          size="30" />        
        <char
          name="toEmail"
          label="Recipient's Email"
          description="Recipient's email."
          required="true"
          size="255" />
        <char
          name="referralCode"
          size="32"
          required="true"
          label="Referral Code"
          indexType="unique index"
          description="The unique referral code to redeem the referral discount" />
        <enumeration
          name="currentStatus"
          label="Status"
          selectMultiple="false"
          required="true"
          default_value="referralInactive"
          type="com.mybodytutor.AllReferralStatus" />
      </attributes>
      <mdMethod
        name="searchReferrals"
        label="Search Referrals"
        description="Searches Referrals"
        returnType="com.mybodytutor.ReferralQuery"
        static="true">
        <mdParameter
          name="pageSize"
          type="java.lang.Integer"
          label="Page Size"
          order="0" />
        <mdParameter
          name="pageNumber"
          type="java.lang.Integer"
          label="Page Number"
          order="1" />
        <mdParameter
          name="sortAttribute"
          type="java.lang.String"
          label="Sort Attribute"
          order="2" />
        <mdParameter
          name="ascending"
          type="java.lang.Boolean"
          label="Sort Ascending"
          order="3" />
        <mdParameter
          name="search"
          type="java.lang.String"
          label="Search Query"
          order="4" />
      </mdMethod>
      <mdMethod
        name="createReferral"
        label="Create Referral"
        description="Creates a referral"
        returnType="void">
        <mdParameter
          name="endpoint"
          label="Endpoint"
          description="The client-side endpoint for processing the referral"
          order="0"
          type="java.lang.String" />
      </mdMethod>
    </mdBusiness>
    
    <mdTree
      name="com.mybodytutor.HasGiftCertificate"
      label="Has Gift Certificate"
      description="Client has a gift certificate">
      <parent
        name="com.mybodytutor.Client"
        label="Owns Gift Certificate"
        method="Client"
        cardinality="1" />
      <child
        name="com.mybodytutor.GiftCertificate"
        label="Belongs to client"
        method="GiftCertificate"
        cardinality="*" />
    </mdTree>
    
    <enumerationMaster
      name="com.mybodytutor.ClientStatus"
      label="Client Status"
      description="Client Status">
    </enumerationMaster>
    
    <object
      id="active"
      type="com.mybodytutor.ClientStatus">
      <valueAttribute
       name="enumName"
       value="ACTIVE" />
      <valueAttribute
       name="displayLabel"
       value="Active" />
    </object>

    <object
      id="inactive"
      type="com.mybodytutor.ClientStatus">
      <valueAttribute
        name="enumName"
        value="INACTIVE" />
      <valueAttribute
       name="displayLabel"
       value="Inactive" />
    </object>

    <mdEnumeration
      name="com.mybodytutor.AllClientStatus"
      type="com.mybodytutor.ClientStatus"
      label="All Client Status"
      description="All Client Status Options">
      <includeAll />
    </mdEnumeration>

    <enumerationMaster
      name="com.mybodytutor.paypal.ProfileStatus"
      label="Profile Status"
      description="Paypal Profile Status">
      <attributes>
        <char
          name="paypalName"
          size="20"
          label="Paypal Status"
          description="Paypal API Status"
          required="false" />
      </attributes>
    </enumerationMaster>

    <object
      id="activeProfile"
      type="com.mybodytutor.paypal.ProfileStatus">
      <valueAttribute
        name="enumName"
        value="ACTIVE" />
      <valueAttribute
       name="displayLabel"
       value="Active" />
      <valueAttribute
        name="paypalName"
        value="Active" />
    </object>
    
    <object
      id="inactiveProfile"
      type="com.mybodytutor.paypal.ProfileStatus">
      <valueAttribute
        name="enumName"
        value="INACTIVE" />
      <valueAttribute
       name="displayLabel"
       value="Inactive" />
      <valueAttribute
        name="paypalName"
        value="Inactive" />
    </object>
    
    <object
      id="warningProfile"
      type="com.mybodytutor.paypal.ProfileStatus">
      <valueAttribute
        name="enumName"
        value="WARNING" />
      <valueAttribute
       name="displayLabel"
       value="Warning" />
      <valueAttribute
        name="paypalName"
        value="Warning" />
    </object>

    <mdEnumeration
      name="com.mybodytutor.paypal.AllProfileStatus"
      type="com.mybodytutor.paypal.ProfileStatus"
      label="All Profile Status"
      description="All Profile Status Options">
      <includeAll />
    </mdEnumeration>

    <enumerationMaster
      name="com.mybodytutor.paypal.CreditCardTypes"
      label="Credit Card Types"
      description="Credit Card Types">
      <attributes>
        <char
          name="paypalName"
          size="10"
          label="Paypal Name"
          description="Paypal API Name"
          required="true" />
      </attributes>
    </enumerationMaster>
    
    <object
      id="visa"
      type="com.mybodytutor.paypal.CreditCardTypes">
      <valueAttribute
        name="enumName"
        value="VISA" />
      <valueAttribute
        name="paypalName"
        value="Visa" />
      <valueAttribute
        name="displayLabel"
        value="Visa" />
    </object>
    
    <object
      id="mastercard"
      type="com.mybodytutor.paypal.CreditCardTypes">
      <valueAttribute
        name="enumName"
        value="MASTERCARD" />
      <valueAttribute
        name="paypalName"
        value="MasterCard" />
      <valueAttribute
        name="displayLabel"
        value="MasterCard" />
    </object>
    
    <object
      id="discover"
      type="com.mybodytutor.paypal.CreditCardTypes">
      <valueAttribute
        name="enumName"
        value="DISCOVER" />
      <valueAttribute
        name="paypalName"
        value="Discover" />
      <valueAttribute
        name="displayLabel"
        value="Discover" />
    </object>        
    
    <object
      id="amex"
      type="com.mybodytutor.paypal.CreditCardTypes">
      <valueAttribute
        name="enumName"
        value="AMEX" />
      <valueAttribute
        name="paypalName"
        value="Amex" />
      <valueAttribute
        name="displayLabel"
        value="American Express" />
    </object>
    
    <mdEnumeration
      name="com.mybodytutor.paypal.AllCreditCardTypes"
      type="com.mybodytutor.paypal.CreditCardTypes"
      label="All Credit Card Types"
      description="All Credit Card Type Options">
      <includeAll />
    </mdEnumeration>

    <mdView
      name="com.mybodytutor.paypal.TransactionView"
      label="Transaction View"
      description="Transaction View">
      <attributes>
        <char
          name="transactionId"
          size="19"
          label="Transaction Id"
          description="Transaction Id"
          required="true" />
        <char
          name="amount"
          size="8"
          label="Amount"
          description="Transaction Id"
          required="true" />
        <char
          name="orderTime"
          size="25"
          label="Order Time"
          description="Order Time"
          required="true" />
        <char
          name="firstName"
          label="First Name"
          description="First Name"
          size="25"
          required="true" />
        <char
          name="lastName"
          label="Last Name"
          description="Last Name"
          size="25"
          required="true" />
        <char
          name="paymentStatus"
          label="payment status"
          description="Payment Status"
          size="20"
          required="true" />
        <char
          name="pendingReason"
          label="pending reason"
          description="Pending Reasons"
          size="15"
          required="false" />
      </attributes>
      <mdMethod
        name="getTransactionView"
        label="Get Transaction View"
        description="Gets a transaction view that maps to the given transaction id"
        static="true"
        returnType="com.mybodytutor.paypal.TransactionView">
        <mdParameter
          name="transactionId"
          label="Transaction Id"
          description="The paypal transaction id"
          type="java.lang.String"
          order="0" />
      </mdMethod>
    </mdView>
    
    <mdView
      name="com.mybodytutor.BillingView"
      label="Billing View"
      description="View for Billing Information"
      isAbstract="false">
      <attributes>
        <char
          name="ipAddress"
          size="255"
          required="false"
          label="IP Address"
          description="The IP of the purchaser" />
        <enumeration
          name="creditCardTypes"
          selectMultiple="false"
          label="Credit Card Types"
          type="com.mybodytutor.paypal.AllCreditCardTypes"
          description="Credit Card Types"
          required="true" />
        <char
          name="creditCardNumber"
          size="19"
          required="true"
          label="Credit Card Number"
          description="Credit Card Number" />
        <char
          name="expirationDate"
          label="Expiration Date"
          description="Expiration Date"
          required="true"
          size="6" />
        <char
          name="cardVerificationNumber"
          label="Card Verification Number"
          description="Card Verification Number"
          size="4"
          required="true" />
        <char
          name="billingFirstName"
          label="First Name"
          description="First Name"
          size="25"
          required="true" />
        <char
          name="billingLastName"
          label="Last Name"
          description="Last Name"
          size="25"
          required="true" />
        <char
          name="street1"
          label="Street 1"
          description="Street 1"
          size="100"
          required="true" />
        <char
          name="street2"
          label="Street 2"
          description="Street 2"
          size="100"
          required="false" />
        <char
          name="zipCode"
          label="Zip Code"
          description="Zip Code"
          size="20"
          required="true" />
        <char
          name="stateName"
          label="State"
          description="State"
          size="40"
          required="true" />
        <char
          name="city"
          label="City"
          description="City"
          size="50"
          required="true" />
      </attributes>
    </mdView>

    <mdTree
      name="com.mybodytutor.HasPaymentHistory"
      label="Has History"
      description="A Client has history entries"
      composition="true">
      <parent
        name="com.mybodytutor.Client"
        label="Has payment history"
        method="Client"
        cardinality="1" />
      <child
        name="com.mybodytutor.paypal.PaymentHistory"
        label="Belongs to client"
        method="PaymentHistory"
        cardinality="*" />
    </mdTree>

    <mdException
      name="com.mybodytutor.TaskAlreadyStartedException"
      label="Payment Task Start Exception"
      description="The payment task could not be started.">   
    <messages>
      <![CDATA[
<?xml version="1.0" encoding="UTF-8" ?>
<exception xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:noNamespaceSchemaLocation="../../exceptions.xsd"
  name="com.mybodytutor.TaskAlreadyStartedException">
  <locale language="en">The task could not be started because it is already running.</locale>
</exception>
      ]]>
    </messages>
    </mdException>
    
    <mdException
      name="com.mybodytutor.TaskAlreadyStoppedException"
      label="Payment Task Stop Exception"
      description="The payment task could not be stopped">   
    <messages>
      <![CDATA[
<?xml version="1.0" encoding="UTF-8" ?>
<exception xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:noNamespaceSchemaLocation="../../exceptions.xsd"
  name="com.mybodytutor.TaskAlreadyStoppedException">
  <locale language="en">The task could not be stopped because it is not running.</locale>
</exception>
      ]]>
    </messages>
    </mdException>

    <mdException
      name="com.mybodytutor.CycleAlreadyStartedException"
      label="Cycle Start Exception"
      description="The billing cycle could not be started.">   
    <messages>
      <![CDATA[
<?xml version="1.0" encoding="UTF-8" ?>
<exception xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:noNamespaceSchemaLocation="../../exceptions.xsd"
  name="com.mybodytutor.CycleAlreadyStartedException">
  <locale language="en">The billing cycle could not be started because it is already running.</locale>
</exception>
      ]]>
    </messages>
    </mdException>
    
    <mdException
      name="com.mybodytutor.CycleAlreadyStoppedException"
      label="Cycle Stop Exception"
      description="The billing cycle could not be stopped">   
    <messages>
      <![CDATA[
<?xml version="1.0" encoding="UTF-8" ?>
<exception xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:noNamespaceSchemaLocation="../../exceptions.xsd"
  name="com.mybodytutor.CycleAlreadyStoppedException">
  <locale language="en">The billing cycle could not be stopped because it is not running.</locale>
</exception>
      ]]>
    </messages>
    </mdException>

    <mdException
      name="com.mybodytutor.MaintenancePlanException"
      label="Maintenance Plan Exception"
      description="A user tried to select the maintenance plan without permission.">   
    <messages>
      <![CDATA[
<?xml version="1.0" encoding="UTF-8" ?>
<exception xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:noNamespaceSchemaLocation="../../exceptions.xsd"
  name="com.mybodytutor.MaintenancePlanException">
  <locale language="en">The maintenance Plan is currently not enabled.</locale>
</exception>
      ]]>
    </messages>
    </mdException>
    
    <mdException
      name="com.mybodytutor.ProfileAlreadyExistsException"
      label="Profile Already Exists Exception"
      description="A Client tried to create a profile when one already existed.">   
      <attributes>
        <char
          name="username"
          size="255"
          label="Client Username"
          description="Client Username" />
      </attributes>  
    <messages>
      <![CDATA[
<?xml version="1.0" encoding="UTF-8" ?>
<exception xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:noNamespaceSchemaLocation="../../exceptions.xsd"
  name="com.mybodytutor.ProfileAlreadyExistsException">
  <locale language="en">The Client [{username}] already has a Payment Profile.</locale>
</exception>
      ]]>
    </messages>
    </mdException>

    <mdException
      name="com.mybodytutor.ProfileDoesNotExistException"
      label="Profile Does Not Exist Exception"
      description="A Client tried to access a profile that doesn't exist.">
    <messages>
      <![CDATA[
<?xml version="1.0" encoding="UTF-8" ?>
<exception xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:noNamespaceSchemaLocation="../../exceptions.xsd"
  name="com.mybodytutor.ProfileDoesNotExistException">
  <locale language="en">The Client does not have a Payment Profile.</locale>
</exception>
      ]]>
    </messages>
    </mdException>

    <mdException
      name="com.mybodytutor.paypal.PaypalException"
      label="A Paypal Exception"
      description="An error occurred while trying to invoke Paypal Services.">
      <attributes>
        <text
          name="paypalMessage"
          label="Paypal Message"
          description="The Paypal Message" />
      </attributes>  
    <messages>
      <![CDATA[
<?xml version="1.0" encoding="UTF-8" ?>
<exception xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:noNamespaceSchemaLocation="../../exceptions.xsd"
  name="com.mybodytutor.paypal.PaypalException">
  <locale language="en">The following error(s) occurred:\n {paypalMessage}.</locale>
</exception>
      ]]>
    </messages>
    </mdException>

    <mdException
      name="com.mybodytutor.paypal.FatalPaypalException"
      label="A Fatal Paypal Exception"
      description="A fatal error occurred that may require admin intervention while trying to invoke Paypal Services.">
    <messages>
      <![CDATA[
<?xml version="1.0" encoding="UTF-8" ?>
<exception xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:noNamespaceSchemaLocation="../../exceptions.xsd"
  name="com.mybodytutor.paypal.FatalPaypalException">
  <locale language="en">An error occurred. Please try again or contact support if the problem continues.</locale>
</exception>
      ]]>
    </messages>
    </mdException>
    
    <mdException
      name="com.mybodytutor.paypal.NVPException"
      label="NVP Exception"
      description="An error occurred while handling a Paypal NVP request/response."> 
    <messages>
      <![CDATA[
<?xml version="1.0" encoding="UTF-8" ?>
<exception xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:noNamespaceSchemaLocation="../../exceptions.xsd"
  name="com.mybodytutor.paypal.NVPException">
  <locale language="en">An error has occurred. Please try your request again or contact support.</locale>
</exception>
      ]]>
    </messages>
    </mdException>

    <mdException
      name="com.mybodytutor.InvalidReferralException"
      label="Invalid Redeem Exception"
      description="An error occurred while trying to redeem a referral">
    <messages>
      <![CDATA[
<?xml version="1.0" encoding="UTF-8" ?>
<exception xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:noNamespaceSchemaLocation="../../exceptions.xsd"
  name="com.mybodytutor.InvalidRedeemException">
  <locale language="en">You have entered an invalid referral code.</locale>
</exception>
      ]]>
    </messages>
    </mdException>

    <mdException
      name="com.mybodytutor.AlreadyReferredException"
      label="Already Redeemed Exception"
      description="An error thrown when a referral has already been redeemed.">
    <messages>
      <![CDATA[
<?xml version="1.0" encoding="UTF-8" ?>
<exception xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:noNamespaceSchemaLocation="../../exceptions.xsd"
  name="com.mybodytutor.AlreadyRedeemedException">
  <locale language="en">The provided referral code has already been used.</locale>
</exception>
      ]]>
    </messages>
    </mdException>

    <mdException
      name="com.mybodytutor.InvalidRedeemException"
      label="Invalid Redeem Exception"
      description="An error occurred while trying to redeem a gift certificate">
    <messages>
      <![CDATA[
<?xml version="1.0" encoding="UTF-8" ?>
<exception xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:noNamespaceSchemaLocation="../../exceptions.xsd"
  name="com.mybodytutor.InvalidRedeemException">
  <locale language="en">The Gift Certificate could not be redeemed due to invalid information.</locale>
</exception>
      ]]>
    </messages>
    </mdException>

    <mdException
      name="com.mybodytutor.AlreadyRedeemedException"
      label="Already Redeemed Exception"
      description="An error thrown when a gift certificate has already been redeemed.">
    <messages>
      <![CDATA[
<?xml version="1.0" encoding="UTF-8" ?>
<exception xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:noNamespaceSchemaLocation="../../exceptions.xsd"
  name="com.mybodytutor.AlreadyRedeemedException">
  <locale language="en">The Gift Certificate has already been redeemed.</locale>
</exception>
      ]]>
    </messages>
    </mdException>
    
    <mdException
      name="com.mybodytutor.MissingBillingException"
      label="Missing Duration Exception"
      description="Thrown when billing information is requested that does not exist.">
    <messages>
      <![CDATA[
<?xml version="1.0" encoding="UTF-8" ?>
<exception xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:noNamespaceSchemaLocation="../../exceptions.xsd"
  name="com.mybodytutor.MissingBillingException">
  <locale language="en">You currently do not have any billing informaton on profile.</locale>
</exception>
      ]]>
    </messages>
    </mdException>
    
    <mdException
      name="com.mybodytutor.MissingEmailException"
      label="Missing Email Exception"
      description="Thrown when the email value for a client does not exist.">
    <messages>
      <![CDATA[
<?xml version="1.0" encoding="UTF-8" ?>
<exception xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:noNamespaceSchemaLocation="../../exceptions.xsd"
  name="com.mybodytutor.MissingEmailException">
  <locale language="en">The email field is required. Please enter a valid email.</locale>
</exception>
      ]]>
    </messages>
    </mdException>
    
    <mdException
      name="com.mybodytutor.InvalidCCNumberException"
      label="Invalid Credit Card Number Exception"
      description="Thrown when a credit card number is invalid.">
    <messages>
      <![CDATA[
<?xml version="1.0" encoding="UTF-8" ?>
<exception xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:noNamespaceSchemaLocation="../../exceptions.xsd"
  name="com.mybodytutor.InvalidCCNumberException">
  <locale language="en">The credit card number must only contain digits.</locale>
</exception>
      ]]>
    </messages>
    </mdException>
    
    <mdException
      name="com.mybodytutor.InvalidCVV2Exception"
      label="Invalid Credit Card Number Exception"
      description="Thrown when a CVV2 Number is invalid.">
    <messages>
      <![CDATA[
<?xml version="1.0" encoding="UTF-8" ?>
<exception xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:noNamespaceSchemaLocation="../../exceptions.xsd"
  name="com.mybodytutor.InvalidCVV2Exception">
  <locale language="en">The credit card verification number must contain 3 or 4 digits.</locale>
</exception>
      ]]>
    </messages>
    </mdException>

    <mdException
      name="com.mybodytutor.ClientOperationException"
      label="Client Operation Exception"
      description="Client Operation Exception">
    <messages>
      <![CDATA[<?xml version="1.0" encoding="UTF-8" ?>
<exception xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:noNamespaceSchemaLocation="../../exceptions.xsd"
  name="com.mybodytutor.ClientOperationException">
  <locale language="en">You have requested an invalid operation.</locale>
</exception>]]>
    </messages>
    </mdException>
    
    <mdException
      name="com.mybodytutor.RedeemWithWarningException"
      label="Bill Outstanding Exception"
      description="Bill Outstanding Exception">
    <messages>
      <![CDATA[<?xml version="1.0" encoding="UTF-8" ?>
<exception xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:noNamespaceSchemaLocation="../../exceptions.xsd"
  name="com.mybodytutor.RedeemWithWarningException">
  <locale language="en">You must pay all outstanding payments before redeeming a Gift Certificate.</locale>
</exception>]]>
    </messages>
    </mdException>
    
    <mdException
      name="com.mybodytutor.BillOutstandingException"
      label="Bill Outstanding Exception"
      description="Bill Outstanding Exception">
    <messages>
      <![CDATA[<?xml version="1.0" encoding="UTF-8" ?>
<exception xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:noNamespaceSchemaLocation="../../exceptions.xsd"
  name="com.mybodytutor.BillOutstandingException">
  <locale language="en">There are no outstanding payments to bill.</locale>
</exception>]]>
    </messages>
    </mdException>

    <mdException
      name="com.mybodytutor.DuplicateUserException"
      label="Duplicate User Exception"
      description="A user already exists with a specific email">
      <attributes>
        <char
          name="email"
          label="Email"
          required="true"
          description="The duplicate email"
          size="255" />      
      </attributes>
    <messages>
      <![CDATA[<?xml version="1.0" encoding="UTF-8" ?>
<exception xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:noNamespaceSchemaLocation="../../exceptions.xsd"
  name="com.mybodytutor.DuplicateUserException">
  <locale language="en">A user already exists with the email [{email}]. Please enter a different value.</locale>
</exception>]]>
    </messages>
    </mdException>
    
    <!-- Permissions Objects -->
    <object
      type="com.terraframe.mrsparkle.system.Roles"
      id="feedbackViewRole">
      <valueAttribute
        name="roleName"
        value="feedbackViewRole" />
    </object>
    <object
      type="com.terraframe.mrsparkle.system.Roles"
      id="feedbackCreateRole">
      <valueAttribute
        name="roleName"
        value="feedbackCreateRole" />
    </object>
    <object
      type="com.terraframe.mrsparkle.system.Roles"
      id="clientRole">
      <valueAttribute
        name="roleName"
        value="clientRole" />
    </object>
    <object
      type="com.terraframe.mrsparkle.system.Roles"
      id="feedbackEditRole">
      <valueAttribute
        name="roleName"
        value="feedbackEditRole" />
    </object>
    <object
      type="com.terraframe.mrsparkle.system.Roles"
      id="referralCreateRole">
      <valueAttribute
        name="roleName"
        value="referralCreateRole" />
    </object>
    <object
      type="com.terraframe.mrsparkle.system.Roles"
      id="referralReadRole">
      <valueAttribute
        name="roleName"
        value="referralReadRole" />
    </object>
    <object
      type="com.terraframe.mrsparkle.system.Roles"
      id="calendarFeedbackReadRole">
      <valueAttribute
        name="roleName"
        value="calendarFeedbackReadRole"/>
    </object>
    <mdException
      name="com.mybodytutor.paypal.TransactionException"
      label="Transaction Exception"
      description="Error occurred while retrieving Paypal transaction details.">
    <messages>
      <![CDATA[<?xml version="1.0" encoding="UTF-8" ?>
<exception xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:noNamespaceSchemaLocation="../../exceptions.xsd"
  name="com.mybodytutor.paypal.TransactionException">
  <locale language="en">The transaction details could not be retrieved. Please try again or contact support.</locale>
</exception>]]>
    </messages>
    </mdException>

    <mdException
      name="com.mybodytutor.paypal.PaypalTimeoutException"
      label="Paypal Timeout Exception"
      description="A call to Paypal timed out.">
    <messages>
      <![CDATA[<?xml version="1.0" encoding="UTF-8" ?>
<exception xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:noNamespaceSchemaLocation="../../exceptions.xsd"
  name="com.mybodytutor.paypal.TransactionException">
  <locale language="en">A call to Paypal timed out.</locale>
</exception>]]>
    </messages>
    </mdException>
    
    <mdProblem
      name="com.mybodytutor.InvalidEmailProblem"
      label="Invalid Email Problem"
      description="A call to Paypal timed out.">
      <attributes>
        <char
          name="email"
          label="Email"
          required="true"
          description="The invalid email"
          size="255" />      
      </attributes>
    <messages>
      <![CDATA[<?xml version="1.0" encoding="UTF-8" ?>
<exception xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:noNamespaceSchemaLocation="../../exceptions.xsd"
  name="com.mybodytutor.InvalidEmailProblem">
  <locale language="en">The email [{email}] is in an invalid format.</locale>
</exception>]]>
    </messages>
    </mdProblem>
    
    <mdProblem
      name="com.mybodytutor.AttributeParseProblem"
      label="Attribute Parse Problem"
      description="An attribute cannot be parsed as expected.">
      <attributes>
        <char
          name="attributeName"
          label="Attribute Name"
          required="true"
          description="The attribute that could not be parsed"
          size="255" />
        <char
          name="attributeValue"
          label="Attribute Value"
          required="true"
          description="The invalid attribute value"
          size="255" />
      </attributes>
    <messages>
      <![CDATA[<?xml version="1.0" encoding="UTF-8" ?>
<exception xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:noNamespaceSchemaLocation="../../exceptions.xsd"
  name="com.mybodytutor.AttributeParseProblem">
  <locale language="en">[{attributeValue]} is not a valid value for [{attributeName}].</locale>
</exception>]]>
    </messages>
    </mdProblem>
    
  </create>
  
  <permissions>
    <user
      userName="taskUser">
      <assignedRole roleName="Administrator"/>
    </user>
    
    <role roleName="PUBLIC">
      <mdBusinessPermission type="com.mybodytutor.Inspiration">
        <operation name="READ"/>
        <operation name="READ_ALL"/>
        
        <!-- TODO: These next three are really for Adam only. Make a new role / user-->
        <operation name="CREATE"/>
        <operation name="WRITE"/>
        <operation name="WRITE_ALL"/>
      </mdBusinessPermission>
    </role>
    
    <role roleName="OWNER">
      <mdBusinessPermission type="com.mybodytutor.CalendarFeedback">
        <operation name="READ" />
        <attributePermission attributeName="feedbackId">
          <operation name="READ" />
        </attributePermission>
        <attributePermission attributeName="feedbackDate">
          <operation name="READ" />
        </attributePermission>
      </mdBusinessPermission>
      <mdBusinessPermission type="com.mybodytutor.MBTUser">
        <operation name="READ"/>
        <attributePermission attributeName="firstName">
          <operation name="READ"/>
        </attributePermission>
        <attributePermission attributeName="lastName">
          <operation name="READ"/>
        </attributePermission>
        <attributePermission attributeName="email">
          <operation name="READ"/>
        </attributePermission>
        <attributePermission attributeName="password">
          <operation name="READ"/>
        </attributePermission>
        <attributePermission attributeName="phoneNumber">
          <operation name="READ"/>
        </attributePermission>
      </mdBusinessPermission>
      <mdBusinessPermission type="com.mybodytutor.Client">
        <operation name="READ"/>
        <attributePermission attributeName="mbtPlan">
          <operation name="READ"/>
        </attributePermission>
      </mdBusinessPermission>
      <mdBusinessPermission type="com.mybodytutor.Tutor">
        <operation name="READ"/>
      </mdBusinessPermission>
    </role>
    
    <role roleName="feedbackViewRole">
      <mdBusinessPermission type="com.mybodytutor.Feedback">
        <operation name="READ"/>
        <operation name="READ_ALL"/>
      </mdBusinessPermission>
    </role>
    
    <role roleName="feedbackCreateRole">
      <superRole roleName="feedbackViewRole"/>
      <mdBusinessPermission type="com.mybodytutor.Feedback">
        <operation name="CREATE"/>
        <attributePermission attributeName="clientRef">
          <operation name="WRITE"/>
        </attributePermission>
        <attributePermission attributeName="feedbackDate">
          <operation name="WRITE"/>
        </attributePermission>
        <attributePermission attributeName="foodRating">
          <operation name="WRITE"/>
        </attributePermission>
        <attributePermission attributeName="meal1Comment">
          <operation name="WRITE"/>
        </attributePermission>
        <attributePermission attributeName="meal1Time">
          <operation name="WRITE"/>
        </attributePermission>
        <attributePermission attributeName="meal2Comment">
          <operation name="WRITE"/>
        </attributePermission>
        <attributePermission attributeName="meal2Time">
          <operation name="WRITE"/>
        </attributePermission>
        <attributePermission attributeName="meal3Comment">
          <operation name="WRITE"/>
        </attributePermission>
        <attributePermission attributeName="meal3Time">
          <operation name="WRITE"/>
        </attributePermission>
        <attributePermission attributeName="meal4Comment">
          <operation name="WRITE"/>
        </attributePermission>
        <attributePermission attributeName="meal4Time">
          <operation name="WRITE"/>
        </attributePermission>
        <attributePermission attributeName="meal5Comment">
          <operation name="WRITE"/>
        </attributePermission>
        <attributePermission attributeName="meal5Time">
          <operation name="WRITE"/>
        </attributePermission>
        <attributePermission attributeName="exerciseRating">
          <operation name="WRITE"/>
        </attributePermission>
        <attributePermission attributeName="exerciseComment">
          <operation name="WRITE"/>
        </attributePermission>
        <attributePermission attributeName="exerciseTomorrow">
          <operation name="WRITE"/>
        </attributePermission>
        <attributePermission attributeName="exerciseYesterday">
          <operation name="WRITE"/>
        </attributePermission>
        <attributePermission attributeName="healthRating">
          <operation name="WRITE"/>
        </attributePermission>
        <attributePermission attributeName="healthComment">
          <operation name="WRITE"/>
        </attributePermission>
        <attributePermission attributeName="sacrifice">
          <operation name="WRITE"/>
        </attributePermission>
        <attributePermission attributeName="gratefulComment">
          <operation name="WRITE"/>
        </attributePermission>
        <attributePermission attributeName="outcomesComment">
          <operation name="WRITE"/>
        </attributePermission>
      </mdBusinessPermission>
      <mdBusinessPermission type="com.mybodytutor.ActivityFeedback">
        <operation name="CREATE"/>
        <operation name="WRITE_ALL"/>
      </mdBusinessPermission>
    </role>
    
    <role roleName="feedbackEditRole">
      <superRole roleName="feedbackViewRole"/>
      <mdBusinessPermission type="com.mybodytutor.Feedback">
        <operation name="WRITE"/>
        <attributePermission attributeName="healthResponse">
          <operation name="WRITE"/>
        </attributePermission>
        <attributePermission attributeName="newMeResponse">
          <operation name="WRITE"/>
        </attributePermission>
        <attributePermission attributeName="exerciseResponse">
          <operation name="WRITE"/>
        </attributePermission>
        <attributePermission attributeName="meal1Response">
          <operation name="WRITE"/>
        </attributePermission>
        <attributePermission attributeName="meal2Response">
          <operation name="WRITE"/>
        </attributePermission>
        <attributePermission attributeName="meal3Response">
          <operation name="WRITE"/>
        </attributePermission>
        <attributePermission attributeName="meal4Response">
          <operation name="WRITE"/>
        </attributePermission>
        <attributePermission attributeName="meal5Response">
          <operation name="WRITE"/>
        </attributePermission>
      </mdBusinessPermission>
      <mdBusinessPermission type="com.mybodytutor.ActivityFeedback">
        <operation name="CREATE"/>
        <operation name="WRITE_ALL"/>
      </mdBusinessPermission>
      <mdBusinessPermission type="com.mybodytutor.UnrespondedFeedbackView">
        <operation name="CREATE"/>
        <operation name="READ"/>
        <operation name="READ_ALL"/>
        <operation name="WRITE_ALL"/>
      </mdBusinessPermission>
      <mdBusinessPermission type="com.mybodytutor.NoRecentActivityView">
        <operation name="CREATE"/>
        <operation name="READ"/>
        <operation name="READ_ALL"/>
        <operation name="WRITE_ALL"/>
      </mdBusinessPermission>
    </role>
    
    <role roleName="referralReadRole">
      <mdBusinessPermission type="com.mybodytutor.Referral">
        <operation name="READ"/>
        <attributePermission attributeName="personalMessage">
          <operation name="READ" />
        </attributePermission>
        <attributePermission attributeName="toFirstName">
          <operation name="READ" />
        </attributePermission>
        <attributePermission attributeName="toLastName">
          <operation name="READ" />
        </attributePermission>
        <attributePermission attributeName="toEmail">
          <operation name="READ" />
        </attributePermission>
        <attributePermission attributeName="referralCode">
          <operation name="READ" />
        </attributePermission>
      </mdBusinessPermission>
    </role>
    
    <role roleName="referralCreateRole">
      <mdBusinessPermission type="com.mybodytutor.Referral">
        <operation name="CREATE"/>
      </mdBusinessPermission>
    </role>
    
    <role roleName="clientRole">
      <superRole roleName="feedbackCreateRole"/>
      <superRole roleName="referralCreateRole"/>
      <superRole roleName="feedbackViewRole"/>
    </role>
    
  </permissions>
  
</TerraFrame>